"use strict";
exports.__esModule = true;
var sameHost_1 = require("./sameHost");
function noopener() {
    return function plugin(tree) {
        tree.match({
            tag: 'a',
            attrs: { target: '_blank', href: new RegExp(/\S+/) }
        }, function (node) {
            var _a = node.attrs, rel = _a.rel, href = _a.href;
            var invalidRel = rel === undefined || !rel.trim();
            var notSameHost = !sameHost_1.sameHost(href.trim());
            if (invalidRel && notSameHost) {
                node.attrs.rel = 'noopener noreferrer';
            }
            return node;
        });
    };
}
exports.noopener = noopener;
