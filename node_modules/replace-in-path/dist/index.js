"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.replaceInPath = void 0;

var _globby = _interopRequireDefault(require("globby"));

var _fs = _interopRequireDefault(require("fs"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const replaceInPath = (path, replacement) => {
  // Make sure that file paths use forward-slashes.
  path = path.replace(/\\/g, "/");

  const paths = _globby.default.sync(path);

  const replacements = Array.isArray(replacement) ? replacement : [replacement];

  for (let i = 0; i < paths.length; i++) {
    const currentPath = paths[i];

    let file = _fs.default.readFileSync(currentPath, "utf8");

    for (let j = 0; j < replacements.length; j++) {
      const currentReplacement = replacements[j];
      const findRegex = typeof currentReplacement.find === "string" ? new RegExp(currentReplacement.find, "g") : currentReplacement.find;
      file = file.replace(findRegex, currentReplacement.replaceWith);
    }

    _fs.default.writeFileSync(currentPath, file);
  }
};

exports.replaceInPath = replaceInPath;
//# sourceMappingURL=index.js.map