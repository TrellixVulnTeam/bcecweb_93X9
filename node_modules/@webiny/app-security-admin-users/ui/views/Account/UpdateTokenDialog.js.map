{"version":3,"sources":["../../../../src/ui/views/Account/UpdateTokenDialog.tsx"],"names":["React","useState","Dialog","DialogButton","DialogActions","DialogCancel","DialogContent","DialogTitle","UPDATE_PAT","useSnackbar","useApolloClient","i18n","Input","Form","CircularProgress","t","ns","UpdateTokenDialog","open","onClose","token","loading","setLoading","showSnackbar","client","onSubmit","data","mutate","mutation","variables","id","name","queryResponse","error","security","updatePAT","message","action","Bind","form","submit"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport {\n    Dialog,\n    DialogButton,\n    DialogActions,\n    DialogCancel,\n    DialogContent,\n    DialogTitle\n} from \"@webiny/ui/Dialog\";\nimport { UPDATE_PAT } from \"./graphql\";\nimport { useSnackbar } from \"@webiny/app-admin/hooks/useSnackbar\";\nimport { useApolloClient } from \"@apollo/react-hooks\";\nimport { i18n } from \"@webiny/app/i18n\";\nimport { Input } from \"@webiny/ui/Input\";\nimport { Form } from \"@webiny/form\";\nimport { CircularProgress } from \"@webiny/ui/Progress\";\n\nconst t = i18n.ns(\"app-security/admin/roles/data-list\");\n\nexport const UpdateTokenDialog = ({ open, onClose, token }) => {\n    const [loading, setLoading] = useState(false);\n    const { showSnackbar } = useSnackbar();\n    const client = useApolloClient();\n\n    const onSubmit = async data => {\n        setLoading(true);\n        const queryResponse = await client.mutate({\n            mutation: UPDATE_PAT,\n            variables: {\n                id: token.id,\n                data: { name: data.name }\n            }\n        });\n        setLoading(false);\n\n        const { error } = queryResponse.data.security.updatePAT;\n        if (error) {\n            return showSnackbar(error.message, {\n                action: t`Close`\n            });\n        }\n\n        showSnackbar(t`Token updated successfully!`);\n        onClose();\n    };\n\n    if (!open) {\n        return null;\n    }\n\n    return (\n        <Dialog open={open} onClose={onClose} data-testid=\"update-personal-account-token-dialog\">\n            <Form data={token} onSubmit={onSubmit}>\n                {({ Bind, form }) => (\n                    <>\n                        {loading && <CircularProgress label={\"Updating token...\"} />}\n                        <DialogTitle>{t`Update Token`}</DialogTitle>\n                        <DialogContent>\n                            <Bind name={\"name\"}>\n                                <Input label={t`Token name`} />\n                            </Bind>\n                        </DialogContent>\n                        <DialogActions>\n                            <DialogCancel>Cancel</DialogCancel>\n                            <DialogButton\n                                data-testid={`AcceptUpdateToken-${token.id}`}\n                                onClick={form.submit}\n                            >\n                                {t`OK`}\n                            </DialogButton>\n                        </DialogActions>\n                    </>\n                )}\n            </Form>\n        </Dialog>\n    );\n};\n"],"file":"UpdateTokenDialog.js"}