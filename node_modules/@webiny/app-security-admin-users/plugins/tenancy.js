import { useEffect } from "react";
import { TenantPlugin } from "@webiny/app-tenancy/plugins/TenantPlugin";
import { useSecurity } from "@webiny/app-security";
import { useTenancy } from "@webiny/app-tenancy/hooks/useTenancy";
export default new TenantPlugin(function () {
  var _useTenancy = useTenancy(),
      tenant = _useTenancy.tenant,
      onChange = _useTenancy.onChange,
      setTenant = _useTenancy.setTenant;

  var _useSecurity = useSecurity(),
      identity = _useSecurity.identity;

  useEffect(function () {
    var off = onChange(function (tenant) {
      identity.setPermissions(tenant ? tenant.permissions : []);
    });

    if (!tenant) {
      setTenant(identity.access[0]);
    }

    return function () {
      return off();
    };
  }, []);
  return null;
});
//# sourceMappingURL=tenancy.js.map