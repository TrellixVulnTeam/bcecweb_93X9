{"version":3,"sources":["../../src/plugins/FileIndexTransformPlugin.ts"],"names":["FileIndexTransformPlugin","Plugin","constructor","params","_params","toIndex","file","fromIndex"],"mappings":";;;;;;;;;;;AAAA;;AAQO,MAAMA,wBAAN,SAAuCC,eAAvC,CAA8C;AAI1CC,EAAAA,WAAW,CAACC,MAAD,EAAyC;AACvD;AADuD;AAGvD,SAAKC,OAAL,GAAeD,MAAf;AACH;AAED;AACJ;AACA;;;AACwB,QAAPE,OAAO,CAACF,MAAD,EAAoD;AACpE,QAAI,CAAC,KAAKC,OAAL,CAAaC,OAAlB,EAA2B;AACvB,aAAOF,MAAM,CAACG,IAAd;AACH;;AACD,WAAO,KAAKF,OAAL,CAAaC,OAAb,CAAqBF,MAArB,CAAP;AACH;AACD;AACJ;AACA;AACA;;;AAC0B,QAATI,SAAS,CAACJ,MAAD,EAAsD;AACxE,QAAI,CAAC,KAAKC,OAAL,CAAaG,SAAlB,EAA6B;AACzB,aAAOJ,MAAM,CAACG,IAAd;AACH;;AACD,WAAO,KAAKF,OAAL,CAAaG,SAAb,CAAuBJ,MAAvB,CAAP;AACH;;AA5BgD;;;8BAAxCH,wB,UACqB,qB","sourcesContent":["import { Plugin } from \"@webiny/plugins\";\nimport { File } from \"@webiny/api-file-manager/types\";\nimport {\n    FileIndexTransformFromConfig,\n    FileIndexTransformPluginConfig,\n    FileIndexTransformToConfig\n} from \"~/types\";\n\nexport class FileIndexTransformPlugin extends Plugin {\n    public static readonly type = \"fm.ddbEs.file.index\";\n    private readonly _params: FileIndexTransformPluginConfig;\n\n    public constructor(params: FileIndexTransformPluginConfig) {\n        super();\n\n        this._params = params;\n    }\n\n    /**\n     * Be aware that you must return the whole file object.\n     */\n    public async toIndex(params: FileIndexTransformToConfig): Promise<File> {\n        if (!this._params.toIndex) {\n            return params.file;\n        }\n        return this._params.toIndex(params);\n    }\n    /**\n     * Be aware that you must return the whole file object.\n     * This method MUST reverse what ever toIndex method changed on the file object.\n     */\n    public async fromIndex(params: FileIndexTransformFromConfig): Promise<File> {\n        if (!this._params.fromIndex) {\n            return params.file;\n        }\n        return this._params.fromIndex(params);\n    }\n}\n"],"file":"FileIndexTransformPlugin.js"}