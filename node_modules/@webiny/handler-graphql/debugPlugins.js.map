{"version":3,"sources":["../src/debugPlugins.ts"],"names":["type","apply","context","debug","logs","method","args","push","result","console"],"mappings":";;;;;;;AAAA;;eAUe,MAAM,CACjB;AACIA,EAAAA,IAAI,EAAE,SADV;;AAEIC,EAAAA,KAAK,CAACC,OAAD,EAAU;AACXA,IAAAA,OAAO,CAACC,KAAR,GAAgBD,OAAO,CAACC,KAAR,IAAiB,EAAjC;AACAD,IAAAA,OAAO,CAACC,KAAR,CAAcC,IAAd,GAAqB,EAArB;AACA,4CAAiB,CAACC,MAAD,EAASC,IAAT,KAAkB;AAC/BJ,MAAAA,OAAO,CAACC,KAAR,CAAcC,IAAd,CAAmBG,IAAnB,CAAwB;AAAEF,QAAAA,MAAF;AAAUC,QAAAA;AAAV,OAAxB;AACH,KAFD;AAGH;;AARL,CADiB,EAWjB;AACIN,EAAAA,IAAI,EAAE,sBADV;;AAEIC,EAAAA,KAAK,CAAC;AAAEC,IAAAA;AAAF,GAAD,EAAc;AACf;AACAA,IAAAA,OAAO,CAACC,KAAR,CAAcC,IAAd,GAAqB,EAArB;AACH;;AALL,CAXiB,EAkBjB;AACIJ,EAAAA,IAAI,EAAE,qBADV;;AAEIC,EAAAA,KAAK,CAAC;AAAEO,IAAAA,MAAF;AAAUN,IAAAA;AAAV,GAAD,EAAsB;AACvBM,IAAAA,MAAM,CAAC,YAAD,CAAN,GAAuB;AAAEC,MAAAA,OAAO,EAAEP,OAAO,CAACC,KAAR,CAAcC,IAAd,IAAsB;AAAjC,KAAvB;AACH;;AAJL,CAlBiB,C","sourcesContent":["import { interceptConsole } from \"./interceptConsole\";\nimport { GraphQLAfterQueryPlugin, GraphQLBeforeQueryPlugin } from \"./types\";\nimport { ContextInterface, ContextPlugin } from \"@webiny/handler/types\";\n\ninterface DebugContext extends ContextInterface {\n    debug: {\n        logs?: { method: string; args: any }[];\n    };\n}\n\nexport default () => [\n    {\n        type: \"context\",\n        apply(context) {\n            context.debug = context.debug || {};\n            context.debug.logs = [];\n            interceptConsole((method, args) => {\n                context.debug.logs.push({ method, args });\n            });\n        }\n    } as ContextPlugin<DebugContext>,\n    {\n        type: \"graphql-before-query\",\n        apply({ context }) {\n            // Empty logs\n            context.debug.logs = [];\n        }\n    } as GraphQLBeforeQueryPlugin<DebugContext>,\n    {\n        type: \"graphql-after-query\",\n        apply({ result, context }) {\n            result[\"extensions\"] = { console: context.debug.logs || [] };\n        }\n    } as GraphQLAfterQueryPlugin<DebugContext>\n];\n"],"file":"debugPlugins.js"}