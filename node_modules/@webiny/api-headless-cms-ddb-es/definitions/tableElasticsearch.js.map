{"version":3,"sources":["../../src/definitions/tableElasticsearch.ts"],"names":["context","db","driver","documentClient","WebinyError","tableName","configurations","esDb","table","Table","name","partitionKey","sortKey","DocumentClient"],"mappings":";;;;;;;;;AACA;;AACA;;AACA;;eAEgBA,OAAD,IAAgC;AAC3C,QAAM;AAAEC,IAAAA;AAAF,MAASD,OAAf;AACA,QAAME,MAAM,GAAGD,EAAE,CAACC,MAAlB;;AACA,MAAI,CAACA,MAAD,IAAW,CAACA,MAAM,CAACC,cAAvB,EAAuC;AACnC,UAAM,IAAIC,cAAJ,CACD,2DADC,EAEF,uBAFE,CAAN;AAIH;;AACD,QAAMC,SAAS,GAAGC,wBAAeC,IAAf,GAAsBC,KAAxC;;AACA,MAAI,CAACH,SAAL,EAAgB;AACZ,UAAM,IAAID,cAAJ,CACD,mDADC,EAEF,kBAFE,CAAN;AAIH;;AACD,SAAO,IAAIK,sBAAJ,CAAU;AACbC,IAAAA,IAAI,EAAEL,SADO;AAEbM,IAAAA,YAAY,EAAE,IAFD;AAGbC,IAAAA,OAAO,EAAE,IAHI;AAIbC,IAAAA,cAAc,EAAEX,MAAM,CAACC;AAJV,GAAV,CAAP;AAMH,C","sourcesContent":["import { CmsContext } from \"@webiny/api-headless-cms/types\";\nimport WebinyError from \"@webiny/error\";\nimport configurations from \"../configurations\";\nimport { Table } from \"dynamodb-toolbox\";\n\nexport default (context: CmsContext): Table => {\n    const { db } = context;\n    const driver = db.driver as any;\n    if (!driver || !driver.documentClient) {\n        throw new WebinyError(\n            `Missing documentDriver on the context.db.driver property.`,\n            \"DOCUMENT_CLIENT_ERROR\"\n        );\n    }\n    const tableName = configurations.esDb().table;\n    if (!tableName) {\n        throw new WebinyError(\n            `Missing Elasticsearch table in the configuration.`,\n            \"TABLE_NAME_ERROR\"\n        );\n    }\n    return new Table({\n        name: tableName,\n        partitionKey: \"PK\",\n        sortKey: \"SK\",\n        DocumentClient: driver.documentClient\n    });\n};\n"],"file":"tableElasticsearch.js"}