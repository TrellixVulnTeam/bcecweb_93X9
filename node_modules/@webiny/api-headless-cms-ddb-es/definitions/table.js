"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _error = _interopRequireDefault(require("@webiny/error"));

var _configurations = _interopRequireDefault(require("../configurations"));

var _dynamodbToolbox = require("dynamodb-toolbox");

var _default = context => {
  const {
    db
  } = context;
  const driver = db.driver;

  if (!driver || !driver.documentClient) {
    throw new _error.default(`Missing documentDriver on the context.db.driver property.`, "DOCUMENT_CLIENT_ERROR");
  }

  const tableName = _configurations.default.db().table;

  if (!tableName && !db.table) {
    throw new _error.default(`Missing table on the context.db property.`, "TABLE_NAME_ERROR");
  }

  return new _dynamodbToolbox.Table({
    name: tableName || db.table,
    partitionKey: "PK",
    sortKey: "SK",
    DocumentClient: driver.documentClient
  });
};

exports.default = _default;
//# sourceMappingURL=table.js.map