{"version":3,"sources":["../../src/definitions/table.ts"],"names":["context","db","driver","documentClient","WebinyError","tableName","configurations","table","Table","name","partitionKey","sortKey","DocumentClient"],"mappings":";;;;;;;;;AACA;;AACA;;AACA;;eAEgBA,OAAD,IAAgC;AAC3C,QAAM;AAAEC,IAAAA;AAAF,MAASD,OAAf;AACA,QAAME,MAAM,GAAGD,EAAE,CAACC,MAAlB;;AACA,MAAI,CAACA,MAAD,IAAW,CAACA,MAAM,CAACC,cAAvB,EAAuC;AACnC,UAAM,IAAIC,cAAJ,CACD,2DADC,EAEF,uBAFE,CAAN;AAIH;;AACD,QAAMC,SAAS,GAAGC,wBAAeL,EAAf,GAAoBM,KAAtC;;AACA,MAAI,CAACF,SAAD,IAAc,CAACJ,EAAE,CAACM,KAAtB,EAA6B;AACzB,UAAM,IAAIH,cAAJ,CAAiB,2CAAjB,EAA6D,kBAA7D,CAAN;AACH;;AACD,SAAO,IAAII,sBAAJ,CAAU;AACbC,IAAAA,IAAI,EAAEJ,SAAS,IAAIJ,EAAE,CAACM,KADT;AAEbG,IAAAA,YAAY,EAAE,IAFD;AAGbC,IAAAA,OAAO,EAAE,IAHI;AAIbC,IAAAA,cAAc,EAAEV,MAAM,CAACC;AAJV,GAAV,CAAP;AAMH,C","sourcesContent":["import { CmsContext } from \"@webiny/api-headless-cms/types\";\nimport WebinyError from \"@webiny/error\";\nimport configurations from \"../configurations\";\nimport { Table } from \"dynamodb-toolbox\";\n\nexport default (context: CmsContext): Table => {\n    const { db } = context;\n    const driver = db.driver as any;\n    if (!driver || !driver.documentClient) {\n        throw new WebinyError(\n            `Missing documentDriver on the context.db.driver property.`,\n            \"DOCUMENT_CLIENT_ERROR\"\n        );\n    }\n    const tableName = configurations.db().table;\n    if (!tableName && !db.table) {\n        throw new WebinyError(`Missing table on the context.db property.`, \"TABLE_NAME_ERROR\");\n    }\n    return new Table({\n        name: tableName || db.table,\n        partitionKey: \"PK\",\n        sortKey: \"SK\",\n        DocumentClient: driver.documentClient\n    });\n};\n"],"file":"table.js"}