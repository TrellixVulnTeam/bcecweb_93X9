{"version":3,"sources":["../../src/helpers/operatorPluginsList.ts"],"names":["operatorPluginsList","context","plugins","byType","ElasticsearchQueryBuilderOperatorPlugin","type","reduce","plugin","operator","getOperator","WebinyError","name"],"mappings":";;;;;;;;;AAAA;;AAEA;;AAMO,MAAMA,mBAAmB,GAAIC,OAAD,IAA0C;AACzE,SAAOA,OAAO,CAACC,OAAR,CACFC,MADE,CAECC,iFAAwCC,IAFzC,EAIFC,MAJE,CAIK,CAACJ,OAAD,EAAUK,MAAV,KAAqB;AACzB,UAAMC,QAAQ,GAAGD,MAAM,CAACE,WAAP,EAAjB;;AACA,QAAIP,OAAO,CAACM,QAAD,CAAX,EAAuB;AACnB,YAAM,IAAIE,cAAJ,CACF,8EADE,EAEF,uBAFE,EAGF;AACIF,QAAAA,QAAQ,EAAEA,QADd;AAEIG,QAAAA,IAAI,EAAEJ,MAAM,CAACI,IAAP,IAAe;AAFzB,OAHE,CAAN;AAQH;;AACDT,IAAAA,OAAO,CAACM,QAAD,CAAP,GAAoBD,MAApB;AAEA,WAAOL,OAAP;AACH,GAnBE,EAmBA,EAnBA,CAAP;AAoBH,CArBM","sourcesContent":["import WebinyError from \"@webiny/error\";\nimport { CmsContext } from \"@webiny/api-headless-cms/types\";\nimport { ElasticsearchQueryBuilderOperatorPlugin } from \"@webiny/api-elasticsearch/plugins/definition/ElasticsearchQueryBuilderOperatorPlugin\";\n\ninterface OperatorPlugins {\n    [operator: string]: ElasticsearchQueryBuilderOperatorPlugin;\n}\n\nexport const operatorPluginsList = (context: CmsContext): OperatorPlugins => {\n    return context.plugins\n        .byType<ElasticsearchQueryBuilderOperatorPlugin>(\n            ElasticsearchQueryBuilderOperatorPlugin.type\n        )\n        .reduce((plugins, plugin) => {\n            const operator = plugin.getOperator();\n            if (plugins[operator]) {\n                throw new WebinyError(\n                    \"There is a ElasticsearchQueryBuilderOperatorPlugin defined for the operator.\",\n                    \"PLUGIN_ALREADY_EXISTS\",\n                    {\n                        operator: operator,\n                        name: plugin.name || \"unknown\"\n                    }\n                );\n            }\n            plugins[operator] = plugin;\n\n            return plugins;\n        }, {} as OperatorPlugins);\n};\n"],"file":"operatorPluginsList.js"}