{"version":3,"sources":["../../src/helpers/searchPluginsList.ts"],"names":["searchPluginsList","context","plugins","byType","reduce","plugin","fieldType","WebinyError","name"],"mappings":";;;;;;;;;AAAA;;AAQO,MAAMA,iBAAiB,GAAIC,OAAD,IAA+D;AAC5F,SAAOA,OAAO,CAACC,OAAR,CACFC,MADE,CAEC,+CAFD,EAIFC,MAJE,CAIK,CAACF,OAAD,EAAUG,MAAV,KAAqB;AACzB,QAAIH,OAAO,CAACG,MAAM,CAACC,SAAR,CAAX,EAA+B;AAC3B,YAAM,IAAIC,cAAJ,CACF,mFADE,EAEF,uBAFE,EAGF;AACID,QAAAA,SAAS,EAAED,MAAM,CAACC,SADtB;AAEIE,QAAAA,IAAI,EAAEH,MAAM,CAACG,IAAP,IAAe;AAFzB,OAHE,CAAN;AAQH;;AACDN,IAAAA,OAAO,CAACG,MAAM,CAACC,SAAR,CAAP,GAA4BD,MAA5B;AAEA,WAAOH,OAAP;AACH,GAlBE,EAkBA,EAlBA,CAAP;AAmBH,CApBM","sourcesContent":["import WebinyError from \"@webiny/error\";\nimport { ElasticsearchQueryBuilderValueSearchPlugin } from \"../types\";\nimport { CmsContext } from \"@webiny/api-headless-cms/types\";\n\nexport interface ElasticsearchQuerySearchValuePlugins {\n    [fieldType: string]: ElasticsearchQueryBuilderValueSearchPlugin;\n}\n\nexport const searchPluginsList = (context: CmsContext): ElasticsearchQuerySearchValuePlugins => {\n    return context.plugins\n        .byType<ElasticsearchQueryBuilderValueSearchPlugin>(\n            \"cms-elastic-search-query-builder-value-search\"\n        )\n        .reduce((plugins, plugin) => {\n            if (plugins[plugin.fieldType]) {\n                throw new WebinyError(\n                    \"There is a ElasticsearchQueryBuilderValueSearchPlugin defined for the field type.\",\n                    \"PLUGIN_ALREADY_EXISTS\",\n                    {\n                        fieldType: plugin.fieldType,\n                        name: plugin.name || \"unknown\"\n                    }\n                );\n            }\n            plugins[plugin.fieldType] = plugin;\n\n            return plugins;\n        }, {} as ElasticsearchQuerySearchValuePlugins);\n};\n"],"file":"searchPluginsList.js"}