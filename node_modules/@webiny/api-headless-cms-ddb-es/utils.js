"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.paginateBatch = exports.createBasePartitionKey = void 0;

var _error = _interopRequireDefault(require("@webiny/error"));

const createBasePartitionKey = ({
  tenancy,
  cms
}) => {
  const tenant = tenancy.getCurrentTenant();

  if (!tenant) {
    throw new _error.default("Tenant missing.", "TENANT_NOT_FOUND");
  }

  const locale = cms.getLocale();

  if (!locale) {
    throw new _error.default("Locale missing.", "LOCALE_NOT_FOUND");
  }

  return `T#${tenant.id}#L#${locale.code}#CMS`;
};

exports.createBasePartitionKey = createBasePartitionKey;

const paginateBatch = async (items, perPage, execute) => {
  const pages = Math.ceil(items.length / perPage);

  for (let i = 0; i < pages; i++) {
    await execute(items.slice(i * perPage, i * perPage + perPage));
  }
};

exports.paginateBatch = paginateBatch;
//# sourceMappingURL=utils.js.map