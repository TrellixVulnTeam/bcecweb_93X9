{"version":3,"sources":["../src/utils.ts"],"names":["createBasePartitionKey","tenancy","cms","tenant","getCurrentTenant","WebinyError","locale","getLocale","id","code","paginateBatch","items","perPage","execute","pages","Math","ceil","length","i","slice"],"mappings":";;;;;;;;;AAAA;;AAGO,MAAMA,sBAAsB,GAAG,CAAC;AAAEC,EAAAA,OAAF;AAAWC,EAAAA;AAAX,CAAD,KAA0C;AAC5E,QAAMC,MAAM,GAAGF,OAAO,CAACG,gBAAR,EAAf;;AACA,MAAI,CAACD,MAAL,EAAa;AACT,UAAM,IAAIE,cAAJ,CAAgB,iBAAhB,EAAmC,kBAAnC,CAAN;AACH;;AAED,QAAMC,MAAM,GAAGJ,GAAG,CAACK,SAAJ,EAAf;;AACA,MAAI,CAACD,MAAL,EAAa;AACT,UAAM,IAAID,cAAJ,CAAgB,iBAAhB,EAAmC,kBAAnC,CAAN;AACH;;AAED,SAAQ,KAAIF,MAAM,CAACK,EAAG,MAAKF,MAAM,CAACG,IAAK,MAAvC;AACH,CAZM;;;;AAcA,MAAMC,aAAa,GAAG,OACzBC,KADyB,EAEzBC,OAFyB,EAGzBC,OAHyB,KAIxB;AACD,QAAMC,KAAK,GAAGC,IAAI,CAACC,IAAL,CAAUL,KAAK,CAACM,MAAN,GAAeL,OAAzB,CAAd;;AACA,OAAK,IAAIM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,KAApB,EAA2BI,CAAC,EAA5B,EAAgC;AAC5B,UAAML,OAAO,CAACF,KAAK,CAACQ,KAAN,CAAYD,CAAC,GAAGN,OAAhB,EAAyBM,CAAC,GAAGN,OAAJ,GAAcA,OAAvC,CAAD,CAAb;AACH;AACJ,CATM","sourcesContent":["import WebinyError from \"@webiny/error\";\nimport { CmsContext } from \"@webiny/api-headless-cms/types\";\n\nexport const createBasePartitionKey = ({ tenancy, cms }: CmsContext): string => {\n    const tenant = tenancy.getCurrentTenant();\n    if (!tenant) {\n        throw new WebinyError(\"Tenant missing.\", \"TENANT_NOT_FOUND\");\n    }\n\n    const locale = cms.getLocale();\n    if (!locale) {\n        throw new WebinyError(\"Locale missing.\", \"LOCALE_NOT_FOUND\");\n    }\n\n    return `T#${tenant.id}#L#${locale.code}#CMS`;\n};\n\nexport const paginateBatch = async <T = Record<string, any>>(\n    items: T[],\n    perPage: number,\n    execute: (items: T[]) => Promise<any>\n) => {\n    const pages = Math.ceil(items.length / perPage);\n    for (let i = 0; i < pages; i++) {\n        await execute(items.slice(i * perPage, i * perPage + perPage));\n    }\n};\n"],"file":"utils.js"}