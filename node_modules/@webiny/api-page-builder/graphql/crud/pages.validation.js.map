{"version":3,"sources":["../../../src/graphql/crud/pages.validation.ts"],"names":["PagePlugin","beforeUpdate","inputData","existingPage","updateData","updateDataModel","UpdateDataModel","populate","validate","updateSettingsModel","UpdateSettingsModel","settings","Object","assign","toJSON"],"mappings":";;;;;;;AAAA;;AACA;;eAEe,IAAIA,sBAAJ,CAAe;AAC1B,QAAMC,YAAN,CAAmB;AAAEC,IAAAA,SAAF;AAAaC,IAAAA,YAAb;AAA2BC,IAAAA;AAA3B,GAAnB,EAA4D;AACxD,UAAMC,eAAe,GAAG,IAAIC,uBAAJ,GAAsBC,QAAtB,CAA+BL,SAA/B,CAAxB;AACA,UAAMG,eAAe,CAACG,QAAhB,EAAN;AAEA,UAAMC,mBAAmB,GAAG,IAAIC,2BAAJ,GACvBH,QADuB,CACdJ,YAAY,CAACQ,QADC,EAEvBJ,QAFuB,CAEdL,SAAS,CAACS,QAFI,CAA5B;AAIA,UAAMF,mBAAmB,CAACD,QAApB,EAAN;AAEAJ,IAAAA,UAAU,CAACO,QAAX,GAAsBC,MAAM,CAACC,MAAP,CAClB,EADkB,EAElBT,UAAU,CAACO,QAFO,EAGlB,MAAMF,mBAAmB,CAACK,MAApB,EAHY,CAAtB;AAKH;;AAhByB,CAAf,C","sourcesContent":["import { UpdateDataModel, UpdateSettingsModel } from \"./pages/models\";\nimport { PagePlugin } from \"~/plugins/PagePlugin\";\n\nexport default new PagePlugin({\n    async beforeUpdate({ inputData, existingPage, updateData }) {\n        const updateDataModel = new UpdateDataModel().populate(inputData);\n        await updateDataModel.validate();\n\n        const updateSettingsModel = new UpdateSettingsModel()\n            .populate(existingPage.settings)\n            .populate(inputData.settings);\n\n        await updateSettingsModel.validate();\n\n        updateData.settings = Object.assign(\n            {},\n            updateData.settings,\n            await updateSettingsModel.toJSON()\n        );\n    }\n});\n"],"file":"pages.validation.js"}