{"version":3,"sources":["../../src/utils/defaults.ts"],"names":["db","table","process","env","DB_TABLE_PAGE_BUILDER","keys","primary","unique","name","fields","es","context","tenant","tenancy","getCurrentTenant","Error","index","id","prefix","ELASTIC_SEARCH_INDEX_PREFIX"],"mappings":";;;;;;eAGe;AACXA,EAAAA,EAAE,EAAE;AACAC,IAAAA,KAAK,EAAEC,OAAO,CAACC,GAAR,CAAYC,qBADnB;AAEAC,IAAAA,IAAI,EAAE,CACF;AACIC,MAAAA,OAAO,EAAE,IADb;AAEIC,MAAAA,MAAM,EAAE,IAFZ;AAGIC,MAAAA,IAAI,EAAE,SAHV;AAIIC,MAAAA,MAAM,EAAE,CAAC;AAAED,QAAAA,IAAI,EAAE;AAAR,OAAD,EAAiB;AAAEA,QAAAA,IAAI,EAAE;AAAR,OAAjB;AAJZ,KADE;AAFN,GADO;;AAYXE,EAAAA,EAAE,CAACC,OAAD,EAAmC;AACjC,UAAMC,MAAM,GAAGD,OAAO,CAACE,OAAR,CAAgBC,gBAAhB,EAAf;;AACA,QAAI,CAACF,MAAL,EAAa;AACT,YAAM,IAAIG,KAAJ,CAAU,iBAAV,CAAN;AACH;;AAED,UAAMC,KAAK,GAAGJ,MAAM,CAACK,EAAP,GAAY,eAA1B;AACA,UAAMC,MAAM,GAAGhB,OAAO,CAACC,GAAR,CAAYgB,2BAA3B;;AACA,QAAID,MAAJ,EAAY;AACR,aAAO;AAAEF,QAAAA,KAAK,EAAEE,MAAM,GAAGF;AAAlB,OAAP;AACH;;AACD,WAAO;AAAEA,MAAAA;AAAF,KAAP;AACH;;AAxBU,C","sourcesContent":["import { TenancyContext } from \"@webiny/api-tenancy/types\";\nimport { Context } from \"@webiny/handler/types\";\n\nexport default {\n    db: {\n        table: process.env.DB_TABLE_PAGE_BUILDER,\n        keys: [\n            {\n                primary: true,\n                unique: true,\n                name: \"primary\",\n                fields: [{ name: \"PK\" }, { name: \"SK\" }]\n            }\n        ]\n    },\n    es(context: Context<TenancyContext>) {\n        const tenant = context.tenancy.getCurrentTenant();\n        if (!tenant) {\n            throw new Error(\"Tenant missing.\");\n        }\n\n        const index = tenant.id + \"-page-builder\";\n        const prefix = process.env.ELASTIC_SEARCH_INDEX_PREFIX;\n        if (prefix) {\n            return { index: prefix + index };\n        }\n        return { index };\n    }\n};\n"],"file":"defaults.js"}