{"version":3,"sources":["../../src/plugins/SettingsPlugin.ts"],"names":["SettingsPlugin","Plugin","constructor","config","_config","beforeUpdate","params","_execute","afterUpdate","callback"],"mappings":";;;;;;;;;;;AAAA;;AAwBO,MAAMA,cAAN,SAA6BC,eAA7B,CAAoC;AAIvCC,EAAAA,WAAW,CAACC,MAAD,EAAkB;AACzB;AADyB;AAEzB,SAAKC,OAAL,GAAeD,MAAM,IAAI,EAAzB;AACH;;AAEDE,EAAAA,YAAY,CAACC,MAAD,EAA6C;AACrD,WAAO,KAAKC,QAAL,CAAc,cAAd,EAA8BD,MAA9B,CAAP;AACH;;AAEDE,EAAAA,WAAW,CAACF,MAAD,EAA6C;AACpD,WAAO,KAAKC,QAAL,CAAc,aAAd,EAA6BD,MAA7B,CAAP;AACH;;AAEOC,EAAAA,QAAQ,CAACE,QAAD,EAAWH,MAAX,EAAmB;AAC/B,QAAI,OAAO,KAAKF,OAAL,CAAaK,QAAb,CAAP,KAAkC,UAAtC,EAAkD;AAC9C,aAAO,KAAKL,OAAL,CAAaK,QAAb,EAAuBH,MAAvB,CAAP;AACH;AACJ;;AArBsC;;;8BAA9BN,c,UACqB,a","sourcesContent":["import { Plugin } from \"@webiny/plugins\";\nimport { DefaultSettings, Page, PageSpecialType, PbContext } from \"~/types\";\n\nexport type CallbackFunction<TParams> = (params: TParams) => void | Promise<void>;\n\ntype PreviousSettings = DefaultSettings;\ntype NextSettings = DefaultSettings;\n\ninterface UpdateParams {\n    context: PbContext;\n    previousSettings: PreviousSettings;\n    nextSettings: NextSettings;\n    meta: {\n        diff: {\n            pages: Array<[PageSpecialType, string, string, Page]>;\n        };\n    };\n}\n\ninterface Config {\n    beforeUpdate?: CallbackFunction<UpdateParams>;\n    afterUpdate?: CallbackFunction<UpdateParams>;\n}\n\nexport class SettingsPlugin extends Plugin {\n    public static readonly type = \"pb.settings\";\n    private _config: Partial<Config>;\n\n    constructor(config?: Config) {\n        super();\n        this._config = config || {};\n    }\n\n    beforeUpdate(params: UpdateParams): void | Promise<void> {\n        return this._execute(\"beforeUpdate\", params);\n    }\n\n    afterUpdate(params: UpdateParams): void | Promise<void> {\n        return this._execute(\"afterUpdate\", params);\n    }\n\n    private _execute(callback, params) {\n        if (typeof this._config[callback] === \"function\") {\n            return this._config[callback](params);\n        }\n    }\n}\n"],"file":"SettingsPlugin.js"}