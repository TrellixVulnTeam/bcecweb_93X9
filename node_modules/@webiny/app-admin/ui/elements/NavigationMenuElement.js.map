{"version":3,"sources":["../../../src/ui/elements/NavigationMenuElement.tsx"],"names":["default","localStorage","UIElement","LOCAL_STORAGE_KEY","TAGS","NavigationMenuElement","id","config","useGrid","state","loadState","_isExpanded","includes","addSorter","a","b","hasTag","APP","UTILS","label","localeCompare","applyPlugins","element","runSorters","sorter","_sorters","push","icon","path","storeState","getView","refresh","splice","indexOf","collapseElement","expandElement","get","split","filter","Boolean","set","join","getLayout","sort"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { default as localStorage } from \"store\";\nimport { UIElement, UIElementConfig } from \"~/ui/UIElement\";\n\nexport interface NavigationMenuElementConfig extends UIElementConfig {\n    label: React.ReactNode;\n    icon?: React.ReactElement;\n    path?: string;\n    onClick?: Function;\n    testId?: string;\n    rel?: string;\n}\n\nconst LOCAL_STORAGE_KEY = \"webiny_apps_menu_sections\";\n\nexport enum TAGS {\n    UTILS = \"utils\",\n    APP = \"app\"\n}\n\nexport class NavigationMenuElement<\n    TConfig extends NavigationMenuElementConfig = NavigationMenuElementConfig\n> extends UIElement<TConfig> {\n    private _isExpanded = false;\n    private _sorters = [];\n\n    constructor(id: string, config: TConfig) {\n        super(id, config);\n\n        this.useGrid(false);\n\n        const state = this.loadState();\n        this._isExpanded = state.includes(this.id);\n\n        this.addSorter((a, b) => {\n            if (a.hasTag(TAGS.APP) && b.hasTag(TAGS.UTILS)) {\n                return -1;\n            }\n\n            if (a.hasTag(TAGS.UTILS) && b.hasTag(TAGS.APP)) {\n                return 1;\n            }\n\n            return a.config.label.localeCompare(b.config.label);\n        });\n\n        // Apply plugins\n        this.applyPlugins(NavigationMenuElement);\n    }\n\n    addElement<TElement extends UIElement = UIElement>(element: TElement): TElement {\n        super.addElement(element);\n        this.runSorters();\n        return element;\n    }\n\n    addSorter(sorter: Function) {\n        this._sorters.push(sorter);\n    }\n\n    get isExpanded() {\n        return this._isExpanded;\n    }\n\n    setIcon(icon: React.ReactElement) {\n        this.config.icon = icon;\n    }\n\n    setLabel(label: string) {\n        this.config.label = label;\n    }\n\n    setPath(path: string) {\n        this.config.path = path;\n    }\n\n    expandElement() {\n        this._isExpanded = true;\n        const state = this.loadState();\n        if (!state.includes(this.id)) {\n            state.push(this.id);\n        }\n        this.storeState(state);\n        this.getView().refresh();\n    }\n\n    collapseElement() {\n        this._isExpanded = false;\n        const state = this.loadState();\n        if (state.includes(this.id)) {\n            state.splice(state.indexOf(this.id), 1);\n        }\n        this.storeState(state);\n        this.getView().refresh();\n    }\n\n    toggleElement() {\n        if (this._isExpanded) {\n            this.collapseElement();\n        } else {\n            this.expandElement();\n        }\n    }\n\n    private loadState() {\n        return (localStorage.get(LOCAL_STORAGE_KEY) || \"\").split(\",\").filter(Boolean);\n    }\n\n    private storeState(state) {\n        localStorage.set(LOCAL_STORAGE_KEY, state.join(\",\"));\n    }\n\n    private runSorters() {\n        for (const sorter of this._sorters) {\n            this.getLayout().sort(sorter);\n        }\n    }\n}\n"],"file":"NavigationMenuElement.js"}