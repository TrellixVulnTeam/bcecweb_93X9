"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _apiSecurity = require("@webiny/api-security");

var _hasI18NContentPermission = _interopRequireDefault(require("../utils/hasI18NContentPermission"));

var _default = () => ({
  type: "context",

  apply(context) {
    context.i18nContent = {
      locale: context.i18n.getCurrentLocale("content"),
      getLocale: () => context.i18n.getCurrentLocale("content"),
      hasI18NContentPermission: async () => (0, _hasI18NContentPermission.default)(context),
      checkI18NContentPermission: async () => {
        if (await context.i18nContent.hasI18NContentPermission()) {
          return;
        }

        throw new _apiSecurity.NotAuthorizedError();
      }
    };
  }

});

exports.default = _default;
//# sourceMappingURL=index.js.map