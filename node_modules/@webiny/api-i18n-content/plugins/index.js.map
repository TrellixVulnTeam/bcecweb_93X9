{"version":3,"sources":["../../src/plugins/index.ts"],"names":["type","apply","context","i18nContent","locale","i18n","getCurrentLocale","getLocale","hasI18NContentPermission","checkI18NContentPermission","NotAuthorizedError"],"mappings":";;;;;;;;;AAIA;;AACA;;eAEe,OACV;AACGA,EAAAA,IAAI,EAAE,SADT;;AAEGC,EAAAA,KAAK,CAACC,OAAD,EAAU;AACXA,IAAAA,OAAO,CAACC,WAAR,GAAsB;AAClBC,MAAAA,MAAM,EAAEF,OAAO,CAACG,IAAR,CAAaC,gBAAb,CAA8B,SAA9B,CADU;AAElBC,MAAAA,SAAS,EAAE,MAAML,OAAO,CAACG,IAAR,CAAaC,gBAAb,CAA8B,SAA9B,CAFC;AAGlBE,MAAAA,wBAAwB,EAAE,YAAY,uCAAcN,OAAd,CAHpB;AAIlBO,MAAAA,0BAA0B,EAAE,YAAY;AACpC,YAAI,MAAMP,OAAO,CAACC,WAAR,CAAoBK,wBAApB,EAAV,EAA0D;AACtD;AACH;;AAED,cAAM,IAAIE,+BAAJ,EAAN;AACH;AAViB,KAAtB;AAYH;;AAfJ,CADU,C","sourcesContent":["import { ContextPlugin } from \"@webiny/handler/types\";\nimport { I18NContext } from \"@webiny/api-i18n/types\";\nimport { I18NContentContext } from \"../types\";\nimport { SecurityContext } from \"@webiny/api-security/types\";\nimport { NotAuthorizedError } from \"@webiny/api-security\";\nimport hasPermission from \"../utils/hasI18NContentPermission\";\n\nexport default () =>\n    ({\n        type: \"context\",\n        apply(context) {\n            context.i18nContent = {\n                locale: context.i18n.getCurrentLocale(\"content\"),\n                getLocale: () => context.i18n.getCurrentLocale(\"content\"),\n                hasI18NContentPermission: async () => hasPermission(context),\n                checkI18NContentPermission: async () => {\n                    if (await context.i18nContent.hasI18NContentPermission()) {\n                        return;\n                    }\n\n                    throw new NotAuthorizedError();\n                }\n            };\n        }\n    } as ContextPlugin<I18NContext, I18NContentContext, SecurityContext>);\n"],"file":"index.js"}