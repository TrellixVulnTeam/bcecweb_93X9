"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _context = _interopRequireDefault(require("./context"));

let localesCache;

var _default = options => {
  if (!options.localesFunction) {
    throw new Error(`I18N service plugins error - "localesFunction" not specified.`);
  }

  return [(0, _context.default)(), {
    name: "context-i18n-get-locales",
    type: "context-i18n-get-locales",

    async resolve({
      context
    }) {
      if (Array.isArray(localesCache)) {
        return localesCache;
      }

      localesCache = await context.handlerClient.invoke({
        name: options.localesFunction
      });
      return localesCache;
    }

  }];
};

exports.default = _default;
//# sourceMappingURL=service.js.map