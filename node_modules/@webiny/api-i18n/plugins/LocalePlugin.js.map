{"version":3,"sources":["../../src/plugins/LocalePlugin.ts"],"names":["LocalePlugin","Plugin","constructor","config","_config","beforeCreate","params","execute","afterCreate","beforeUpdate","afterUpdate","beforeDelete","afterDelete","event"],"mappings":";;;;;;;;;;;AAAA;;AA0FO,MAAMA,YAAN,SAA2BC,eAA3B,CAAkC;AAK9BC,EAAAA,WAAW,CAACC,MAAD,EAAiB;AAC/B;AAD+B;AAE/B,SAAKC,OAAL,GAAeD,MAAf;AACH;;AAEwB,QAAZE,YAAY,CAACC,MAAD,EAA4C;AACjE,UAAM,KAAKC,OAAL,CAAa,cAAb,EAA6BD,MAA7B,CAAN;AACH;;AAEuB,QAAXE,WAAW,CAACF,MAAD,EAA2C;AAC/D,UAAM,KAAKC,OAAL,CAAa,aAAb,EAA4BD,MAA5B,CAAN;AACH;;AAEwB,QAAZG,YAAY,CAACH,MAAD,EAA4C;AACjE,UAAM,KAAKC,OAAL,CAAa,cAAb,EAA6BD,MAA7B,CAAN;AACH;;AAEuB,QAAXI,WAAW,CAACJ,MAAD,EAA2C;AAC/D,UAAM,KAAKC,OAAL,CAAa,aAAb,EAA4BD,MAA5B,CAAN;AACH;;AAEwB,QAAZK,YAAY,CAACL,MAAD,EAA4C;AACjE,UAAM,KAAKC,OAAL,CAAa,cAAb,EAA6BD,MAA7B,CAAN;AACH;;AAEuB,QAAXM,WAAW,CAACN,MAAD,EAA2C;AAC/D,UAAM,KAAKC,OAAL,CAAa,aAAb,EAA4BD,MAA5B,CAAN;AACH;;AAEoB,QAAPC,OAAO,CAACM,KAAD,EAAgBP,MAAhB,EAA4C;AAC7D,QAAI,CAAC,KAAKF,OAAL,CAAaS,KAAb,CAAL,EAA0B;AACtB;AACH;;AACD,UAAM,KAAKT,OAAL,CAAaS,KAAb,EAAoBP,MAApB,CAAN;AACH;;AAvCoC;;;8BAA5BN,Y,UACqB,a","sourcesContent":["import { Plugin } from \"@webiny/plugins\";\nimport { I18NContext, I18NLocale } from \"~/types\";\n\n/**\n * Parameters for beforeCreate event.\n */\nexport interface BeforeCreateParams {\n    context: I18NContext;\n    /**\n     * Data to be inserted into the storage.\n     */\n    data: I18NLocale;\n}\n/**\n * Parameters for afterCreate event.\n */\nexport interface AfterCreateParams {\n    context: I18NContext;\n    /**\n     * Data that was inserted into the storage.\n     */\n    data: I18NLocale;\n    /**\n     * Result of the storage operations create method.\n     * Possibly changed something on the \"data\".\n     */\n    locale: I18NLocale;\n}\n/**\n * Parameters for beforeUpdate event.\n */\nexport interface BeforeUpdateParams {\n    context: I18NContext;\n    /**\n     * Original locale from the storage.\n     */\n    original: I18NLocale;\n    /**\n     * Data to be updated to the storage.\n     */\n    data: I18NLocale;\n}\n/**\n * Parameters for afterUpdate event.\n */\nexport interface AfterUpdateParams {\n    context: I18NContext;\n    /**\n     * Original locale from the storage.\n     */\n    original: I18NLocale;\n    /**\n     * Data that was updated in the storage.\n     */\n    data: I18NLocale;\n    /**\n     * Result of the storage operations update method.\n     * Possibly changed something on the \"data\".\n     */\n    locale: I18NLocale;\n}\n/**\n * Parameters for beforeDelete event.\n */\nexport interface BeforeDeleteParams {\n    context: I18NContext;\n    /**\n     * I18NLocale to be deleted from the storage.\n     */\n    locale: I18NLocale;\n}\n/**\n * Parameters for afterDelete event.\n */\nexport interface AfterDeleteParams {\n    context: I18NContext;\n    /**\n     * I18NLocale that was deleted from the storage.\n     */\n    locale: I18NLocale;\n}\n\ninterface Params {\n    beforeCreate?: (params: BeforeCreateParams) => Promise<void>;\n    afterCreate?: (params: AfterCreateParams) => Promise<void>;\n    beforeUpdate?: (params: BeforeUpdateParams) => Promise<void>;\n    afterUpdate?: (params: AfterUpdateParams) => Promise<void>;\n    beforeDelete?: (params: BeforeDeleteParams) => Promise<void>;\n    afterDelete?: (params: AfterDeleteParams) => Promise<void>;\n}\nexport class LocalePlugin extends Plugin {\n    public static readonly type = \"i18n.locale\";\n\n    private readonly _config: Params;\n\n    public constructor(config: Params) {\n        super();\n        this._config = config;\n    }\n\n    public async beforeCreate(params: BeforeCreateParams): Promise<void> {\n        await this.execute(\"beforeCreate\", params);\n    }\n\n    public async afterCreate(params: AfterCreateParams): Promise<void> {\n        await this.execute(\"afterCreate\", params);\n    }\n\n    public async beforeUpdate(params: BeforeUpdateParams): Promise<void> {\n        await this.execute(\"beforeUpdate\", params);\n    }\n\n    public async afterUpdate(params: AfterUpdateParams): Promise<void> {\n        await this.execute(\"afterUpdate\", params);\n    }\n\n    public async beforeDelete(params: BeforeDeleteParams): Promise<void> {\n        await this.execute(\"beforeDelete\", params);\n    }\n\n    public async afterDelete(params: AfterDeleteParams): Promise<void> {\n        await this.execute(\"afterDelete\", params);\n    }\n\n    private async execute(event: string, params: any): Promise<void> {\n        if (!this._config[event]) {\n            return;\n        }\n        await this._config[event](params);\n    }\n}\n"],"file":"LocalePlugin.js"}