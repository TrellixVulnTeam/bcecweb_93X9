{"version":3,"sources":["../../../../../../../src/admin/views/contentEntries/ContentEntry/header/requestReview/RequestReview.tsx"],"names":["React","useCallback","IconButton","Tooltip","useConfirmationDialog","i18n","useRevision","usePermission","useContentEntry","t","ns","RequestReview","entry","revision","requestReview","canRequestReview","title","message","showConfirmation","onClick","id","buttonEnabled","meta","status"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,QAAmC,OAAnC;AACA,SAASC,UAAT,QAA2B,mBAA3B;AACA,SAASC,OAAT,QAAwB,oBAAxB;AACA,SAASC,qBAAT,QAAsC,+CAAtC;AACA,SAASC,IAAT,QAAqB,kBAArB;;AAEA,SAASC,WAAT;AACA,OAAOC,aAAP;AACA,SAASC,eAAT;AAEA,IAAMC,CAAC,GAAGJ,IAAI,CAACK,EAAL,CAAQ,8DAAR,CAAV;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AACxB,yBAAkBH,eAAe,EAAjC;AAAA,MAAQI,KAAR,oBAAQA,KAAR;;AACA,qBAA0BN,WAAW,CAAC;AAAEO,IAAAA,QAAQ,EAAED;AAAZ,GAAD,CAArC;AAAA,MAAQE,aAAR,gBAAQA,aAAR;;AACA,uBAA6BP,aAAa,EAA1C;AAAA,MAAQQ,gBAAR,kBAAQA,gBAAR;;AAEA,8BAA6BX,qBAAqB,CAAC;AAC/CY,IAAAA,KAAK,EAAEP,CAAF,mFAD0C;AAE/CQ,IAAAA,OAAO,eACH,+BAAIR,CAAJ;AAH2C,GAAD,CAAlD;AAAA,MAAQS,gBAAR,yBAAQA,gBAAR;;AAOA,MAAMC,OAAO,GAAGlB,WAAW,CAAC,YAAM;AAC9BiB,IAAAA,gBAAgB,wEAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACPJ,aAAa,CAACF,KAAK,CAACQ,EAAP,CADN;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAD,GAAhB;AAGH,GAJ0B,EAIxB,CAACR,KAAK,CAACQ,EAAP,CAJwB,CAA3B;;AAMA,MAAI,CAACL,gBAAgB,CAAC,kBAAD,CAArB,EAA2C;AACvC,WAAO,IAAP;AACH;;AAED,MAAMM,aAAa,GACfT,KAAK,CAACQ,EAAN,KAAaR,KAAK,CAACU,IAAN,CAAWC,MAAX,KAAsB,OAAtB,IAAiCX,KAAK,CAACU,IAAN,CAAWC,MAAX,KAAsB,kBAApE,CADJ;AAGA,sBACI,oBAAC,KAAD,CAAO,QAAP,qBACI,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAEd,CAAF,qFAAhB;AAAqC,IAAA,SAAS,EAAE;AAAhD,kBACI,oBAAC,UAAD;AACI,IAAA,QAAQ,EAAE,CAACY,aADf;AAEI,IAAA,IAAI,eAAE,oBAAC,iBAAD,OAFV;AAGI,IAAA,OAAO,EAAEF;AAHb,IADJ,CADJ,CADJ;AAWH,CApCD;;AAsCA,eAAeR,aAAf","sourcesContent":["import React, { useCallback } from \"react\";\nimport { IconButton } from \"@webiny/ui/Button\";\nimport { Tooltip } from \"@webiny/ui/Tooltip\";\nimport { useConfirmationDialog } from \"@webiny/app-admin/hooks/useConfirmationDialog\";\nimport { i18n } from \"@webiny/app/i18n\";\nimport { ReactComponent as RequestReviewIcon } from \"./emoji_people-24px.svg\";\nimport { useRevision } from \"~/admin/views/contentEntries/ContentEntry/useRevision\";\nimport usePermission from \"~/admin/hooks/usePermission\";\nimport { useContentEntry } from \"~/admin/views/contentEntries/hooks/useContentEntry\";\n\nconst t = i18n.ns(\"app-headless-cms/admin/content-details/header/request-review\");\n\nconst RequestReview = () => {\n    const { entry } = useContentEntry();\n    const { requestReview } = useRevision({ revision: entry });\n    const { canRequestReview } = usePermission();\n\n    const { showConfirmation } = useConfirmationDialog({\n        title: t`Request Review`,\n        message: (\n            <p>{t`You are about to request a review of this content entry. Are you sure you want to continue?`}</p>\n        )\n    });\n\n    const onClick = useCallback(() => {\n        showConfirmation(async () => {\n            await requestReview(entry.id);\n        });\n    }, [entry.id]);\n\n    if (!canRequestReview(\"cms.contentEntry\")) {\n        return null;\n    }\n\n    const buttonEnabled =\n        entry.id && (entry.meta.status === \"draft\" || entry.meta.status === \"changesRequested\");\n\n    return (\n        <React.Fragment>\n            <Tooltip content={t`Request Review`} placement={\"top\"}>\n                <IconButton\n                    disabled={!buttonEnabled}\n                    icon={<RequestReviewIcon />}\n                    onClick={onClick}\n                />\n            </Tooltip>\n        </React.Fragment>\n    );\n};\n\nexport default RequestReview;\n"],"file":"RequestReview.js"}