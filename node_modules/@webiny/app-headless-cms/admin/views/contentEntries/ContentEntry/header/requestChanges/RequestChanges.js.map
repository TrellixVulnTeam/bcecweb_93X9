{"version":3,"sources":["../../../../../../../src/admin/views/contentEntries/ContentEntry/header/requestChanges/RequestChanges.tsx"],"names":["React","IconButton","Tooltip","useConfirmationDialog","i18n","usePermission","useRevision","useContentEntry","t","ns","RequestChanges","entry","revision","requestChanges","canRequestChange","title","message","showConfirmation","buttonEnabled","id","meta","status"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,mBAA3B;AACA,SAASC,OAAT,QAAwB,oBAAxB;AACA,SAASC,qBAAT,QAAsC,+CAAtC;AACA,SAASC,IAAT,QAAqB,kBAArB;;AAEA,OAAOC,aAAP;AACA,SAASC,WAAT;AACA,SAASC,eAAT;AAEA,IAAMC,CAAC,GAAGJ,IAAI,CAACK,EAAL,CAAQ,8DAAR,CAAV;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AACzB,yBAAkBH,eAAe,EAAjC;AAAA,MAAQI,KAAR,oBAAQA,KAAR;;AACA,qBAA2BL,WAAW,CAAC;AAAEM,IAAAA,QAAQ,EAAED;AAAZ,GAAD,CAAtC;AAAA,MAAQE,cAAR,gBAAQA,cAAR;;AACA,uBAA6BR,aAAa,EAA1C;AAAA,MAAQS,gBAAR,kBAAQA,gBAAR;;AAEA,8BAA6BX,qBAAqB,CAAC;AAC/CY,IAAAA,KAAK,EAAEP,CAAF,oFAD0C;AAE/CQ,IAAAA,OAAO,eACH,+BAAIR,CAAJ;AAH2C,GAAD,CAAlD;AAAA,MAAQS,gBAAR,yBAAQA,gBAAR;;AAOA,MAAI,CAACH,gBAAgB,CAAC,kBAAD,CAArB,EAA2C;AACvC,WAAO,IAAP;AACH;;AAED,MAAMI,aAAa,GACfP,KAAK,CAACQ,EAAN,KAAaR,KAAK,CAACS,IAAN,CAAWC,MAAX,KAAsB,OAAtB,IAAiCV,KAAK,CAACS,IAAN,CAAWC,MAAX,KAAsB,iBAApE,CADJ;AAGA,sBACI,oBAAC,KAAD,CAAO,QAAP,qBACI,oBAAC,OAAD;AAAS,IAAA,OAAO,EAAEb,CAAF,sFAAhB;AAAsC,IAAA,SAAS,EAAE;AAAjD,kBACI,oBAAC,UAAD;AACI,IAAA,QAAQ,EAAE,CAACU,aADf;AAEI,IAAA,IAAI,eAAE,oBAAC,kBAAD,OAFV;AAGI,IAAA,OAAO,EAAE;AAAA,aACLD,gBAAgB,wEAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACPJ,cAAc,CAACF,KAAK,CAACQ,EAAP,CADP;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAD,GADX;AAAA;AAHb,IADJ,CADJ,CADJ;AAeH,CAlCD;;AAoCA,eAAeT,cAAf","sourcesContent":["import React from \"react\";\nimport { IconButton } from \"@webiny/ui/Button\";\nimport { Tooltip } from \"@webiny/ui/Tooltip\";\nimport { useConfirmationDialog } from \"@webiny/app-admin/hooks/useConfirmationDialog\";\nimport { i18n } from \"@webiny/app/i18n\";\nimport { ReactComponent as RequestChangesIcon } from \"./rule-24px.svg\";\nimport usePermission from \"~/admin/hooks/usePermission\";\nimport { useRevision } from \"~/admin/views/contentEntries/ContentEntry/useRevision\";\nimport { useContentEntry } from \"~/admin/views/contentEntries/hooks/useContentEntry\";\n\nconst t = i18n.ns(\"app-headless-cms/admin/content-details/header/request-review\");\n\nconst RequestChanges = () => {\n    const { entry } = useContentEntry();\n    const { requestChanges } = useRevision({ revision: entry });\n    const { canRequestChange } = usePermission();\n\n    const { showConfirmation } = useConfirmationDialog({\n        title: t`Request Changes`,\n        message: (\n            <p>{t`You are about to request changes on this content entry. Are you sure you want to continue?`}</p>\n        )\n    });\n\n    if (!canRequestChange(\"cms.contentEntry\")) {\n        return null;\n    }\n\n    const buttonEnabled =\n        entry.id && (entry.meta.status === \"draft\" || entry.meta.status === \"reviewRequested\");\n\n    return (\n        <React.Fragment>\n            <Tooltip content={t`Request Changes`} placement={\"top\"}>\n                <IconButton\n                    disabled={!buttonEnabled}\n                    icon={<RequestChangesIcon />}\n                    onClick={() =>\n                        showConfirmation(async () => {\n                            await requestChanges(entry.id);\n                        })\n                    }\n                />\n            </Tooltip>\n        </React.Fragment>\n    );\n};\n\nexport default RequestChanges;\n"],"file":"RequestChanges.js"}