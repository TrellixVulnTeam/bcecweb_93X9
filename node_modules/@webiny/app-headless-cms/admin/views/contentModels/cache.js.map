{"version":3,"sources":["../../../../src/admin/views/contentModels/cache.ts"],"names":["dotProp","GQL","addModelToListCache","cache","model","readQuery","query","LIST_CONTENT_MODELS","listContentModels","newModelIndex","data","length","writeQuery","set","addModelToGroupCache","LIST_MENU_CONTENT_GROUPS_MODELS","groupsList","listContentModelGroups","groupIndex","findIndex","g","id","group","newGroupModelIndex","contentModels","removeModelFromListCache","modelIndex","m","modelId","delete","removeModelFromGroupCache"],"mappings":"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","sourcesContent":["import dotProp from \"dot-prop-immutable\";\nimport * as GQL from \"../../viewsGraphql\";\nimport { CmsEditorContentModel } from \"~/types\";\n\nexport const addModelToListCache = (cache, model: CmsEditorContentModel) => {\n    const { listContentModels } = cache.readQuery({ query: GQL.LIST_CONTENT_MODELS });\n    const newModelIndex = listContentModels.data.length;\n\n    cache.writeQuery({\n        query: GQL.LIST_CONTENT_MODELS,\n        data: {\n            listContentModels: dotProp.set(listContentModels, `data.${newModelIndex}`, model)\n        }\n    });\n};\n\nexport const addModelToGroupCache = (cache, model: CmsEditorContentModel) => {\n    const { listContentModelGroups: groupsList } = cache.readQuery({\n        query: GQL.LIST_MENU_CONTENT_GROUPS_MODELS\n    });\n\n    const groupIndex = groupsList.data.findIndex(g => g.id === model.group.id);\n    const newGroupModelIndex = groupsList.data[groupIndex].contentModels.length;\n\n    cache.writeQuery({\n        query: GQL.LIST_MENU_CONTENT_GROUPS_MODELS,\n        data: {\n            listContentModelGroups: dotProp.set(\n                groupsList,\n                `data.${groupIndex}.contentModels.${newGroupModelIndex}`,\n                model\n            )\n        }\n    });\n};\n\nexport const removeModelFromListCache = (cache, model: CmsEditorContentModel) => {\n    const { listContentModels } = cache.readQuery({ query: GQL.LIST_CONTENT_MODELS });\n    const modelIndex = listContentModels.data.findIndex(m => m.modelId === model.modelId);\n\n    cache.writeQuery({\n        query: GQL.LIST_CONTENT_MODELS,\n        data: {\n            listContentModels: dotProp.delete(listContentModels, `data.${modelIndex}`)\n        }\n    });\n};\n\nexport const removeModelFromGroupCache = (cache, model: CmsEditorContentModel) => {\n    const { listContentModelGroups: groupsList } = cache.readQuery({\n        query: GQL.LIST_MENU_CONTENT_GROUPS_MODELS\n    });\n\n    const groupIndex = groupsList.data.findIndex(g => g.id === model.group.id);\n    const modelIndex = groupsList.data[groupIndex].contentModels.findIndex(\n        m => m.modelId === model.modelId\n    );\n\n    cache.writeQuery({\n        query: GQL.LIST_MENU_CONTENT_GROUPS_MODELS,\n        data: {\n            listContentModelGroups: dotProp.delete(\n                groupsList,\n                `data.${groupIndex}.contentModels.${modelIndex}`\n            )\n        }\n    });\n};\n"],"file":"cache.js"}