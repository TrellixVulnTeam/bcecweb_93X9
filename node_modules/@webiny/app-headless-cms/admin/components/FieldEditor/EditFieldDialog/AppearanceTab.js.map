{"version":3,"sources":["../../../../../src/admin/components/FieldEditor/EditFieldDialog/AppearanceTab.tsx"],"names":["React","useEffect","plugins","Grid","Cell","i18n","Radio","RadioGroup","Typography","css","validation","t","ns","style","topLabel","marginBottom","noComponentsMessage","textAlign","padding","radioContainer","AppearanceTab","props","field","form","renderPlugins","byType","filter","item","renderer","canUse","currentlySelectedRenderAvailable","find","rendererName","name","setValue","console","log","fieldId","length","Bind","create","onChange","getValue","map","description"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { plugins } from \"@webiny/plugins\";\nimport { Grid, Cell } from \"@webiny/ui/Grid\";\nimport { CmsEditorFieldRendererPlugin } from \"~/types\";\nimport { i18n } from \"@webiny/app/i18n\";\nimport { Radio, RadioGroup } from \"@webiny/ui/Radio\";\nimport { Typography } from \"@webiny/ui/Typography\";\nimport { css } from \"emotion\";\nimport { validation } from \"@webiny/validation\";\n\nconst t = i18n.ns(\n    \"app-headless-cms/admin/views/components/editor/tabs/edit-field-dialog/appearance-tab\"\n);\n\nconst style = {\n    topLabel: css({\n        marginBottom: 25\n    }),\n    noComponentsMessage: css({\n        textAlign: \"center\",\n        padding: 25\n    }),\n    radioContainer: css({\n        marginBottom: 10\n    })\n};\n\nconst AppearanceTab = props => {\n    const { field, form } = props;\n\n    const renderPlugins = plugins\n        .byType<CmsEditorFieldRendererPlugin>(\"cms-editor-field-renderer\")\n        .filter(item => item.renderer.canUse({ field }));\n\n    useEffect(() => {\n        // If the currently selected render plugin is no longer available, select the first available one.\n        const currentlySelectedRenderAvailable = renderPlugins.find(\n            item => item.renderer.rendererName === field.renderer.name\n        );\n\n        if (!currentlySelectedRenderAvailable) {\n            if (renderPlugins[0]) {\n                form.setValue(\"renderer.name\", renderPlugins[0].renderer.rendererName);\n            } else {\n                console.log(`No renderers for field ${field.fieldId} found.`, field);\n            }\n        }\n    });\n\n    if (renderPlugins.length === 0) {\n        return (\n            <Grid>\n                <Cell\n                    span={12}\n                    className={style.noComponentsMessage}\n                >{t`There are no components that can render this field.`}</Cell>\n            </Grid>\n        );\n    }\n\n    const { Bind } = form;\n\n    return (\n        <Grid>\n            <Cell span={12}>\n                <div\n                    className={style.topLabel}\n                >{t`Choose a component that will render the field:`}</div>\n                <Bind name={\"renderer.name\"} validate={validation.create(\"required\")}>\n                    <RadioGroup>\n                        {({ onChange, getValue }) => (\n                            <React.Fragment>\n                                {renderPlugins.map(item => (\n                                    <div key={item.name} className={style.radioContainer}>\n                                        <Radio\n                                            value={getValue(item.renderer.rendererName)}\n                                            onChange={onChange(item.renderer.rendererName)}\n                                            label={\n                                                <>\n                                                    <div>{item.renderer.name}</div>\n                                                    <div>\n                                                        <Typography use={\"caption\"}>\n                                                            {item.renderer.description}\n                                                        </Typography>\n                                                    </div>\n                                                </>\n                                            }\n                                        />\n                                    </div>\n                                ))}\n                            </React.Fragment>\n                        )}\n                    </RadioGroup>\n                </Bind>\n            </Cell>\n        </Grid>\n    );\n};\n\nexport default AppearanceTab;\n"],"file":"AppearanceTab.js"}