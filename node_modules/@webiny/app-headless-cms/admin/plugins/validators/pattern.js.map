{"version":3,"sources":["../../../../src/admin/plugins/validators/pattern.ts"],"names":["plugins","type","name","validator","validate","value","settings","pattern","preset","patternPlugin","byType","find","item","RegExp","regex","flags","test"],"mappings":"AAAA,SAASA,OAAT,QAAwB,iBAAxB;AAGA,eAAe;AACXC,EAAAA,IAAI,EAAE,2BADK;AAEXC,EAAAA,IAAI,EAAE,mCAFK;AAGXC,EAAAA,SAAS,EAAE;AACPD,IAAAA,IAAI,EAAE,SADC;AAEPE,IAAAA,QAAQ,EAAE,kBAACC,KAAD,EAAQF,SAAR,EAAsB;AAC5B,UAAI,CAACE,KAAL,EAAY;AACR,eAAO,IAAP;AACH;;AAED,UAAQC,QAAR,GAAqBH,SAArB,CAAQG,QAAR;AAEA,UAAIC,OAAJ;;AACA,UAAID,QAAQ,CAACE,MAAT,KAAoB,QAAxB,EAAkC;AAC9BD,QAAAA,OAAO,GAAGD,QAAV;AACH,OAFD,MAEO;AACH,YAAMG,aAAa,GAAGT,OAAO,CACxBU,MADiB,CAEd,mCAFc,EAIjBC,IAJiB,CAIZ,UAAAC,IAAI;AAAA,iBAAIA,IAAI,CAACL,OAAL,CAAaL,IAAb,KAAsBI,QAAQ,CAACE,MAAnC;AAAA,SAJQ,CAAtB;;AAMA,YAAIC,aAAJ,EAAmB;AACfF,UAAAA,OAAO,GAAGE,aAAa,CAACF,OAAxB;AACH;AACJ;;AAED,UAAI,CAACA,OAAL,EAAc;AACV,eAAO,IAAP;AACH;;AAED,aAAO,IAAIM,MAAJ,CAAWN,OAAO,CAACO,KAAnB,EAA0BP,OAAO,CAACQ,KAAlC,EAAyCC,IAAzC,CAA8CX,KAA9C,CAAP;AACH;AA7BM;AAHA,CAAf","sourcesContent":["import { plugins } from \"@webiny/plugins\";\nimport { CmsModelFieldValidatorPatternPlugin } from \"~/types\";\n\nexport default {\n    type: \"cms-model-field-validator\",\n    name: \"cms-model-field-validator-pattern\",\n    validator: {\n        name: \"pattern\",\n        validate: (value, validator) => {\n            if (!value) {\n                return true;\n            }\n\n            const { settings } = validator;\n\n            let pattern;\n            if (settings.preset === \"custom\") {\n                pattern = settings;\n            } else {\n                const patternPlugin = plugins\n                    .byType<CmsModelFieldValidatorPatternPlugin>(\n                        \"cms-model-field-validator-pattern\"\n                    )\n                    .find(item => item.pattern.name === settings.preset);\n\n                if (patternPlugin) {\n                    pattern = patternPlugin.pattern;\n                }\n            }\n\n            if (!pattern) {\n                return true;\n            }\n\n            return new RegExp(pattern.regex, pattern.flags).test(value);\n        }\n    }\n};\n"],"file":"pattern.js"}