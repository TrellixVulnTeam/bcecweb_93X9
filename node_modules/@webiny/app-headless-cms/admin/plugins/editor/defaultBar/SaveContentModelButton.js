import _taggedTemplateLiteral from "@babel/runtime/helpers/taggedTemplateLiteral";
import _asyncToGenerator from "@babel/runtime/helpers/asyncToGenerator";
import _slicedToArray from "@babel/runtime/helpers/slicedToArray";

var _templateObject, _templateObject2;

import _regeneratorRuntime from "@babel/runtime/regenerator";
import React, { useState } from "react";
import { ButtonPrimary } from "@webiny/ui/Button";
import { useSnackbar } from "@webiny/app-admin/hooks/useSnackbar";
import { i18n } from "@webiny/app/i18n";
import { useContentModelEditor } from "../../../components/ContentModelEditor/useContentModelEditor";
var t = i18n.namespace("app-headless-cms/admin/editor/top-bar/save-button");

var SaveContentModelButton = function SaveContentModelButton() {
  var _useContentModelEdito = useContentModelEditor(),
      saveContentModel = _useContentModelEdito.saveContentModel;

  var _useState = useState(false),
      _useState2 = _slicedToArray(_useState, 2),
      loading = _useState2[0],
      setLoading = _useState2[1];

  var _useSnackbar = useSnackbar(),
      showSnackbar = _useSnackbar.showSnackbar;

  return /*#__PURE__*/React.createElement(ButtonPrimary, {
    disabled: loading,
    onClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {
      var response;
      return _regeneratorRuntime.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              setLoading(true);
              _context.next = 3;
              return saveContentModel();

            case 3:
              response = _context.sent;
              setLoading(false);

              if (!response.error) {
                _context.next = 7;
                break;
              }

              return _context.abrupt("return", showSnackbar(response.error.message));

            case 7:
              showSnackbar(t(_templateObject || (_templateObject = _taggedTemplateLiteral(["Your content model was saved successfully!"]))));

            case 8:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    }))
  }, t(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral(["Save"]))));
};

export default SaveContentModelButton;
//# sourceMappingURL=SaveContentModelButton.js.map