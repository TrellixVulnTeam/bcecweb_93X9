{"version":3,"sources":["../../../../../../src/admin/plugins/editor/defaultBar/Name/Name.tsx"],"names":["React","useCallback","useState","Input","Tooltip","useHotkeys","FormName","formNameWrapper","NameInputWrapper","NameWrapper","i18n","useContentModelEditor","t","namespace","Name","data","setData","localName","setLocalName","editingEnabled","setEditing","cancelChanges","startEditing","name","saveName","e","preventDefault","zIndex","keys","disabled","esc","enter","autoFocus","window","Cypress"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,QAA7B,QAA6C,OAA7C;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,SAASC,OAAT,QAAwB,oBAAxB;AACA,SAASC,UAAT,QAA2B,eAA3B;AACA,SAASC,QAAT,EAAmBC,eAAnB,EAAoCC,gBAApC,EAAsDC,WAAtD;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,qBAAT;AAEA,IAAMC,CAAC,GAAGF,IAAI,CAACG,SAAL,CAAe,yBAAf,CAAV;AAQA,OAAO,IAAMC,IAAI,GAAG,SAAPA,IAAO,GAAM;AACtB,8BAA0BH,qBAAqB,EAA/C;AAAA,MAAQI,IAAR,yBAAQA,IAAR;AAAA,MAAcC,OAAd,yBAAcA,OAAd;;AACA,kBAAkCd,QAAQ,CAAC,IAAD,CAA1C;AAAA;AAAA,MAAOe,SAAP;AAAA,MAAkBC,YAAlB;;AACA,mBAAqChB,QAAQ,CAAC,KAAD,CAA7C;AAAA;AAAA,MAAOiB,cAAP;AAAA,MAAuBC,UAAvB;;AAEA,MAAMC,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AACxBD,IAAAA,UAAU,CAAC,KAAD,CAAV;AACH,GAFD;;AAIA,MAAME,YAAY,GAAG,SAAfA,YAAe,GAAM;AACvBJ,IAAAA,YAAY,CAACH,IAAI,CAACQ,IAAN,CAAZ;AACAH,IAAAA,UAAU,CAAC,IAAD,CAAV;AACH,GAHD;;AAKA,MAAMI,QAAQ,GAAGvB,WAAW,CACxB,UAAAwB,CAAC,EAAI;AACDA,IAAAA,CAAC,CAACC,cAAF;AACAV,IAAAA,OAAO,CAAC,UAAAD,IAAI,EAAI;AACZA,MAAAA,IAAI,CAACQ,IAAL,GAAYN,SAAZ;AACA,aAAOF,IAAP;AACH,KAHM,CAAP;AAIAK,IAAAA,UAAU,CAAC,KAAD,CAAV;AACH,GARuB,EASxB,CAACH,SAAD,CATwB,CAA5B;AAYAZ,EAAAA,UAAU,CAAC;AACPsB,IAAAA,MAAM,EAAE,GADD;AAEPC,IAAAA,IAAI,EAAE;AACF,uBAAiBN;AADf;AAFC,GAAD,CAAV;AAOAjB,EAAAA,UAAU,CAAC;AACPsB,IAAAA,MAAM,EAAE,GADD;AAEPE,IAAAA,QAAQ,EAAE,CAACV,cAFJ;AAGPS,IAAAA,IAAI,EAAE;AACFE,MAAAA,GAAG,EAAE,aAAAL,CAAC,EAAI;AACNA,QAAAA,CAAC,CAACC,cAAF;AACAL,QAAAA,aAAa;AAChB,OAJC;AAKFU,MAAAA,KAAK,EAAEP;AALL;AAHC,GAAD,CAAV,CAjCsB,CA6CtB;AACA;;AACA,MAAMQ,SAAS,GAAG,CAACC,MAAM,CAACC,OAA1B;AAEA,SAAOf,cAAc,gBACjB,oBAAC,gBAAD,qBACI,oBAAC,KAAD;AACI,IAAA,SAAS,EAAEa,SADf;AAEI,IAAA,SAAS,MAFb;AAGI,IAAA,KAAK,EAAEf,SAHX;AAII,IAAA,QAAQ,EAAEC,YAJd;AAKI,IAAA,MAAM,EAAEM;AALZ,IADJ,CADiB,gBAWjB,oBAAC,WAAD,qBACI,oBAAC,OAAD;AACI,IAAA,SAAS,EAAEjB,eADf;AAEI,IAAA,SAAS,EAAE,QAFf;AAGI,IAAA,OAAO,eAAE,kCAAOK,CAAP;AAHb,kBAKI,oBAAC,QAAD;AAAU,mBAAY,wBAAtB;AAA+C,IAAA,OAAO,EAAEU;AAAxD,KACKP,IAAI,CAACQ,IADV,CALJ,CADJ,CAXJ;AAuBH,CAxEM","sourcesContent":["import React, { useCallback, useState } from \"react\";\nimport { Input } from \"@webiny/ui/Input\";\nimport { Tooltip } from \"@webiny/ui/Tooltip\";\nimport { useHotkeys } from \"react-hotkeyz\";\nimport { FormName, formNameWrapper, NameInputWrapper, NameWrapper } from \"./NameStyled\";\nimport { i18n } from \"@webiny/app/i18n\";\nimport { useContentModelEditor } from \"~/admin/components/ContentModelEditor/useContentModelEditor\";\n\nconst t = i18n.namespace(\"ContentModelEditor.Name\");\n\ndeclare global {\n    interface Window {\n        Cypress: any;\n    }\n}\n\nexport const Name = () => {\n    const { data, setData } = useContentModelEditor();\n    const [localName, setLocalName] = useState(null);\n    const [editingEnabled, setEditing] = useState(false);\n\n    const cancelChanges = () => {\n        setEditing(false);\n    };\n\n    const startEditing = () => {\n        setLocalName(data.name);\n        setEditing(true);\n    };\n\n    const saveName = useCallback(\n        e => {\n            e.preventDefault();\n            setData(data => {\n                data.name = localName;\n                return data;\n            });\n            setEditing(false);\n        },\n        [localName]\n    );\n\n    useHotkeys({\n        zIndex: 100,\n        keys: {\n            \"alt+cmd+enter\": startEditing\n        }\n    });\n\n    useHotkeys({\n        zIndex: 101,\n        disabled: !editingEnabled,\n        keys: {\n            esc: e => {\n                e.preventDefault();\n                cancelChanges();\n            },\n            enter: saveName\n        }\n    });\n\n    // Disable autoFocus because for some reason, blur event would automatically be triggered when clicking\n    // on the page title when doing Cypress testing. Not sure if this is RMWC or Cypress related issue.\n    const autoFocus = !window.Cypress;\n\n    return editingEnabled ? (\n        <NameInputWrapper>\n            <Input\n                autoFocus={autoFocus}\n                fullwidth\n                value={localName}\n                onChange={setLocalName}\n                onBlur={saveName}\n            />\n        </NameInputWrapper>\n    ) : (\n        <NameWrapper>\n            <Tooltip\n                className={formNameWrapper}\n                placement={\"bottom\"}\n                content={<span>{t`rename`}</span>}\n            >\n                <FormName data-testid=\"cms-editor-model-title\" onClick={startEditing}>\n                    {data.name}\n                </FormName>\n            </Tooltip>\n        </NameWrapper>\n    );\n};\n"],"file":"Name.js"}