{"version":3,"sources":["../../../../../src/admin/plugins/fieldRenderers/file/File.tsx"],"names":["React","useCallback","Image","Ui","createRenderImagePreview","imageExtensions","imagePreviewProps","transform","width","style","height","objectFit","File","props","url","onRemove","placeholder","styles","showFileManager","isImage","some","extension","includes","getImageSrc","fileIcon","defaultRenderImagePreview","renderImageProps","renderImagePreview","value","src","defaultProps","validation","isValid"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,WAAhB,QAAmC,OAAnC;AACA,SAASC,KAAT,QAAsB,wBAAtB;AACA,OAAO,KAAKC,EAAZ,MAAoB,wBAApB;AACA,SAASC,wBAAT,EAAmCC,eAAnC;;AAGA,IAAMC,iBAAiB,GAAG;AACtBC,EAAAA,SAAS,EAAE;AAAEC,IAAAA,KAAK,EAAE;AAAT,GADW;AAEtBC,EAAAA,KAAK,EAAE;AAAED,IAAAA,KAAK,EAAE,MAAT;AAAiBE,IAAAA,MAAM,EAAE,GAAzB;AAA8BC,IAAAA,SAAS,EAAE;AAAzC;AAFe,CAA1B;;AAKA,SAASC,IAAT,CAAcC,KAAd,EAAqB;AACjB,MAAQC,GAAR,GAAgED,KAAhE,CAAQC,GAAR;AAAA,MAAaC,QAAb,GAAgEF,KAAhE,CAAaE,QAAb;AAAA,MAAuBC,WAAvB,GAAgEH,KAAhE,CAAuBG,WAAvB;AAAA,MAAoCC,MAApC,GAAgEJ,KAAhE,CAAoCI,MAApC;AAAA,MAA4CC,eAA5C,GAAgEL,KAAhE,CAA4CK,eAA5C;AAEA,MAAMC,OAAO,GAAGlB,WAAW,CAAC,UAAAa,GAAG,EAAI;AAC/B,WAAOT,eAAe,CAACe,IAAhB,CAAqB,UAAAC,SAAS;AAAA,aAAIP,GAAG,CAACQ,QAAJ,CAAaD,SAAb,CAAJ;AAAA,KAA9B,CAAP;AACH,GAF0B,EAExB,EAFwB,CAA3B;AAIA,MAAME,WAAW,GAAGtB,WAAW,CAAC,UAAAa,GAAG,EAAI;AACnC,QAAIA,GAAG,IAAIK,OAAO,CAACL,GAAD,CAAlB,EAAyB;AACrB,aAAOA,GAAP;AACH;;AACD,WAAOU,QAAP;AACH,GAL8B,EAK5B,EAL4B,CAA/B;;AAOA,MAAMC,yBAAyB,GAAG,SAA5BA,yBAA4B,CAAAC,gBAAgB;AAAA,wBAC9C,oBAAC,KAAD,oBAAWA,gBAAX,EAAiCpB,iBAAjC,EAD8C;AAAA,GAAlD;;AAIA,MAAMqB,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAb,GAAG,EAAI;AAC9B,QAAIA,GAAG,IAAI,CAACK,OAAO,CAACL,GAAD,CAAnB,EAA0B;AACtB,aAAOV,wBAAwB,CAAC;AAAEwB,QAAAA,KAAK,EAAEd,GAAT;AAAcR,QAAAA,iBAAiB,EAAjBA;AAAd,OAAD,CAA/B;AACH;;AAED,WAAOmB,yBAAP;AACH,GAND;;AAQA,sBACI,oBAAC,EAAD,CAAI,KAAJ;AACI,IAAA,kBAAkB,EAAEE,kBAAkB,CAACb,GAAD,CAD1C;AAEI,IAAA,KAAK,EAAEG,MAFX;AAGI,IAAA,KAAK,EAAEH,GAAG,GAAG;AAAEe,MAAAA,GAAG,EAAEN,WAAW,CAACT,GAAD;AAAlB,KAAH,GAA+B,IAH7C;AAII,IAAA,WAAW,EAAEI,eAJjB;AAKI,IAAA,WAAW,EAAEH,QALjB;AAMI,IAAA,WAAW,EAAEC,WANjB;AAOI,IAAA,cAAc,EAAE;AAAEN,MAAAA,MAAM,EAAE;AAAV;AAPpB,IADJ;AAWH;;AAEDE,IAAI,CAACkB,YAAL,GAAoB;AAChBC,EAAAA,UAAU,EAAE;AAAEC,IAAAA,OAAO,EAAE;AAAX,GADI;AAEhBf,EAAAA,MAAM,EAAE;AAAET,IAAAA,KAAK,EAAE,MAAT;AAAiBE,IAAAA,MAAM,EAAE;AAAzB;AAFQ,CAApB;AAKA,eAAeE,IAAf","sourcesContent":["import React, { useCallback } from \"react\";\nimport { Image } from \"@webiny/app/components\";\nimport * as Ui from \"@webiny/ui/ImageUpload\";\nimport { createRenderImagePreview, imageExtensions } from \"./utils\";\nimport fileIcon from \"../../fields/icons/round_insert_drive_file-24px.svg\";\n\nconst imagePreviewProps = {\n    transform: { width: 300 },\n    style: { width: \"100%\", height: 232, objectFit: \"cover\" }\n};\n\nfunction File(props) {\n    const { url, onRemove, placeholder, styles, showFileManager } = props;\n\n    const isImage = useCallback(url => {\n        return imageExtensions.some(extension => url.includes(extension));\n    }, []);\n\n    const getImageSrc = useCallback(url => {\n        if (url && isImage(url)) {\n            return url;\n        }\n        return fileIcon;\n    }, []);\n\n    const defaultRenderImagePreview = renderImageProps => (\n        <Image {...renderImageProps} {...imagePreviewProps} />\n    );\n\n    const renderImagePreview = url => {\n        if (url && !isImage(url)) {\n            return createRenderImagePreview({ value: url, imagePreviewProps });\n        }\n\n        return defaultRenderImagePreview;\n    };\n\n    return (\n        <Ui.Image\n            renderImagePreview={renderImagePreview(url)}\n            style={styles}\n            value={url ? { src: getImageSrc(url) } : null}\n            uploadImage={showFileManager}\n            removeImage={onRemove}\n            placeholder={placeholder}\n            containerStyle={{ height: \"auto\" }}\n        />\n    );\n}\n\nFile.defaultProps = {\n    validation: { isValid: null },\n    styles: { width: \"100%\", height: \"auto\" }\n};\n\nexport default File;\n"],"file":"File.js"}