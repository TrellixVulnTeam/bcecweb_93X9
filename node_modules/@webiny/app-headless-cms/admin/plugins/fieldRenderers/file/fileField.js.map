{"version":3,"sources":["../../../../../src/admin/plugins/fieldRenderers/file/fileField.tsx"],"names":["React","i18n","Cell","Grid","FileManager","File","t","ns","plugin","type","name","renderer","rendererName","description","canUse","field","multipleValues","render","getBind","Label","Bind","label","value","onChange","showFileManager","selectFile","newFile","src"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,IAAT,EAAeC,IAAf,QAA2B,iBAA3B;AACA,SAASC,WAAT,QAA4B,8BAA5B;AACA,OAAOC,IAAP;AAEA,IAAMC,CAAC,GAAGL,IAAI,CAACM,EAAL,CAAQ,oCAAR,CAAV;AAEA,IAAMC,MAAoC,GAAG;AACzCC,EAAAA,IAAI,EAAE,2BADmC;AAEzCC,EAAAA,IAAI,EAAE,gCAFmC;AAGzCC,EAAAA,QAAQ,EAAE;AACNC,IAAAA,YAAY,EAAE,YADR;AAENF,IAAAA,IAAI,EAAEJ,CAAF,+EAFE;AAGNO,IAAAA,WAAW,EAAEP,CAAF,wHAHL;AAINQ,IAAAA,MAJM,wBAIY;AAAA,UAATC,KAAS,QAATA,KAAS;AACd,aAAOA,KAAK,CAACN,IAAN,KAAe,MAAf,IAAyB,CAACM,KAAK,CAACC,cAAvC;AACH,KANK;AAONC,IAAAA,MAPM,yBAO4B;AAAA,UAAzBF,KAAyB,SAAzBA,KAAyB;AAAA,UAAlBG,OAAkB,SAAlBA,OAAkB;AAAA,UAATC,KAAS,SAATA,KAAS;AAC9B,UAAMC,IAAI,GAAGF,OAAO,EAApB;AAEA,0BACI,oBAAC,IAAD,qBACI,oBAAC,IAAD;AAAM,QAAA,IAAI,EAAE;AAAZ,sBACI,oBAAC,KAAD,QAAQH,KAAK,CAACM,KAAd,CADJ,eAEI,oBAAC,IAAD,QACK;AAAA,YAAGC,KAAH,SAAGA,KAAH;AAAA,YAAUC,QAAV,SAAUA,QAAV;AAAA,4BACG,oBAAC,WAAD;AAAa,UAAA,QAAQ,EAAE;AAAvB,WACK,iBAAyB;AAAA,cAAtBC,eAAsB,SAAtBA,eAAsB;;AACtB,cAAMC,UAAU,GAAG,SAAbA,UAAa,GAAM;AACrBD,YAAAA,eAAe,CAAC,UAAAE,OAAO,EAAI;AACvB,kBAAIA,OAAO,KAAK,IAAhB,EAAsB;AAClBH,gBAAAA,QAAQ,CAACG,OAAO,CAACC,GAAT,CAAR;AACH;AACJ,aAJc,CAAf;AAKH,WAND;;AAQA,8BACI,oBAAC,IAAD;AACI,YAAA,GAAG,EAAEL,KADT;AAEI,YAAA,QAAQ,EAAE;AAAA,qBAAMC,QAAQ,CAAC,IAAD,CAAd;AAAA,aAFd;AAGI,YAAA,eAAe,EAAEE,UAHrB;AAII,YAAA,WAAW,EAAEnB,CAAF;AAJf,YADJ;AAQH,SAlBL,CADH;AAAA,OADL,CAFJ,CADJ,CADJ;AA+BH;AAzCK;AAH+B,CAA7C;AAgDA,eAAeE,MAAf","sourcesContent":["import React from \"react\";\nimport { CmsEditorFieldRendererPlugin } from \"~/types\";\nimport { i18n } from \"@webiny/app/i18n\";\nimport { Cell, Grid } from \"@webiny/ui/Grid\";\nimport { FileManager } from \"@webiny/app-admin/components\";\nimport File from \"./File\";\n\nconst t = i18n.ns(\"app-headless-cms/admin/fields/file\");\n\nconst plugin: CmsEditorFieldRendererPlugin = {\n    type: \"cms-editor-field-renderer\",\n    name: \"cms-editor-field-renderer-file\",\n    renderer: {\n        rendererName: \"file-input\",\n        name: t`File Input`,\n        description: t`Enables selecting a single file via File Manager.`,\n        canUse({ field }) {\n            return field.type === \"file\" && !field.multipleValues;\n        },\n        render({ field, getBind, Label }) {\n            const Bind = getBind();\n\n            return (\n                <Grid>\n                    <Cell span={12}>\n                        <Label>{field.label}</Label>\n                        <Bind>\n                            {({ value, onChange }) => (\n                                <FileManager multiple={false}>\n                                    {({ showFileManager }) => {\n                                        const selectFile = () => {\n                                            showFileManager(newFile => {\n                                                if (newFile !== null) {\n                                                    onChange(newFile.src);\n                                                }\n                                            });\n                                        };\n\n                                        return (\n                                            <File\n                                                url={value}\n                                                onRemove={() => onChange(null)}\n                                                showFileManager={selectFile}\n                                                placeholder={t`Select a file\"`}\n                                            />\n                                        );\n                                    }}\n                                </FileManager>\n                            )}\n                        </Bind>\n                    </Cell>\n                </Grid>\n            );\n        }\n    }\n};\n\nexport default plugin;\n"],"file":"fileField.js"}