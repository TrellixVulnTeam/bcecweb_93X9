{"version":3,"sources":["../../../../../src/admin/plugins/permissionRenderer/components/ContentModelGroupPermission.tsx"],"names":["React","useCallback","useEffect","Grid","Cell","Select","i18n","Elevation","Typography","PermissionSelector","PermissionSelectorWrapper","useCmsData","t","ns","ContentModelGroupPermission","Bind","data","entity","title","locales","setValue","form","modelsGroups","getItems","code","endpoints","length","onChangeFns","disabledPrimaryActions","undefined","includes","marginTop","padding","paddingBottom"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect } from \"react\";\nimport { Grid, Cell } from \"@webiny/ui/Grid\";\nimport { Select } from \"@webiny/ui/Select\";\nimport { i18n } from \"@webiny/app/i18n\";\nimport { Elevation } from \"@webiny/ui/Elevation\";\nimport { Typography } from \"@webiny/ui/Typography\";\nimport { PermissionSelector, PermissionSelectorWrapper } from \"./PermissionSelector\";\nimport { useCmsData } from \"./useCmsData\";\n\nconst t = i18n.ns(\"app-headless-cms/admin/plugins/permissionRenderer\");\n\nconst ContentModelGroupPermission = ({ Bind, data, entity, title, locales, setValue, form }) => {\n    const modelsGroups = useCmsData(locales);\n\n    const getItems = useCallback(\n        (code: string) => {\n            return modelsGroups[code][\"groups\"];\n        },\n        [modelsGroups]\n    );\n\n    useEffect(() => {\n        // Let's set default values for \"accessScopes\"\n        if (\n            data.endpoints.length > 0 &&\n            !data[`${entity}AccessScope`] &&\n            form.onChangeFns[`${entity}AccessScope`]\n        ) {\n            setValue(`${entity}AccessScope`, \"full\");\n        }\n    }, [data, setValue, form]);\n\n    const disabledPrimaryActions =\n        [undefined, \"own\", \"no\"].includes(data[`${entity}AccessScope`]) ||\n        !data.endpoints.includes(\"manage\");\n\n    return (\n        <Elevation z={1} style={{ marginTop: 10 }}>\n            <Grid>\n                <Cell span={12}>\n                    <Typography use={\"overline\"}>{title}</Typography>\n                </Cell>\n                <Cell span={12}>\n                    <Grid style={{ padding: 0, paddingBottom: 24 }}>\n                        <Cell span={12}>\n                            <Bind name={`${entity}AccessScope`}>\n                                <Select label={t`Access Scope`}>\n                                    <option value={\"full\"}>{t`All groups`}</option>\n                                    <option value={\"groups\"}>{t`Only specific groups`}</option>\n                                    {data.endpoints.includes(\"manage\") && (\n                                        <option\n                                            value={\"own\"}\n                                        >{t`Only groups created by the user`}</option>\n                                    )}\n                                </Select>\n                            </Bind>\n                        </Cell>\n                        {data[`${entity}AccessScope`] === \"groups\" && (\n                            <PermissionSelectorWrapper>\n                                <PermissionSelector\n                                    locales={locales}\n                                    Bind={Bind}\n                                    entity={entity}\n                                    selectorKey={\"groups\"}\n                                    getItems={getItems}\n                                />\n                            </PermissionSelectorWrapper>\n                        )}\n                        <Cell span={12}>\n                            <Bind name={`${entity}RWD`}>\n                                <Select\n                                    label={t`Primary Actions`}\n                                    disabled={disabledPrimaryActions}\n                                >\n                                    <option value={\"r\"}>{t`Read`}</option>\n                                    {data.endpoints.includes(\"manage\") ? (\n                                        <option value={\"rw\"}>{t`Read, write`}</option>\n                                    ) : null}\n                                    {data.endpoints.includes(\"manage\") ? (\n                                        <option value={\"rwd\"}>{t`Read, write, delete`}</option>\n                                    ) : null}\n                                </Select>\n                            </Bind>\n                        </Cell>\n                    </Grid>\n                </Cell>\n            </Grid>\n        </Elevation>\n    );\n};\n\nexport default ContentModelGroupPermission;\n"],"file":"ContentModelGroupPermission.js"}