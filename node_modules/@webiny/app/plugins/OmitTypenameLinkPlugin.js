import _classCallCheck from "@babel/runtime/helpers/classCallCheck";
import _createClass from "@babel/runtime/helpers/createClass";
import _inherits from "@babel/runtime/helpers/inherits";
import _createSuper from "@babel/runtime/helpers/createSuper";
import { ApolloLink } from "apollo-link";
import { ApolloLinkPlugin } from "./ApolloLinkPlugin";

function omitTypename(key, value) {
  return key === "__typename" ? undefined : value;
}
/**
 * This link removes `__typename` from the variables being sent to the API.
 */


export var OmitTypenameLinkPlugin = /*#__PURE__*/function (_ApolloLinkPlugin) {
  _inherits(OmitTypenameLinkPlugin, _ApolloLinkPlugin);

  var _super = _createSuper(OmitTypenameLinkPlugin);

  function OmitTypenameLinkPlugin() {
    _classCallCheck(this, OmitTypenameLinkPlugin);

    return _super.apply(this, arguments);
  }

  _createClass(OmitTypenameLinkPlugin, [{
    key: "createLink",
    value: function createLink() {
      return new ApolloLink(function (operation, forward) {
        if (operation.variables) {
          operation.variables = JSON.parse(JSON.stringify(operation.variables), omitTypename);
        }

        return forward(operation);
      });
    }
  }]);

  return OmitTypenameLinkPlugin;
}(ApolloLinkPlugin);
//# sourceMappingURL=OmitTypenameLinkPlugin.js.map