{"version":3,"sources":["../../src/plugins/index.tsx"],"names":["React","warning","plugins","imagePlugin","PluginComponent","props","children","PluginsComponent","renderPlugin","name","params","options","wrapper","fn","plugin","byName","content","cloneElement","key","renderPlugins","type","filter","v","reverse","byType","map","Boolean"],"mappings":"AAAA,OAAOA,KAAP,MAA2D,OAA3D;AACA,OAAOC,OAAP,MAAoB,SAApB;AACA,SAASC,OAAT,QAAwB,iBAAxB;AAEA,OAAOC,WAAP;AAEA,SAASA,WAAT;;AAqBA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD;AAAA,SACpBA,KAAK,CAACC,QADc;AAAA,CAAxB;;AAEA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACF,KAAD;AAAA,SACrBA,KAAK,CAACC,QADe;AAAA,CAAzB;;AAGA,OAAO,IAAME,YAA0B,GAAG,SAA7BA,YAA6B,CAACC,IAAD,EAAqC;AAAA,MAA9BC,MAA8B,uEAArB,EAAqB;AAAA,MAAjBC,OAAiB,uEAAP,EAAO;AAC3E,yBAA0CA,OAA1C,CAAQC,OAAR;AAAA,MAAQA,OAAR,iCAAkB,IAAlB;AAAA,oBAA0CD,OAA1C,CAAwBE,EAAxB;AAAA,MAAwBA,EAAxB,4BAA6B,QAA7B;AAEA,MAAMC,MAAM,GAAGZ,OAAO,CAACa,MAAR,CAAeN,IAAf,CAAf;AACAR,EAAAA,OAAO,CAACa,MAAD,6BAA4BL,IAA5B,QAAP;;AAEA,MAAI,CAACK,MAAL,EAAa;AACT,WAAO,IAAP;AACH;;AAED,MAAME,OAAO,GAAGF,MAAM,CAACD,EAAD,CAAN,CAAWH,MAAX,CAAhB;;AACA,MAAIM,OAAJ,EAAa;AACT,WAAOJ,OAAO,gBACV,oBAAC,eAAD;AAAiB,MAAA,GAAG,EAAEE,MAAM,CAACL,IAA7B;AAAmC,MAAA,IAAI,EAAEA,IAAzC;AAA+C,MAAA,MAAM,EAAEC,MAAvD;AAA+D,MAAA,EAAE,EAAEG;AAAnE,OACKG,OADL,CADU,gBAKVhB,KAAK,CAACiB,YAAN,CAAmBD,OAAnB,EAA4B;AAAEE,MAAAA,GAAG,EAAEJ,MAAM,CAACL;AAAd,KAA5B,CALJ;AAOH;;AACD,SAAO,IAAP;AACH,CArBM;AAuBP,OAAO,IAAMU,aAA4B,GAAG,SAA/BA,aAA+B,CAACC,IAAD,EAAqC;AAAA,MAA9BV,MAA8B,uEAArB,EAAqB;AAAA,MAAjBC,OAAiB,uEAAP,EAAO;AAC7E,0BAAoEA,OAApE,CAAQC,OAAR;AAAA,MAAQA,OAAR,kCAAkB,IAAlB;AAAA,qBAAoED,OAApE,CAAwBE,EAAxB;AAAA,MAAwBA,EAAxB,6BAA6B,QAA7B;AAAA,wBAAoEF,OAApE,CAAuCU,MAAvC;AAAA,MAAuCA,MAAvC,gCAAgD,UAAAC,CAAC;AAAA,WAAIA,CAAJ;AAAA,GAAjD;AAAA,MAAwDC,OAAxD,GAAoEZ,OAApE,CAAwDY,OAAxD;AAEA,MAAMP,OAAO,GAAGd,OAAO,CAClBsB,MADW,CACJJ,IADI,EAEXC,MAFW,CAEJA,MAFI,EAGXI,GAHW,CAGP,UAAAX,MAAM;AAAA,WAAIN,YAAY,CAACM,MAAM,CAACL,IAAR,EAAcC,MAAd,EAAsB;AAAEE,MAAAA,OAAO,EAAPA,OAAF;AAAWC,MAAAA,EAAE,EAAFA;AAAX,KAAtB,CAAhB;AAAA,GAHC,EAIXQ,MAJW,CAIJK,OAJI,CAAhB;;AAMA,MAAIH,OAAJ,EAAa;AACTP,IAAAA,OAAO,CAACO,OAAR;AACH;;AAED,SAAOX,OAAO,gBACV,oBAAC,gBAAD;AAAkB,IAAA,IAAI,EAAEQ,IAAxB;AAA8B,IAAA,MAAM,EAAEV,MAAtC;AAA8C,IAAA,EAAE,EAAEG;AAAlD,KACKG,OADL,CADU,GAKVA,OALJ;AAOH,CApBM;AAsBP,eAAe,CAACb,WAAD,CAAf","sourcesContent":["import React, { ReactNode, FunctionComponentElement } from \"react\";\nimport warning from \"warning\";\nimport { plugins } from \"@webiny/plugins\";\nimport { Plugin } from \"@webiny/plugins/types\";\nimport imagePlugin from \"./image\";\n\nexport { imagePlugin };\n\ntype RenderPluginOptions<T> = {\n    wrapper?: boolean;\n    fn?: string;\n    filter?: (value: T, index: number, array: T[]) => boolean;\n    reverse?: boolean;\n};\n\ninterface RenderPlugin {\n    <T extends Plugin = Plugin>(name: string, params?: any, options?: RenderPluginOptions<T>):\n        | ReactNode\n        | ReactNode[];\n}\n\ninterface RenderPlugins {\n    <T extends Plugin = Plugin>(type: string, params?: any, options?: RenderPluginOptions<T>):\n        | ReactNode\n        | ReactNode[];\n}\n\nconst PluginComponent = (props: { [key: string]: any }): FunctionComponentElement<{}> =>\n    props.children;\nconst PluginsComponent = (props: { [key: string]: any }): FunctionComponentElement<{}> =>\n    props.children;\n\nexport const renderPlugin: RenderPlugin = (name, params = {}, options = {}) => {\n    const { wrapper = true, fn = \"render\" } = options;\n\n    const plugin = plugins.byName(name);\n    warning(plugin, `No such plugin \"${name}\"`);\n\n    if (!plugin) {\n        return null;\n    }\n\n    const content = plugin[fn](params);\n    if (content) {\n        return wrapper ? (\n            <PluginComponent key={plugin.name} name={name} params={params} fn={fn}>\n                {content}\n            </PluginComponent>\n        ) : (\n            React.cloneElement(content, { key: plugin.name })\n        );\n    }\n    return null;\n};\n\nexport const renderPlugins: RenderPlugins = (type, params = {}, options = {}) => {\n    const { wrapper = true, fn = \"render\", filter = v => v, reverse } = options;\n\n    const content = plugins\n        .byType(type)\n        .filter(filter)\n        .map(plugin => renderPlugin(plugin.name, params, { wrapper, fn }))\n        .filter(Boolean);\n\n    if (reverse) {\n        content.reverse();\n    }\n\n    return wrapper ? (\n        <PluginsComponent type={type} params={params} fn={fn}>\n            {content}\n        </PluginsComponent>\n    ) : (\n        content\n    );\n};\n\nexport default [imagePlugin];\n"],"file":"index.js"}