{"version":3,"sources":["../../src/apollo-client/InMemoryCache.ts"],"names":["InMemoryCache","BaseInMemoryCache","plugins","AddQuerySelectionPlugin","ApolloLinkPlugin","config","transformPlugins","byType","type","filter","pl","document","operationName","definitions","name","value","addSelectionToQuery"],"mappings":";;;;;;;;;AAAA,SAASA,aAAa,IAAIC,iBAA1B,QAAwE,uBAAxE;AAEA,SAASC,OAAT,QAAwB,iBAAxB;AACA,SAASC,uBAAT;AACA,SAASC,gBAAT;AAEA,WAAaJ,aAAb;AAAA;;AAAA;;AAGI,yBAAYK,MAAZ,EAA0C;AAAA;;AAAA;;AACtC,8BAAMA,MAAN;;AADsC;;AAGtC,UAAKC,gBAAL,GAAwBJ,OAAO,CAC1BK,MADmB,CACaH,gBAAgB,CAACI,IAD9B,EAEnBC,MAFmB,CAEZ,UAAAC,EAAE;AAAA,aAAIA,EAAE,YAAYP,uBAAlB;AAAA,KAFU,CAAxB;AAHsC;AAMzC;;AATL;AAAA;AAAA,WAWI,2BAAyBQ,QAAzB,EAA+D;AAC3D;AACA,UAAMC,aAAa,GAAGD,QAAQ,CAACE,WAAT,CAAqB,CAArB,EAAwBC,IAAxB,CAA6BC,KAAnD;;AAF2D,iDAI1C,KAAKT,gBAJqC;AAAA;;AAAA;AAI3D,4DAAwC;AAAA,cAA7BI,EAA6B;AACpCA,UAAAA,EAAE,CAACM,mBAAH,CAAuBJ,aAAvB,EAAsCD,QAAtC;AACH;AAN0D;AAAA;AAAA;AAAA;AAAA;;AAQ3D,kGAA+BA,QAA/B;AACH;AApBL;;AAAA;AAAA,EAAmCV,iBAAnC","sourcesContent":["import { InMemoryCache as BaseInMemoryCache, InMemoryCacheConfig } from \"apollo-cache-inmemory\";\nimport { DocumentNode } from \"graphql\";\nimport { plugins } from \"@webiny/plugins\";\nimport { AddQuerySelectionPlugin } from \"../plugins/AddQuerySelectionPlugin\";\nimport { ApolloLinkPlugin } from \"../plugins/ApolloLinkPlugin\";\n\nexport class InMemoryCache extends BaseInMemoryCache {\n    private transformPlugins: AddQuerySelectionPlugin[];\n\n    constructor(config?: InMemoryCacheConfig) {\n        super(config);\n\n        this.transformPlugins = plugins\n            .byType<AddQuerySelectionPlugin>(ApolloLinkPlugin.type)\n            .filter(pl => pl instanceof AddQuerySelectionPlugin);\n    }\n\n    public transformDocument(document: DocumentNode): DocumentNode {\n        // @ts-ignore\n        const operationName = document.definitions[0].name.value;\n\n        for (const pl of this.transformPlugins) {\n            pl.addSelectionToQuery(operationName, document);\n        }\n\n        return super.transformDocument(document);\n    }\n}\n"],"file":"InMemoryCache.js"}