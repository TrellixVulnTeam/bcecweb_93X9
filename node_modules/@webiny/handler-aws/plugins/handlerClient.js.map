{"version":3,"sources":["../../src/plugins/handlerClient.ts"],"names":["plugin","type","name","invoke","payload","await","useAwait","lambdaClient","LambdaClient","region","process","env","AWS_REGION","response","FunctionName","InvocationType","Payload","JSON","stringify","promise","parse"],"mappings":";;;;;;;;;AAAA;;AAGA,MAAMA,MAA2B,GAAG;AAChCC,EAAAA,IAAI,EAAE,gBAD0B;AAEhCC,EAAAA,IAAI,EAAE,gBAF0B;;AAGhC,QAAMC,MAAN,CAAa;AAAED,IAAAA,IAAF;AAAQE,IAAAA,OAAR;AAAiBC,IAAAA,KAAK,EAAEC;AAAxB,GAAb,EAAiD;AAC7C,UAAMC,YAAY,GAAG,IAAIC,eAAJ,CAAiB;AAAEC,MAAAA,MAAM,EAAEC,OAAO,CAACC,GAAR,CAAYC;AAAtB,KAAjB,CAArB;AACA,UAAMC,QAAQ,GAAG,MAAMN,YAAY,CAC9BJ,MADkB,CACX;AACJW,MAAAA,YAAY,EAAEZ,IADV;AAEJa,MAAAA,cAAc,EAAET,QAAQ,KAAK,KAAb,GAAqB,OAArB,GAA+B,iBAF3C;AAGJU,MAAAA,OAAO,EAAEC,IAAI,CAACC,SAAL,CAAed,OAAf;AAHL,KADW,EAMlBe,OANkB,EAAvB;;AAQA,QAAIb,QAAQ,KAAK,KAAjB,EAAwB;AACpB,aAAO,IAAP;AACH;;AAED,UAAMU,OAAO,GAAGH,QAAQ,CAACG,OAAzB;AACA,WAAOC,IAAI,CAACG,KAAL,CAAWJ,OAAX,CAAP;AACH;;AAnB+B,CAApC;eAsBehB,M","sourcesContent":["import LambdaClient from \"aws-sdk/clients/lambda\";\nimport { HandlerClientPlugin } from \"@webiny/handler-client/types\";\n\nconst plugin: HandlerClientPlugin = {\n    type: \"handler-client\",\n    name: \"handler-client\",\n    async invoke({ name, payload, await: useAwait }) {\n        const lambdaClient = new LambdaClient({ region: process.env.AWS_REGION });\n        const response = await lambdaClient\n            .invoke({\n                FunctionName: name,\n                InvocationType: useAwait === false ? \"Event\" : \"RequestResponse\",\n                Payload: JSON.stringify(payload)\n            })\n            .promise();\n\n        if (useAwait === false) {\n            return null;\n        }\n\n        const Payload = response.Payload as string;\n        return JSON.parse(Payload);\n    }\n};\n\nexport default plugin;\n"],"file":"handlerClient.js"}