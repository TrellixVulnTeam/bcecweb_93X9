"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createHandler = void 0;

var _handlerClient = _interopRequireDefault(require("@webiny/handler-client"));

var _handlerHttp = _interopRequireDefault(require("@webiny/handler-http"));

var _handlerArgs = _interopRequireDefault(require("@webiny/handler-args"));

var _handler = require("@webiny/handler");

var _handlerClient2 = _interopRequireDefault(require("./plugins/handlerClient"));

var _handlerHttp2 = _interopRequireDefault(require("./plugins/handlerHttp"));

/**
 * To avoid braking changes, the "createHandler" function supports two signature:
 *  1. A list of plugins.       (backwards-compatible)
 *  2. A single argument of type `CreateHandlerOptions`.
 *
 * @param {Array | CreateAwsHandlerOptions} args - The list of plugins or object of type `CreateHandlerOptions`.
 */
const createHandler = (...args) => {
  let plugins = args;
  const createHandlerOptions = args[0];

  if (createHandlerOptions && Array.isArray(createHandlerOptions.plugins)) {
    plugins = createHandlerOptions.plugins;
  }

  return (0, _handler.createHandler)((0, _handlerClient.default)(), (0, _handlerArgs.default)(), (0, _handlerHttp.default)(createHandlerOptions && createHandlerOptions.http), _handlerClient2.default, _handlerHttp2.default, ...plugins);
};

exports.createHandler = createHandler;
//# sourceMappingURL=index.js.map