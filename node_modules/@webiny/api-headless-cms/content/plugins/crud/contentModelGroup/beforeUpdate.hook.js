"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.beforeUpdateHook = void 0;

var _ContentModelGroupPlugin = require("../../ContentModelGroupPlugin");

const beforeUpdateHook = async ({
  input,
  group,
  data,
  context,
  storageOperations
}) => {
  const groupPlugin = context.plugins.byType(_ContentModelGroupPlugin.ContentModelGroupPlugin.type).find(item => item.contentModelGroup.slug === input.slug);

  if (groupPlugin) {
    throw new Error(`Content model groups defined via plugins cannot be updated.`);
  }

  if (!storageOperations.beforeUpdate) {
    return;
  }

  await storageOperations.beforeUpdate({
    data,
    group,
    input
  });
};

exports.beforeUpdateHook = beforeUpdateHook;
//# sourceMappingURL=beforeUpdate.hook.js.map