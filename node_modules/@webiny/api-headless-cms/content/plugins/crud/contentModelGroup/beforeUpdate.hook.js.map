{"version":3,"sources":["../../../../../src/content/plugins/crud/contentModelGroup/beforeUpdate.hook.ts"],"names":["beforeUpdateHook","input","group","data","context","storageOperations","groupPlugin","plugins","byType","ContentModelGroupPlugin","type","find","item","contentModelGroup","slug","Error","beforeUpdate"],"mappings":";;;;;;;AAKA;;AAMO,MAAMA,gBAAgB,GAAG,OAAO;AACnCC,EAAAA,KADmC;AAEnCC,EAAAA,KAFmC;AAGnCC,EAAAA,IAHmC;AAInCC,EAAAA,OAJmC;AAKnCC,EAAAA;AALmC,CAAP,KAML;AACvB,QAAMC,WAAoC,GAAGF,OAAO,CAACG,OAAR,CACxCC,MADwC,CACRC,iDAAwBC,IADhB,EAExCC,IAFwC,CAElCC,IAAD,IAAmCA,IAAI,CAACC,iBAAL,CAAuBC,IAAvB,KAAgCb,KAAK,CAACa,IAFtC,CAA7C;;AAIA,MAAIR,WAAJ,EAAiB;AACb,UAAM,IAAIS,KAAJ,CAAW,6DAAX,CAAN;AACH;;AAED,MAAI,CAACV,iBAAiB,CAACW,YAAvB,EAAqC;AACjC;AACH;;AACD,QAAMX,iBAAiB,CAACW,YAAlB,CAA+B;AACjCb,IAAAA,IADiC;AAEjCD,IAAAA,KAFiC;AAGjCD,IAAAA;AAHiC,GAA/B,CAAN;AAKH,CAvBM","sourcesContent":["import {\n    CmsContentModelGroupStorageOperations,\n    CmsContentModelGroupStorageOperationsBeforeUpdateArgs,\n    CmsContext\n} from \"../../../../types\";\nimport { ContentModelGroupPlugin } from \"~/content/plugins/ContentModelGroupPlugin\";\n\ninterface Args extends CmsContentModelGroupStorageOperationsBeforeUpdateArgs {\n    context: CmsContext;\n    storageOperations: CmsContentModelGroupStorageOperations;\n}\nexport const beforeUpdateHook = async ({\n    input,\n    group,\n    data,\n    context,\n    storageOperations\n}: Args): Promise<void> => {\n    const groupPlugin: ContentModelGroupPlugin = context.plugins\n        .byType<ContentModelGroupPlugin>(ContentModelGroupPlugin.type)\n        .find((item: ContentModelGroupPlugin) => item.contentModelGroup.slug === input.slug);\n\n    if (groupPlugin) {\n        throw new Error(`Content model groups defined via plugins cannot be updated.`);\n    }\n\n    if (!storageOperations.beforeUpdate) {\n        return;\n    }\n    await storageOperations.beforeUpdate({\n        data,\n        group,\n        input\n    });\n};\n"],"file":"beforeUpdate.hook.js"}