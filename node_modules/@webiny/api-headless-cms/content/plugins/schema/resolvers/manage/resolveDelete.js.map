{"version":3,"sources":["../../../../../../src/content/plugins/schema/resolvers/manage/resolveDelete.ts"],"names":["resolveDelete","model","root","revision","cms","includes","entries","deleteRevision","deleteEntry","Response","e","ErrorResponse"],"mappings":";;;;;;;AAAA;;AAGO,MAAMA,aAA8B,GACvC,CAAC;AAAEC,EAAAA;AAAF,CAAD,KACA,OAAOC,IAAP,EAAa;AAAEC,EAAAA;AAAF,CAAb,EAA2B;AAAEC,EAAAA;AAAF,CAA3B,KAAuC;AACnC,MAAI;AACA,QAAID,QAAQ,CAACE,QAAT,CAAkB,GAAlB,CAAJ,EAA4B;AACxB,YAAMD,GAAG,CAACE,OAAJ,CAAYC,cAAZ,CAA2BN,KAA3B,EAAkCE,QAAlC,CAAN;AACH,KAFD,MAEO;AACH,YAAMC,GAAG,CAACE,OAAJ,CAAYE,WAAZ,CAAwBP,KAAxB,EAA+BE,QAA/B,CAAN;AACH;;AAED,WAAO,IAAIM,mBAAJ,CAAa,IAAb,CAAP;AACH,GARD,CAQE,OAAOC,CAAP,EAAU;AACR,WAAO,IAAIC,wBAAJ,CAAkBD,CAAlB,CAAP;AACH;AACJ,CAdE","sourcesContent":["import { Response, ErrorResponse } from \"@webiny/handler-graphql/responses\";\nimport { CmsContentEntryResolverFactory as ResolverFactory } from \"../../../../../types\";\n\nexport const resolveDelete: ResolverFactory =\n    ({ model }) =>\n    async (root, { revision }, { cms }) => {\n        try {\n            if (revision.includes(\"#\")) {\n                await cms.entries.deleteRevision(model, revision);\n            } else {\n                await cms.entries.deleteEntry(model, revision);\n            }\n\n            return new Response(true);\n        } catch (e) {\n            return new ErrorResponse(e);\n        }\n    };\n"],"file":"resolveDelete.js"}