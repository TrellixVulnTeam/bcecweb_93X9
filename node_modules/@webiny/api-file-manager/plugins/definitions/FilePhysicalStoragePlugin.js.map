{"version":3,"sources":["../../../src/plugins/definitions/FilePhysicalStoragePlugin.ts"],"names":["FilePhysicalStoragePlugin","Plugin","constructor","params","_params","upload","WebinyError","delete"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AAkBO,MAAMA,yBAAN,SAAwCC,eAAxC,CAA+C;AAI3CC,EAAAA,WAAW,CAACC,MAAD,EAAiB;AAC/B;AAD+B;AAE/B,SAAKC,OAAL,GAAeD,MAAf;AACH;;AAEkB,QAANE,MAAM,CAACF,MAAD,EAAqC;AACpD,QAAI,CAAC,KAAKC,OAAL,CAAaC,MAAlB,EAA0B;AACtB,YAAM,IAAIC,cAAJ,CACD,qDADC,EAEF,qBAFE,CAAN;AAIH;;AACD,WAAO,KAAKF,OAAL,CAAaC,MAAb,CAAoBF,MAApB,CAAP;AACH;;AAEkB,QAANI,MAAM,CAACJ,MAAD,EAAqC;AACpD,QAAI,CAAC,KAAKC,OAAL,CAAaG,MAAlB,EAA0B;AACtB,YAAM,IAAID,cAAJ,CACD,qDADC,EAEF,qBAFE,CAAN;AAIH;;AACD,WAAO,KAAKF,OAAL,CAAaG,MAAb,CAAoBJ,MAApB,CAAP;AACH;;AA3BiD;;;8BAAzCH,yB,UACqB,0B","sourcesContent":["import { Plugin } from \"@webiny/plugins\";\nimport WebinyError from \"@webiny/error\";\nimport { FileManagerSettings } from \"~/types\";\n\nexport interface Params {\n    upload: (args: UploadParams) => Promise<any>;\n    delete: (args: DeleteParams) => Promise<void>;\n}\n\nexport interface UploadParams {\n    settings: FileManagerSettings;\n    buffer: Buffer;\n    [key: string]: any;\n}\n\nexport interface DeleteParams {\n    key: string;\n}\n\nexport class FilePhysicalStoragePlugin extends Plugin {\n    public static readonly type = \"api-file-manager-storage\";\n    private readonly _params: Params;\n\n    public constructor(params: Params) {\n        super();\n        this._params = params;\n    }\n\n    public async upload(params: UploadParams): Promise<any> {\n        if (!this._params.upload) {\n            throw new WebinyError(\n                `You must define the \"upload\" method of this plugin.`,\n                \"UPLOAD_METHOD_ERROR\"\n            );\n        }\n        return this._params.upload(params);\n    }\n\n    public async delete(params: DeleteParams): Promise<any> {\n        if (!this._params.delete) {\n            throw new WebinyError(\n                `You must define the \"delete\" method of this plugin.`,\n                \"DELETE_METHOD_ERROR\"\n            );\n        }\n        return this._params.delete(params);\n    }\n}\n"],"file":"FilePhysicalStoragePlugin.js"}