{"version":3,"sources":["../../../src/handlers/transform/utils.ts"],"names":["SUPPORTED_IMAGES","SUPPORTED_TRANSFORMABLE_IMAGES","OPTIMIZED_TRANSFORMED_IMAGE_PREFIX","OPTIMIZED_IMAGE_PREFIX","getOptimizedImageKeyPrefix","key","getOptimizedTransformedImageKeyPrefix","getImageKey","transformations","prefix"],"mappings":";;;;;;;;;AAAA;;AAEA,MAAMA,gBAAgB,GAAG,CAAC,MAAD,EAAS,OAAT,EAAkB,MAAlB,EAA0B,MAA1B,EAAkC,MAAlC,CAAzB;;AACA,MAAMC,8BAA8B,GAAG,CAAC,MAAD,EAAS,OAAT,EAAkB,MAAlB,CAAvC;;AAEA,MAAMC,kCAAkC,GAAG,UAA3C;;AACA,MAAMC,sBAAsB,GAAG,QAA/B;;;AAEA,MAAMC,0BAA0B,GAAGC,GAAG,IAAI;AACtC,SAAQ,GAAEF,sBAAuB,GAAE,yBAAWE,GAAX,CAAgB,GAAnD;AACH,CAFD;;;;AAIA,MAAMC,qCAAqC,GAAGD,GAAG,IAAI;AACjD,SAAQ,GAAEH,kCAAmC,GAAE,yBAAWG,GAAX,CAAgB,GAA/D;AACH,CAFD;;;;AASA,MAAME,WAAW,GAAG,CAAC;AAAEF,EAAAA,GAAF;AAAOG,EAAAA;AAAP,CAAD,KAAiD;AACjE,MAAI,CAACA,eAAL,EAAsB;AAClB,UAAMC,MAAM,GAAGL,0BAA0B,CAACC,GAAD,CAAzC;AACA,WAAOI,MAAM,GAAGJ,GAAhB;AACH;;AAED,QAAMI,MAAM,GAAGH,qCAAqC,CAACD,GAAD,CAApD;AACA,SAAQ,GAAEI,MAAO,GAAE,yBAAWD,eAAX,CAA4B,IAAGH,GAAI,EAAtD;AACH,CARD","sourcesContent":["import objectHash from \"object-hash\";\n\nconst SUPPORTED_IMAGES = [\".jpg\", \".jpeg\", \".png\", \".svg\", \".gif\"];\nconst SUPPORTED_TRANSFORMABLE_IMAGES = [\".jpg\", \".jpeg\", \".png\"];\n\nconst OPTIMIZED_TRANSFORMED_IMAGE_PREFIX = \"img-o-t-\";\nconst OPTIMIZED_IMAGE_PREFIX = \"img-o-\";\n\nconst getOptimizedImageKeyPrefix = key => {\n    return `${OPTIMIZED_IMAGE_PREFIX}${objectHash(key)}-`;\n};\n\nconst getOptimizedTransformedImageKeyPrefix = key => {\n    return `${OPTIMIZED_TRANSFORMED_IMAGE_PREFIX}${objectHash(key)}-`;\n};\n\ninterface GetImageKeyParams {\n    key: string;\n    transformations?: any;\n}\n\nconst getImageKey = ({ key, transformations }: GetImageKeyParams) => {\n    if (!transformations) {\n        const prefix = getOptimizedImageKeyPrefix(key);\n        return prefix + key;\n    }\n\n    const prefix = getOptimizedTransformedImageKeyPrefix(key);\n    return `${prefix}${objectHash(transformations)}-${key}`;\n};\n\nexport {\n    SUPPORTED_IMAGES,\n    SUPPORTED_TRANSFORMABLE_IMAGES,\n    OPTIMIZED_TRANSFORMED_IMAGE_PREFIX,\n    OPTIMIZED_IMAGE_PREFIX,\n    getImageKey,\n    getOptimizedImageKeyPrefix,\n    getOptimizedTransformedImageKeyPrefix\n};\n"],"file":"utils.js"}