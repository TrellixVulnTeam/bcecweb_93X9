{"version":3,"sources":["../../../src/handlers/transform/optimizeImage.ts"],"names":["buffer","type","resize","width","withoutEnlargement","fit","png","compressionLevel","adaptiveFiltering","force","withMetadata","toBuffer","toFormat","quality"],"mappings":";;;;;;;;;AACA;;AADA;eAGe,OAAOA,MAAP,EAAeC,IAAf,KAAwB;AACnC,UAAQA,IAAR;AACI,SAAK,WAAL;AAAkB;AACd,eAAO,MAAM,oBAAMD,MAAN,EACRE,MADQ,CACD;AAAEC,UAAAA,KAAK,EAAE,IAAT;AAAeC,UAAAA,kBAAkB,EAAE,IAAnC;AAAyCC,UAAAA,GAAG,EAAE;AAA9C,SADC,EAERC,GAFQ,CAEJ;AAAEC,UAAAA,gBAAgB,EAAE,CAApB;AAAuBC,UAAAA,iBAAiB,EAAE,IAA1C;AAAgDC,UAAAA,KAAK,EAAE;AAAvD,SAFI,EAGRC,YAHQ,GAIRC,QAJQ,EAAb;AAKH;;AACD,SAAK,YAAL;AACA,SAAK,WAAL;AAAkB;AACd,eAAO,MAAM,oBAAMX,MAAN,EACRE,MADQ,CACD;AAAEC,UAAAA,KAAK,EAAE,IAAT;AAAeC,UAAAA,kBAAkB,EAAE,IAAnC;AAAyCC,UAAAA,GAAG,EAAE;AAA9C,SADC,EAERO,QAFQ,CAEC,MAFD,EAES;AAAEC,UAAAA,OAAO,EAAE;AAAX,SAFT,EAGRF,QAHQ,EAAb;AAIH;;AACD;AACI,aAAOX,MAAP;AAhBR;AAkBH,C","sourcesContent":["// @ts-ignore\nimport sharp from \"sharp\";\n\nexport default async (buffer, type) => {\n    switch (type) {\n        case \"image/png\": {\n            return await sharp(buffer)\n                .resize({ width: 2560, withoutEnlargement: true, fit: \"inside\" })\n                .png({ compressionLevel: 9, adaptiveFiltering: true, force: true })\n                .withMetadata()\n                .toBuffer();\n        }\n        case \"image/jpeg\":\n        case \"image/jpg\": {\n            return await sharp(buffer)\n                .resize({ width: 2560, withoutEnlargement: true, fit: \"inside\" })\n                .toFormat(\"jpeg\", { quality: 90 })\n                .toBuffer();\n        }\n        default:\n            return buffer;\n    }\n};\n"],"file":"optimizeImage.js"}