{"version":3,"sources":["../../../src/plugins/definitions/ValueFilterPlugin.ts"],"names":["ValueFilterPlugin","Plugin","operation","getOperation","constructor","params","_params","matches","WebinyError","plugin"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AAeO,MAAMA,iBAAN,SAAgCC,eAAhC,CAAuC;AAItB,MAATC,SAAS,GAAW;AAC3B,WAAO,KAAKC,YAAL,EAAP;AACH;;AAEMC,EAAAA,WAAW,CAACC,MAAD,EAAiB;AAC/B;AAD+B;AAE/B,SAAKC,OAAL,GAAeD,MAAf;AACH;;AAEME,EAAAA,OAAO,CAACF,MAAD,EAAiC;AAC3C,QAAI,CAAC,KAAKC,OAAN,IAAiB,CAAC,KAAKA,OAAL,CAAaC,OAAnC,EAA4C;AACxC,YAAM,IAAIC,cAAJ,CAAiB,kCAAjB,EAAoD,eAApD,EAAqE;AACvEC,QAAAA,MAAM,EAAE,IAD+D;AAEvEJ,QAAAA;AAFuE,OAArE,CAAN;AAIH;;AACD,WAAO,KAAKC,OAAL,CAAaC,OAAb,CAAqBF,MAArB,CAAP;AACH;;AAEMF,EAAAA,YAAY,GAAW;AAC1B,QAAI,CAAC,KAAKG,OAAN,IAAiB,CAAC,KAAKA,OAAL,CAAaJ,SAAnC,EAA8C;AAC1C,YAAM,IAAIM,cAAJ,CAAiB,oCAAjB,EAAsD,iBAAtD,CAAN;AACH;;AACD,WAAO,KAAKF,OAAL,CAAaJ,SAApB;AACH;;AA5ByC;;;8BAAjCF,iB,UACqB,uB","sourcesContent":["import { Plugin } from \"@webiny/plugins\";\nimport WebinyError from \"@webiny/error\";\n\nexport interface MatchesParams {\n    value: any;\n    compareValue: any;\n}\n\nexport interface Matches {\n    (params: MatchesParams): boolean;\n}\n\nexport interface Params {\n    operation: string;\n    matches: Matches;\n}\nexport class ValueFilterPlugin extends Plugin {\n    public static readonly type = \"dynamodb.value.filter\";\n    private readonly _params: Params;\n\n    public get operation(): string {\n        return this.getOperation();\n    }\n\n    public constructor(params: Params) {\n        super();\n        this._params = params;\n    }\n\n    public matches(params: MatchesParams): boolean {\n        if (!this._params || !this._params.matches) {\n            throw new WebinyError(`Missing \"matches\" in the plugin.`, \"MATCHES_ERROR\", {\n                plugin: this,\n                params\n            });\n        }\n        return this._params.matches(params);\n    }\n\n    public getOperation(): string {\n        if (!this._params || !this._params.operation) {\n            throw new WebinyError(`Missing \"operation\" in the plugin.`, \"OPERATION_ERROR\");\n        }\n        return this._params.operation;\n    }\n}\n"],"file":"ValueFilterPlugin.js"}