{"version":3,"sources":["../../src/utils/listResponse.ts"],"names":["createListResponse","params","items","initialItems","after","totalCount","limit","start","hasMoreItems","end","undefined","slice","cursor","length","meta"],"mappings":";;;;;;;AAAA;;AAeO,MAAMA,kBAAkB,GAAOC,MAAJ,IAAiE;AAC/F,QAAM;AAAEC,IAAAA,KAAK,EAAEC,YAAT;AAAuBC,IAAAA,KAAvB;AAA8BC,IAAAA,UAA9B;AAA0CC,IAAAA;AAA1C,MAAoDL,MAA1D;AACA,QAAMM,KAAK,GAAG,0BAAaH,KAAb,KAAuB,CAArC;AACA,QAAMI,YAAY,GAAGH,UAAU,GAAGE,KAAK,GAAGD,KAA1C;AACA,QAAMG,GAAG,GAAGH,KAAK,GAAGD,UAAU,GAAGE,KAAb,GAAqBD,KAA7B,GAAqCI,SAArC,GAAiDH,KAAK,GAAGD,KAArE;AACA,QAAMJ,KAAK,GAAGC,YAAY,CAACQ,KAAb,CAAmBJ,KAAnB,EAA0BE,GAA1B,CAAd;AAEA,QAAMG,MAAM,GAAGV,KAAK,CAACW,MAAN,GAAe,CAAf,GAAmB,0BAAaN,KAAK,GAAGD,KAArB,CAAnB,GAAiD,IAAhE;AAEA,QAAMQ,IAAI,GAAG;AACTN,IAAAA,YADS;AAETH,IAAAA,UAFS;AAGTO,IAAAA;AAHS,GAAb;AAMA,SAAO,CAACV,KAAD,EAAQY,IAAR,CAAP;AACH,CAhBM","sourcesContent":["import { decodeCursor, encodeCursor } from \"~/utils/cursor\";\n\ninterface MetaResponse {\n    cursor: string | null;\n    totalCount: number;\n    hasMoreItems: boolean;\n}\n\ninterface CreateListResponseParams<T> {\n    items: T[];\n    after?: string | null;\n    totalCount: number;\n    limit: number;\n}\n\nexport const createListResponse = <T>(params: CreateListResponseParams<T>): [T[], MetaResponse] => {\n    const { items: initialItems, after, totalCount, limit } = params;\n    const start = decodeCursor(after) || 0;\n    const hasMoreItems = totalCount > start + limit;\n    const end = limit > totalCount + start + limit ? undefined : start + limit;\n    const items = initialItems.slice(start, end);\n\n    const cursor = items.length > 0 ? encodeCursor(start + limit) : null;\n\n    const meta = {\n        hasMoreItems,\n        totalCount,\n        cursor\n    };\n\n    return [items, meta];\n};\n"],"file":"listResponse.js"}