import _defineProperty from "@babel/runtime/helpers/defineProperty";
import _objectSpread from "@babel/runtime/helpers/objectSpread2";
import _objectWithoutProperties from "@babel/runtime/helpers/objectWithoutProperties";
var _excluded = ["children"];
import React, { useContext, useEffect } from "react";
import { Link as RouterLink } from "react-router-dom";
import { RouterContext } from "./context/RouterContext";

function Link(_ref) {
  var children = _ref.children,
      props = _objectWithoutProperties(_ref, _excluded);

  var _useContext = useContext(RouterContext),
      onLink = _useContext.onLink;

  var to = props.to;

  if (typeof to === "string" && to.startsWith(window.location.origin)) {
    to = to.replace(window.location.origin, "");
  }

  useEffect(function () {
    onLink(to);
  }, [to]);
  var isInternal = typeof to === "string" ? to.startsWith("/") : true;
  var LinkComponent = isInternal ? RouterLink : "a";

  var componentProps = _objectSpread(_objectSpread({}, props), {}, _defineProperty({}, isInternal ? "to" : "href", to));

  return /*#__PURE__*/React.createElement(LinkComponent, componentProps, children);
}

export { Link };
//# sourceMappingURL=Link.js.map