import React, { useMemo } from "react";
import { useQuery } from "@apollo/react-hooks";
import { useSecurity } from "@webiny/app-security";
import { LIST_FORMS } from "../../graphql";
export var FormsContext = /*#__PURE__*/React.createContext(null);
export var FormsProvider = function FormsProvider(_ref) {
  var children = _ref.children;

  var _useSecurity = useSecurity(),
      identity = _useSecurity.identity;

  var listQuery = useQuery(LIST_FORMS);
  var canCreate = useMemo(function () {
    var permission = identity.getPermission("fb.form");

    if (!permission) {
      return false;
    }

    if (typeof permission.rwd !== "string") {
      return true;
    }

    return permission.rwd.includes("w");
  }, []);
  var value = {
    canCreate: canCreate,
    listQuery: listQuery
  };
  return /*#__PURE__*/React.createElement(FormsContext.Provider, {
    value: value
  }, children);
};
//# sourceMappingURL=FormsContext.js.map