{"version":3,"sources":["../../../../src/admin/views/Forms/FormsContext.tsx"],"names":["React","useMemo","useQuery","useSecurity","LIST_FORMS","FormsContext","createContext","FormsProvider","children","identity","listQuery","canCreate","permission","getPermission","rwd","includes","value"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,OAAhB,QAA+B,OAA/B;AACA,SAASC,QAAT,QAAyB,qBAAzB;AAEA,SAASC,WAAT,QAA4B,sBAA5B;AACA,SAASC,UAAT;AAOA,OAAO,IAAMC,YAAY,gBAAGL,KAAK,CAACM,aAAN,CAAuC,IAAvC,CAArB;AAEP,OAAO,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,OAAkB;AAAA,MAAfC,QAAe,QAAfA,QAAe;;AAC3C,qBAAqBL,WAAW,EAAhC;AAAA,MAAQM,QAAR,gBAAQA,QAAR;;AACA,MAAMC,SAAS,GAAGR,QAAQ,CAACE,UAAD,CAA1B;AAEA,MAAMO,SAAS,GAAGV,OAAO,CAAC,YAAM;AAC5B,QAAMW,UAAU,GAAGH,QAAQ,CAACI,aAAT,CAAuB,SAAvB,CAAnB;;AACA,QAAI,CAACD,UAAL,EAAiB;AACb,aAAO,KAAP;AACH;;AAED,QAAI,OAAOA,UAAU,CAACE,GAAlB,KAA0B,QAA9B,EAAwC;AACpC,aAAO,IAAP;AACH;;AAED,WAAOF,UAAU,CAACE,GAAX,CAAeC,QAAf,CAAwB,GAAxB,CAAP;AACH,GAXwB,EAWtB,EAXsB,CAAzB;AAaA,MAAMC,KAAK,GAAG;AACVL,IAAAA,SAAS,EAATA,SADU;AAEVD,IAAAA,SAAS,EAATA;AAFU,GAAd;AAKA,sBAAO,oBAAC,YAAD,CAAc,QAAd;AAAuB,IAAA,KAAK,EAAEM;AAA9B,KAAsCR,QAAtC,CAAP;AACH,CAvBM","sourcesContent":["import React, { useMemo } from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { QueryResult } from \"@apollo/react-common\";\nimport { useSecurity } from \"@webiny/app-security\";\nimport { LIST_FORMS } from \"../../graphql\";\n\nexport interface FormsContextValue {\n    canCreate: boolean;\n    listQuery: QueryResult<any, any>;\n}\n\nexport const FormsContext = React.createContext<FormsContextValue>(null);\n\nexport const FormsProvider = ({ children }) => {\n    const { identity } = useSecurity();\n    const listQuery = useQuery(LIST_FORMS);\n\n    const canCreate = useMemo(() => {\n        const permission = identity.getPermission(\"fb.form\");\n        if (!permission) {\n            return false;\n        }\n\n        if (typeof permission.rwd !== \"string\") {\n            return true;\n        }\n\n        return permission.rwd.includes(\"w\");\n    }, []);\n\n    const value = {\n        canCreate,\n        listQuery\n    };\n\n    return <FormsContext.Provider value={value}>{children}</FormsContext.Provider>;\n};\n"],"file":"FormsContext.js"}