{"version":3,"sources":["../../../../../../src/admin/plugins/editor/defaultBar/Name/Name.tsx"],"names":["React","useCallback","useState","Input","Tooltip","Typography","useFormEditor","useHotkeys","FormMeta","FormName","formNameWrapper","FormVersion","NameInputWrapper","NameWrapper","i18n","t","namespace","Name","state","setData","localName","setLocalName","editingEnabled","setEditing","cancelChanges","startEditing","data","name","saveTitle","e","preventDefault","zIndex","keys","disabled","esc","enter","autoFocus","window","Cypress","published","width","display","version"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,QAA7B,QAA6C,OAA7C;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,SAASC,OAAT,QAAwB,oBAAxB;AACA,SAASC,UAAT,QAA2B,uBAA3B;AACA,SAASC,aAAT;AACA,SAASC,UAAT,QAA2B,eAA3B;AACA,SACIC,QADJ,EAEIC,QAFJ,EAGIC,eAHJ,EAIIC,WAJJ,EAKIC,gBALJ,EAMIC,WANJ;AAQA,SAASC,IAAT,QAAqB,kBAArB;AACA,IAAMC,CAAC,GAAGD,IAAI,CAACE,SAAL,CAAe,iBAAf,CAAV;AAQA,OAAO,IAAMC,IAAI,GAAG,SAAPA,IAAO,GAAM;AACtB,uBAA2BX,aAAa,EAAxC;AAAA,MAAQY,KAAR,kBAAQA,KAAR;AAAA,MAAeC,OAAf,kBAAeA,OAAf;;AACA,kBAAkCjB,QAAQ,CAAC,IAAD,CAA1C;AAAA;AAAA,MAAOkB,SAAP;AAAA,MAAkBC,YAAlB;;AACA,mBAAqCnB,QAAQ,CAAC,KAAD,CAA7C;AAAA;AAAA,MAAOoB,cAAP;AAAA,MAAuBC,UAAvB;;AAEA,WAASC,aAAT,GAAyB;AACrBD,IAAAA,UAAU,CAAC,KAAD,CAAV;AACH;;AAED,WAASE,YAAT,GAAwB;AACpBJ,IAAAA,YAAY,CAACH,KAAK,CAACQ,IAAN,CAAWC,IAAZ,CAAZ;AACAJ,IAAAA,UAAU,CAAC,IAAD,CAAV;AACH;;AAED,MAAMK,SAAS,GAAG3B,WAAW,CACzB,UAAA4B,CAAC,EAAI;AACDA,IAAAA,CAAC,CAACC,cAAF;AACAX,IAAAA,OAAO,CAAC,UAAAO,IAAI,EAAI;AACZA,MAAAA,IAAI,CAACC,IAAL,GAAYP,SAAZ;AACA,aAAOM,IAAP;AACH,KAHM,CAAP;AAIAH,IAAAA,UAAU,CAAC,KAAD,CAAV;AACH,GARwB,EASzB,CAACH,SAAD,CATyB,CAA7B;AAYAb,EAAAA,UAAU,CAAC;AACPwB,IAAAA,MAAM,EAAE,GADD;AAEPC,IAAAA,IAAI,EAAE;AACF,uBAAiBP;AADf;AAFC,GAAD,CAAV;AAOAlB,EAAAA,UAAU,CAAC;AACPwB,IAAAA,MAAM,EAAE,GADD;AAEPE,IAAAA,QAAQ,EAAE,CAACX,cAFJ;AAGPU,IAAAA,IAAI,EAAE;AACFE,MAAAA,GAAG,EAAE,aAAAL,CAAC,EAAI;AACNA,QAAAA,CAAC,CAACC,cAAF;AACAN,QAAAA,aAAa;AAChB,OAJC;AAKFW,MAAAA,KAAK,EAAEP;AALL;AAHC,GAAD,CAAV,CAjCsB,CA6CtB;AACA;;AACA,MAAMQ,SAAS,GAAG,CAACC,MAAM,CAACC,OAA1B;AAEA,SAAOhB,cAAc,gBACjB,oBAAC,gBAAD,qBACI,oBAAC,KAAD;AACI,IAAA,SAAS,EAAEc,SADf;AAEI,IAAA,SAAS,MAFb;AAGI,IAAA,KAAK,EAAEhB,SAHX;AAII,IAAA,QAAQ,EAAEC,YAJd;AAKI,IAAA,MAAM,EAAEO;AALZ,IADJ,CADiB,gBAWjB,oBAAC,WAAD,qBACI,oBAAC,QAAD,qBACI,oBAAC,UAAD;AAAY,IAAA,GAAG,EAAE;AAAjB,uBACIV,KAAK,CAACQ,IAAN,CAAWa,SAAX,GAAuBxB,CAAvB,iFAAsCA,CAAtC,4EADJ,EADJ,CADJ,eAMI;AAAK,IAAA,KAAK,EAAE;AAAEyB,MAAAA,KAAK,EAAE,MAAT;AAAiBC,MAAAA,OAAO,EAAE;AAA1B;AAAZ,kBACI,oBAAC,OAAD;AACI,IAAA,SAAS,EAAE/B,eADf;AAEI,IAAA,SAAS,EAAE,QAFf;AAGI,IAAA,OAAO,eAAE,kCAAOK,CAAP;AAHb,kBAKI,oBAAC,QAAD;AAAU,mBAAY,sBAAtB;AAA6C,IAAA,OAAO,EAAEU;AAAtD,KACKP,KAAK,CAACQ,IAAN,CAAWC,IADhB,CALJ,CADJ,eAUI,oBAAC,WAAD,oBAAmBT,KAAK,CAACQ,IAAN,CAAWgB,OAA9B,OAVJ,CANJ,CAXJ;AA+BH,CAhFM","sourcesContent":["import React, { useCallback, useState } from \"react\";\nimport { Input } from \"@webiny/ui/Input\";\nimport { Tooltip } from \"@webiny/ui/Tooltip\";\nimport { Typography } from \"@webiny/ui/Typography\";\nimport { useFormEditor } from \"../../../../components/FormEditor/Context\";\nimport { useHotkeys } from \"react-hotkeyz\";\nimport {\n    FormMeta,\n    FormName,\n    formNameWrapper,\n    FormVersion,\n    NameInputWrapper,\n    NameWrapper\n} from \"./NameStyled\";\nimport { i18n } from \"@webiny/app/i18n\";\nconst t = i18n.namespace(\"FormEditor.Name\");\n\ndeclare global {\n    interface Window {\n        Cypress: any;\n    }\n}\n\nexport const Name = () => {\n    const { state, setData } = useFormEditor();\n    const [localName, setLocalName] = useState(null);\n    const [editingEnabled, setEditing] = useState(false);\n\n    function cancelChanges() {\n        setEditing(false);\n    }\n\n    function startEditing() {\n        setLocalName(state.data.name);\n        setEditing(true);\n    }\n\n    const saveTitle = useCallback(\n        e => {\n            e.preventDefault();\n            setData(data => {\n                data.name = localName;\n                return data;\n            });\n            setEditing(false);\n        },\n        [localName]\n    );\n\n    useHotkeys({\n        zIndex: 100,\n        keys: {\n            \"alt+cmd+enter\": startEditing\n        }\n    });\n\n    useHotkeys({\n        zIndex: 101,\n        disabled: !editingEnabled,\n        keys: {\n            esc: e => {\n                e.preventDefault();\n                cancelChanges();\n            },\n            enter: saveTitle\n        }\n    });\n\n    // Disable autoFocus because for some reason, blur event would automatically be triggered when clicking\n    // on the page title when doing Cypress testing. Not sure if this is RMWC or Cypress related issue.\n    const autoFocus = !window.Cypress;\n\n    return editingEnabled ? (\n        <NameInputWrapper>\n            <Input\n                autoFocus={autoFocus}\n                fullwidth\n                value={localName}\n                onChange={setLocalName}\n                onBlur={saveTitle}\n            />\n        </NameInputWrapper>\n    ) : (\n        <NameWrapper>\n            <FormMeta>\n                <Typography use={\"overline\"}>{`status: ${\n                    state.data.published ? t`published` : t`draft`\n                }`}</Typography>\n            </FormMeta>\n            <div style={{ width: \"100%\", display: \"flex\" }}>\n                <Tooltip\n                    className={formNameWrapper}\n                    placement={\"bottom\"}\n                    content={<span>{t`rename`}</span>}\n                >\n                    <FormName data-testid=\"fb-editor-form-title\" onClick={startEditing}>\n                        {state.data.name}\n                    </FormName>\n                </Tooltip>\n                <FormVersion>{`(v${state.data.version})`}</FormVersion>\n            </div>\n        </NameWrapper>\n    );\n};\n"],"file":"Name.js"}