{"version":3,"sources":["../../../../../src/admin/plugins/settings/components/FormsSettings.tsx"],"names":["React","useQuery","useMutation","Form","Grid","Cell","ButtonPrimary","Input","Switch","useSnackbar","CircularProgress","graphql","SimpleForm","SimpleFormFooter","SimpleFormContent","SimpleFormHeader","FormsSettings","showSnackbar","getSettingsQuery","query","settings","data","formBuilder","getSettings","queryInProgress","loading","mutation","updateSettings","updateSettingsMutation","mutationInProgress","variables","Bind","form","formData","reCaptchaEnabled","reCaptcha","enabled","submit"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport { Form } from \"@webiny/form\";\nimport { Grid, Cell } from \"@webiny/ui/Grid\";\nimport { ButtonPrimary } from \"@webiny/ui/Button\";\nimport { Input } from \"@webiny/ui/Input\";\nimport { Switch } from \"@webiny/ui/Switch\";\nimport { useSnackbar } from \"@webiny/app-admin/hooks/useSnackbar\";\nimport { CircularProgress } from \"@webiny/ui/Progress\";\nimport graphql from \"./graphql\";\n\nimport {\n    SimpleForm,\n    SimpleFormFooter,\n    SimpleFormContent,\n    SimpleFormHeader\n} from \"@webiny/app-admin/components/SimpleForm\";\n\nconst FormsSettings = () => {\n    const { showSnackbar } = useSnackbar();\n\n    const getSettingsQuery = useQuery(graphql.query);\n\n    const settings = getSettingsQuery?.data?.formBuilder?.getSettings?.data || {};\n    const queryInProgress = getSettingsQuery?.loading;\n\n    const [updateSettings, updateSettingsMutation] = useMutation(graphql.mutation);\n    const mutationInProgress = updateSettingsMutation?.loading;\n\n    return (\n        <Form\n            data={settings}\n            onSubmit={async data => {\n                await updateSettings({\n                    variables: {\n                        data\n                    }\n                });\n\n                showSnackbar(\"Settings updated successfully.\");\n            }}\n        >\n            {({ Bind, form, data: formData }) => {\n                const reCaptchaEnabled = formData?.reCaptcha?.enabled;\n\n                return (\n                    <SimpleForm>\n                        {(queryInProgress || mutationInProgress) && <CircularProgress />}\n                        <SimpleFormHeader title=\"reCAPTCHA settings\" />\n                        <SimpleFormContent>\n                            <Grid>\n                                <Cell span={12}>\n                                    <Bind name={\"domain\"}>\n                                        <Input\n                                            label=\"Domain\"\n                                            description={\"E.g. https://www.mywebsite.com\"}\n                                        />\n                                    </Bind>\n                                </Cell>\n\n                                <Cell span={12}>\n                                    <Bind name={\"reCaptcha.enabled\"}>\n                                        <Switch label={\"Enable Google reCAPTCHA\"} />\n                                    </Bind>\n                                </Cell>\n                                <Cell span={12}>\n                                    <Bind name={\"reCaptcha.siteKey\"}>\n                                        <Input\n                                            disabled={!reCaptchaEnabled}\n                                            label={\"Google reCAPTCHA site key\"}\n                                            description={\n                                                <>\n                                                    A v2 Tickbox site key.{\" \"}\n                                                    <a\n                                                        href=\"https://www.google.com/recaptcha/admin\"\n                                                        target={\"_blank\"}\n                                                        rel=\"noopener noreferrer\"\n                                                    >\n                                                        Don&apos;t have a site key?\n                                                    </a>\n                                                </>\n                                            }\n                                        />\n                                    </Bind>\n                                </Cell>\n\n                                <Cell span={12}>\n                                    <Bind name={\"reCaptcha.secretKey\"}>\n                                        <Input\n                                            disabled={!reCaptchaEnabled}\n                                            label={\"Google reCAPTCHA secret key\"}\n                                            description={\n                                                <>\n                                                    A v2 Tickbox secret key.{\" \"}\n                                                    <a\n                                                        href=\"https://www.google.com/recaptcha/admin\"\n                                                        target={\"_blank\"}\n                                                        rel=\"noopener noreferrer\"\n                                                    >\n                                                        Don&apos;t have a site key?\n                                                    </a>\n                                                </>\n                                            }\n                                        />\n                                    </Bind>\n                                </Cell>\n                            </Grid>\n                        </SimpleFormContent>\n                        <SimpleFormFooter>\n                            <ButtonPrimary onClick={form.submit}>Save</ButtonPrimary>\n                        </SimpleFormFooter>\n                    </SimpleForm>\n                );\n            }}\n        </Form>\n    );\n};\n\nexport default FormsSettings;\n"],"file":"FormsSettings.js"}