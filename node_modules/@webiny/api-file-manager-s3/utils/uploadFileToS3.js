"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _formData = _interopRequireDefault(require("form-data"));

var _nodeFetch = _interopRequireDefault(require("node-fetch"));

var _default = async (buffer, preSignedPostPayload) => {
  const formData = new _formData.default(); // Add all pre signed payload field to "FormData".

  Object.keys(preSignedPostPayload.fields).forEach(key => {
    formData.append(key, preSignedPostPayload.fields[key]);
  }); // Add file content to "FormData".

  formData.append("file", buffer); // Finally make the upload request to S3.

  return (0, _nodeFetch.default)(preSignedPostPayload.url, {
    method: "POST",
    body: formData
  });
};

exports.default = _default;
//# sourceMappingURL=uploadFileToS3.js.map