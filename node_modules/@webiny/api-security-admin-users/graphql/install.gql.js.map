{"version":3,"sources":["../../src/graphql/install.gql.ts"],"names":["GraphQLSchemaPlugin","typeDefs","resolvers","SecurityQuery","version","root","args","context","security","system","getVersion","SecurityMutation","install","data","Response","e","ErrorResponse"],"mappings":";;;;;;;AAAA;;AAEA;;eAEe,IAAIA,wCAAJ,CAA2C;AACtDC,EAAAA,QAAQ;AAAE;AAAe;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAjB0D;AAkBtDC,EAAAA,SAAS,EAAE;AACPC,IAAAA,aAAa,EAAE;AACXC,MAAAA,OAAO,EAAE,OAAOC,IAAP,EAAaC,IAAb,EAAmBC,OAAnB,KAA+B;AACpC,eAAO,MAAMA,OAAO,CAACC,QAAR,CAAiBC,MAAjB,CAAwBC,UAAxB,EAAb;AACH;AAHU,KADR;AAMPC,IAAAA,gBAAgB,EAAE;AACdC,MAAAA,OAAO,EAAE,OAAOP,IAAP,EAAaC,IAAb,EAAmBC,OAAnB,KAA+B;AACpC,YAAI;AACA,gBAAMA,OAAO,CAACC,QAAR,CAAiBC,MAAjB,CAAwBG,OAAxB,CAAgCN,IAAI,CAACO,IAArC,CAAN;AACA,iBAAO,IAAIC,mBAAJ,CAAa,IAAb,CAAP;AACH,SAHD,CAGE,OAAOC,CAAP,EAAU;AACR,iBAAO,IAAIC,wBAAJ,CAAkBD,CAAlB,CAAP;AACH;AACJ;AARa;AANX;AAlB2C,CAA3C,C","sourcesContent":["import { ErrorResponse, Response } from \"@webiny/handler-graphql/responses\";\nimport { AdminUsersContext } from \"~/types\";\nimport { GraphQLSchemaPlugin } from \"@webiny/handler-graphql/plugins/GraphQLSchemaPlugin\";\n\nexport default new GraphQLSchemaPlugin<AdminUsersContext>({\n    typeDefs: /* GraphQL */ `\n        input SecurityInstallInput {\n            firstName: String!\n            lastName: String!\n            login: String!\n        }\n\n        extend type SecurityQuery {\n            \"Get installed version\"\n            version: String\n        }\n\n        extend type SecurityMutation {\n            \"Install Security\"\n            install(data: SecurityInstallInput!): SecurityBooleanResponse\n        }\n    `,\n    resolvers: {\n        SecurityQuery: {\n            version: async (root, args, context) => {\n                return await context.security.system.getVersion();\n            }\n        },\n        SecurityMutation: {\n            install: async (root, args, context) => {\n                try {\n                    await context.security.system.install(args.data);\n                    return new Response(true);\n                } catch (e) {\n                    return new ErrorResponse(e);\n                }\n            }\n        }\n    }\n});\n"],"file":"install.gql.js"}