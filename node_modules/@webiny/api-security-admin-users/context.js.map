{"version":3,"sources":["../src/context.ts"],"names":["baseContext","ContextPlugin","context","security","getTenant","console","log","tenancy","getCurrentTenant","setTenant","tenant","setCurrentTenant","apiKeyCrud","groupCrud","systemCrud","usersCrud"],"mappings":";;;;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;eAIe,MAAM;AACjB;AACJ;AACA;AACA;AACI,QAAMA,WAAW,GAAG,IAAIC,4BAAJ,CAAqC,MAAMC,OAAN,IAAiB;AACtE,QAAI,CAACA,OAAO,CAACC,QAAb,EAAuB;AACnBD,MAAAA,OAAO,CAACC,QAAR,GAAmB,EAAnB;AACH,KAHqE,CAKtE;;;AACAD,IAAAA,OAAO,CAACC,QAAR,CAAiBC,SAAjB,GAA6B,MAAM;AAC/BC,MAAAA,OAAO,CAACC,GAAR,CACK,mHADL;AAGA,aAAOJ,OAAO,CAACK,OAAR,CAAgBC,gBAAhB,EAAP;AACH,KALD,CANsE,CAatE;;;AACAN,IAAAA,OAAO,CAACC,QAAR,CAAiBM,SAAjB,GAA8BC,MAAD,IAAoB;AAC7CL,MAAAA,OAAO,CAACC,GAAR,CACK,mHADL;AAGAJ,MAAAA,OAAO,CAACK,OAAR,CAAgBI,gBAAhB,CAAiCD,MAAjC;AACH,KALD;AAMH,GApBmB,CAApB;AAsBA,SAAO,CAACV,WAAD,EAAcY,eAAd,EAA0BC,eAA1B,EAAqCC,eAArC,EAAiDC,cAAjD,CAAP;AACH,C","sourcesContent":["import { ContextPlugin } from \"@webiny/handler/plugins/ContextPlugin\";\nimport { Tenant } from \"@webiny/api-tenancy/types\";\nimport usersCrud from \"./crud/users.crud\";\nimport groupCrud from \"./crud/groups.crud\";\nimport apiKeyCrud from \"./crud/apiKey.crud\";\nimport systemCrud from \"./crud/system.crud\";\nimport { AdminUsers, AdminUsersContext } from \"./types\";\nimport { SecurityContextBase } from \"@webiny/api-security/types\";\n\nexport default () => {\n    /**\n     * We need the base context to initialize the security variable on the context\n     * and to add deprecation warnings on old methods.\n     */\n    const baseContext = new ContextPlugin<AdminUsersContext>(async context => {\n        if (!context.security) {\n            context.security = {} as AdminUsers & SecurityContextBase;\n        }\n\n        // @ts-ignore\n        context.security.getTenant = () => {\n            console.log(\n                `[DEPRECATION] \"context.security.getTenant()\" is now deprecated! Use \"context.tenancy.getCurrentTenant()\" instead.`\n            );\n            return context.tenancy.getCurrentTenant();\n        };\n\n        // @ts-ignore\n        context.security.setTenant = (tenant: Tenant) => {\n            console.log(\n                `[DEPRECATION] \"context.security.setTenant()\" is now deprecated! Use \"context.tenancy.setCurrentTenant()\" instead.`\n            );\n            context.tenancy.setCurrentTenant(tenant);\n        };\n    });\n\n    return [baseContext, apiKeyCrud, groupCrud, systemCrud, usersCrud];\n};\n"],"file":"context.js"}