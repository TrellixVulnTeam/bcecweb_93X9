{"version":3,"sources":["../../../../../src/render/plugins/elementSettings/margin/index.ts"],"names":["kebabCase","applyPerDeviceStyleWithFallback","validateSpacingValue","value","includes","name","type","renderStyle","element","style","margin","forEach","side","displayMode","fallbackMode","fallbackMarginValue","adv"],"mappings":";AACA,OAAOA,SAAP,MAAsB,kBAAtB;AAEA,SAASC,+BAAT;;AAEA,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAAC,KAAK,EAAI;AAClC,MAAI,CAACA,KAAL,EAAY;AACR,WAAO,KAAP;AACH;;AACD,MAAIA,KAAK,CAACC,QAAN,CAAe,MAAf,CAAJ,EAA4B;AACxB,WAAO,MAAP;AACH;;AAED,SAAOD,KAAP;AACH,CATD;;AAWA,eAAe;AACXE,EAAAA,IAAI,EAAE,qCADK;AAEXC,EAAAA,IAAI,EAAE,8BAFK;AAGXC,EAAAA,WAHW,6BAGqB;AAAA,QAAlBC,OAAkB,QAAlBA,OAAkB;AAAA,QAATC,KAAS,QAATA,KAAS;;AAC5B,gBAAmB,KAAID,OAAJ,EAAa,eAAb,EAA8B,EAA9B,CAAnB;AAAA,QAAQE,MAAR,SAAQA,MAAR;;AAEA,KAAC,KAAD,EAAQ,OAAR,EAAiB,QAAjB,EAA2B,MAA3B,EAAmCC,OAAnC,CAA2C,UAAAC,IAAI,EAAI;AAC/C;AACAX,MAAAA,+BAA+B,CAAC,iBAAmC;AAAA,YAAhCY,WAAgC,SAAhCA,WAAgC;AAAA,YAAnBC,YAAmB,SAAnBA,YAAmB;;AAC/D,YAAMC,mBAAmB,GAAG,KACxBN,KADwB,cAEnBT,SAAS,CAACc,YAAD,CAFU,qBAEeF,IAFf,EAA5B;;AAIA,YAAMI,GAAG,GAAG,KAAIN,MAAJ,YAAeG,WAAf,gBAAuC,KAAvC,CAAZ;;AACA,YAAMV,KAAK,GAAGa,GAAG,GACX,KAAIN,MAAJ,YAAeG,WAAf,cAA8BD,IAA9B,GAAsCG,mBAAtC,CADW,GAEX,KAAIL,MAAJ,YAAeG,WAAf,WAAkCE,mBAAlC,CAFN;AAGAN,QAAAA,KAAK,aAAMT,SAAS,CAACa,WAAD,CAAf,qBAAuCD,IAAvC,EAAL,GAAsDV,oBAAoB,CAACC,KAAD,CAA1E;AACH,OAV8B,CAA/B;AAWH,KAbD;AAeA,WAAOM,KAAP;AACH;AAtBU,CAAf","sourcesContent":["import { get } from \"lodash\";\nimport kebabCase from \"lodash/kebabCase\";\nimport { PbRenderElementStylePlugin } from \"../../../../types\";\nimport { applyPerDeviceStyleWithFallback } from \"../../../utils\";\n\nconst validateSpacingValue = value => {\n    if (!value) {\n        return \"0px\";\n    }\n    if (value.includes(\"auto\")) {\n        return \"auto\";\n    }\n\n    return value;\n};\n\nexport default {\n    name: \"pb-render-page-element-style-margin\",\n    type: \"pb-render-page-element-style\",\n    renderStyle({ element, style }) {\n        const { margin } = get(element, \"data.settings\", {});\n\n        [\"top\", \"right\", \"bottom\", \"left\"].forEach(side => {\n            // Set per-device property value\n            applyPerDeviceStyleWithFallback(({ displayMode, fallbackMode }) => {\n                const fallbackMarginValue = get(\n                    style,\n                    `--${kebabCase(fallbackMode)}-margin-${side}`\n                );\n                const adv = get(margin, `${displayMode}.advanced`, false);\n                const value = adv\n                    ? get(margin, `${displayMode}.${side}`, fallbackMarginValue)\n                    : get(margin, `${displayMode}.all`, fallbackMarginValue);\n                style[`--${kebabCase(displayMode)}-margin-${side}`] = validateSpacingValue(value);\n            });\n        });\n\n        return style;\n    }\n} as PbRenderElementStylePlugin;\n"],"file":"index.js"}