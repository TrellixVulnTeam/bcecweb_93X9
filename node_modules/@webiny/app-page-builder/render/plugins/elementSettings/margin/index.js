import _get from "lodash/get";
import kebabCase from "lodash/kebabCase";
import { applyPerDeviceStyleWithFallback } from "../../../utils";

var validateSpacingValue = function validateSpacingValue(value) {
  if (!value) {
    return "0px";
  }

  if (value.includes("auto")) {
    return "auto";
  }

  return value;
};

export default {
  name: "pb-render-page-element-style-margin",
  type: "pb-render-page-element-style",
  renderStyle: function renderStyle(_ref) {
    var element = _ref.element,
        style = _ref.style;

    var _get2 = _get(element, "data.settings", {}),
        margin = _get2.margin;

    ["top", "right", "bottom", "left"].forEach(function (side) {
      // Set per-device property value
      applyPerDeviceStyleWithFallback(function (_ref2) {
        var displayMode = _ref2.displayMode,
            fallbackMode = _ref2.fallbackMode;

        var fallbackMarginValue = _get(style, "--".concat(kebabCase(fallbackMode), "-margin-").concat(side));

        var adv = _get(margin, "".concat(displayMode, ".advanced"), false);

        var value = adv ? _get(margin, "".concat(displayMode, ".").concat(side), fallbackMarginValue) : _get(margin, "".concat(displayMode, ".all"), fallbackMarginValue);
        style["--".concat(kebabCase(displayMode), "-margin-").concat(side)] = validateSpacingValue(value);
      });
    });
    return style;
  }
};
//# sourceMappingURL=index.js.map