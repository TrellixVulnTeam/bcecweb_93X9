{"version":3,"sources":["../../../../src/editor/recoil/eventActions/executeAction.ts"],"names":["executeAction","state","meta","action","args","previousResult","previousState","previousActions","actions","result","concat","executeAsyncAction"],"mappings":";;;AAQA,OAAO,IAAMA,aAAa,GAAG,SAAhBA,aAAgB,CACzBC,KADyB,EAEzBC,IAFyB,EAGzBC,MAHyB,EAIzBC,IAJyB,EAKzBC,cALyB,EAMkB;AAC3C,MAAMC,aAAa,GAAG,CAAAD,cAAc,SAAd,IAAAA,cAAc,WAAd,YAAAA,cAAc,CAAEJ,KAAhB,KAAyB,EAA/C;AACA,MAAMM,eAAe,GAAG,CAAAF,cAAc,SAAd,IAAAA,cAAc,WAAd,YAAAA,cAAc,CAAEG,OAAhB,KAA2B,EAAnD;AACA,MAAMC,MAAM,GAAGN,MAAM,iCACZF,KADY,GACFK,aADE,GAEjBJ,IAFiB,EAGjBE,IAHiB,CAArB;AAMA,SAAO;AACHH,IAAAA,KAAK,kCACEK,aADF,GAEEG,MAAM,CAACR,KAFT,CADF;AAKHO,IAAAA,OAAO,EAAED,eAAe,CAACG,MAAhB,CAAuBD,MAAM,CAACD,OAAP,IAAkB,EAAzC;AALN,GAAP;AAOH,CAtBM;AAwBP,OAAO,IAAMG,kBAAkB;AAAA,sEAAG,iBAC9BV,KAD8B,EAE9BC,IAF8B,EAG9BC,MAH8B,EAI9BC,IAJ8B,EAK9BC,cAL8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAOxBC,YAAAA,aAPwB,GAOR,CAAAD,cAAc,SAAd,IAAAA,cAAc,WAAd,YAAAA,cAAc,CAAEJ,KAAhB,KAAyB,EAPjB;AAQxBM,YAAAA,eARwB,GAQN,CAAAF,cAAc,SAAd,IAAAA,cAAc,WAAd,YAAAA,cAAc,CAAEG,OAAhB,KAA2B,EARrB;AAAA;AAAA,mBASTL,MAAM,iCAAMF,KAAN,GAAgBK,aAAhB,GAAwCJ,IAAxC,EAA8CE,IAA9C,CATG;;AAAA;AASxBK,YAAAA,MATwB;AAAA,6CAWvB;AACHR,cAAAA,KAAK,kCACEK,aADF,GAEEG,MAAM,CAACR,KAFT,CADF;AAKHO,cAAAA,OAAO,EAAED,eAAe,CAACG,MAAhB,CAAuBD,MAAM,CAACD,OAAP,IAAkB,EAAzC;AALN,aAXuB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAlBG,kBAAkB;AAAA;AAAA;AAAA,GAAxB","sourcesContent":["import { PbState } from \"../modules/types\";\nimport {\n    EventActionHandlerCallableArgs,\n    EventActionCallable,\n    EventActionHandlerActionCallableResponse,\n    EventActionHandlerMeta\n} from \"../../../types\";\n\nexport const executeAction = <T extends EventActionHandlerCallableArgs = any>(\n    state: PbState,\n    meta: EventActionHandlerMeta,\n    action: EventActionCallable<T>,\n    args: T,\n    previousResult?: EventActionHandlerActionCallableResponse\n): EventActionHandlerActionCallableResponse => {\n    const previousState = previousResult?.state || {};\n    const previousActions = previousResult?.actions || [];\n    const result = action(\n        { ...state, ...previousState } as any,\n        meta,\n        args\n    ) as EventActionHandlerActionCallableResponse;\n\n    return {\n        state: {\n            ...previousState,\n            ...result.state\n        },\n        actions: previousActions.concat(result.actions || [])\n    };\n};\n\nexport const executeAsyncAction = async <T extends EventActionHandlerCallableArgs = any>(\n    state: PbState,\n    meta: EventActionHandlerMeta,\n    action: EventActionCallable<T>,\n    args: T,\n    previousResult?: EventActionHandlerActionCallableResponse\n): Promise<EventActionHandlerActionCallableResponse> => {\n    const previousState = previousResult?.state || {};\n    const previousActions = previousResult?.actions || [];\n    const result = await action({ ...state, ...previousState } as any, meta, args);\n\n    return {\n        state: {\n            ...previousState,\n            ...result.state\n        },\n        actions: previousActions.concat(result.actions || [])\n    };\n};\n"],"file":"executeAction.js"}