import _objectSpread from "@babel/runtime/helpers/objectSpread2";
import React from "react";
import { Editor as EditorComponent } from "./components/Editor";
import { EditorProvider } from "./contexts/EditorProvider";
import { RecoilRoot } from "recoil";
import { rootElementAtom, pageAtom, elementsAtom } from "./recoil/modules";
import { flattenElements } from "./helpers";
export var Editor = function Editor(_ref) {
  var page = _ref.page,
      revisions = _ref.revisions;
  return /*#__PURE__*/React.createElement(RecoilRoot, {
    initializeState: function initializeState(_ref2) {
      var set = _ref2.set;

      /* Here we initialize elementsAtom and rootElement if it exists */
      set(rootElementAtom, page.content.id);
      var elements = flattenElements(page.content);
      Object.keys(elements).forEach(function (key) {
        set(elementsAtom(key), elements[key]);
      });

      var pageData = _objectSpread(_objectSpread({}, page), {}, {
        content: undefined
      });

      set(pageAtom, pageData);
    }
  }, /*#__PURE__*/React.createElement(EditorProvider, null, /*#__PURE__*/React.createElement(EditorComponent, {
    page: page,
    revisions: revisions
  })));
};
//# sourceMappingURL=index.js.map