{"version":3,"sources":["../../../../../src/editor/plugins/elementSettings/delete/DeleteAction.ts"],"names":["React","useCallback","useEventActionHandler","DeleteElementActionEvent","activeElementAtom","elementByIdSelector","plugins","useRecoilValue","DeleteAction","children","eventActionHandler","activeElementId","element","onClick","trigger","plugin","byType","find","pl","elementType","type","canDelete","cloneElement","memo"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,WAAhB,QAAmC,OAAnC;AACA,SAASC,qBAAT;AACA,SAASC,wBAAT;AACA,SAASC,iBAAT,EAA4BC,mBAA5B;AACA,SAASC,OAAT,QAAwB,iBAAxB;AAEA,SAASC,cAAT,QAA+B,QAA/B;;AAKA,IAAMC,YAA4D,GAAG,SAA/DA,YAA+D,OAAkB;AAAA,MAAfC,QAAe,QAAfA,QAAe;AACnF,MAAMC,kBAAkB,GAAGR,qBAAqB,EAAhD;AACA,MAAMS,eAAe,GAAGJ,cAAc,CAACH,iBAAD,CAAtC;AACA,MAAMQ,OAAO,GAAGL,cAAc,CAACF,mBAAmB,CAACM,eAAD,CAApB,CAA9B;;AAEA,MAAI,CAACC,OAAL,EAAc;AACV,WAAO,IAAP;AACH;;AAED,MAAMC,OAAO,GAAGZ,WAAW,CAAC,YAAM;AAC9BS,IAAAA,kBAAkB,CAACI,OAAnB,CACI,IAAIX,wBAAJ,CAA6B;AACzBS,MAAAA,OAAO,EAAPA;AADyB,KAA7B,CADJ;AAKH,GAN0B,EAMxB,CAACD,eAAD,CANwB,CAA3B;AAQA,MAAMI,MAAM,GAAGT,OAAO,CACjBU,MADU,CACwB,wBADxB,EAEVC,IAFU,CAEL,UAAAC,EAAE;AAAA,WAAIA,EAAE,CAACC,WAAH,KAAmBP,OAAO,CAACQ,IAA/B;AAAA,GAFG,CAAf;;AAIA,MAAI,CAACL,MAAL,EAAa;AACT,WAAO,IAAP;AACH;;AAED,MAAI,OAAOA,MAAM,CAACM,SAAd,KAA4B,UAAhC,EAA4C;AACxC,QAAI,CAACN,MAAM,CAACM,SAAP,CAAiB;AAAET,MAAAA,OAAO,EAAPA;AAAF,KAAjB,CAAL,EAAoC;AAChC,aAAO,IAAP;AACH;AACJ;;AAED,sBAAOZ,KAAK,CAACsB,YAAN,CAAmBb,QAAnB,EAA6B;AAAEI,IAAAA,OAAO,EAAPA;AAAF,GAA7B,CAAP;AACH,CAhCD;;AAkCA,4BAAeb,KAAK,CAACuB,IAAN,CAAWf,YAAX,CAAf","sourcesContent":["import React, { useCallback } from \"react\";\nimport { useEventActionHandler } from \"../../../hooks/useEventActionHandler\";\nimport { DeleteElementActionEvent } from \"../../../recoil/actions\";\nimport { activeElementAtom, elementByIdSelector } from \"../../../recoil/modules\";\nimport { plugins } from \"@webiny/plugins\";\nimport { PbEditorPageElementPlugin } from \"../../../../types\";\nimport { useRecoilValue } from \"recoil\";\n\ntype DeleteActionPropsType = {\n    children: React.ReactElement;\n};\nconst DeleteAction: React.FunctionComponent<DeleteActionPropsType> = ({ children }) => {\n    const eventActionHandler = useEventActionHandler();\n    const activeElementId = useRecoilValue(activeElementAtom);\n    const element = useRecoilValue(elementByIdSelector(activeElementId));\n\n    if (!element) {\n        return null;\n    }\n\n    const onClick = useCallback(() => {\n        eventActionHandler.trigger(\n            new DeleteElementActionEvent({\n                element\n            })\n        );\n    }, [activeElementId]);\n\n    const plugin = plugins\n        .byType<PbEditorPageElementPlugin>(\"pb-editor-page-element\")\n        .find(pl => pl.elementType === element.type);\n\n    if (!plugin) {\n        return null;\n    }\n\n    if (typeof plugin.canDelete === \"function\") {\n        if (!plugin.canDelete({ element })) {\n            return null;\n        }\n    }\n\n    return React.cloneElement(children, { onClick });\n};\n\nexport default React.memo(DeleteAction);\n"],"file":"DeleteAction.js"}