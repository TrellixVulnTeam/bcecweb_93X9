import React from "react";
import { useEventActionHandler } from "../../../hooks/useEventActionHandler";
import { activeElementAtom, elementByIdSelector } from "../../../recoil/modules";
import { plugins } from "@webiny/plugins";
import { useRecoilValue } from "recoil";
import { CloneElementActionEvent } from "../../../recoil/actions/cloneElement";

var CloneAction = function CloneAction(_ref) {
  var children = _ref.children;
  var eventActionHandler = useEventActionHandler();
  var activeElementId = useRecoilValue(activeElementAtom);
  var element = useRecoilValue(elementByIdSelector(activeElementId));

  if (!element) {
    return null;
  }

  var onClick = function onClick() {
    eventActionHandler.trigger(new CloneElementActionEvent({
      element: element
    }));
  };

  var plugin = plugins.byType("pb-editor-page-element").find(function (pl) {
    return pl.elementType === element.type;
  });

  if (!plugin) {
    return null;
  }

  return /*#__PURE__*/React.cloneElement(children, {
    onClick: onClick
  });
};

export default /*#__PURE__*/React.memo(CloneAction);
//# sourceMappingURL=CloneAction.js.map