{"version":3,"sources":["../../../../../src/editor/plugins/elementSettings/align/VerticalAlignSettings.tsx"],"names":["React","useMemo","css","useRecoilValue","classNames","get","set","merge","plugins","Tooltip","IconButton","useEventActionHandler","UpdateElementActionEvent","activeElementAtom","uiAtom","elementWithChildrenByIdSelector","applyFallbackDisplayMode","ContentWrapper","Accordion","classes","activeIcon","color","icon","AlignTypesEnum","icons","start","center","end","alignments","Object","keys","iconDescriptions","DATA_NAMESPACE","VerticalAlignSettings","defaultAccordionValue","displayMode","propName","handler","activeElementId","element","fallbackValue","mode","align","byType","find","pl","config","activeEditorModeConfig","updateElement","trigger","history","onClick","type","newElement","plugin","elementType","map","memo"],"mappings":"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","sourcesContent":["import React, { useMemo } from \"react\";\nimport { css } from \"emotion\";\nimport { useRecoilValue } from \"recoil\";\nimport classNames from \"classnames\";\nimport get from \"lodash/get\";\nimport set from \"lodash/set\";\nimport merge from \"lodash/merge\";\nimport { plugins } from \"@webiny/plugins\";\nimport { Tooltip } from \"@webiny/ui/Tooltip\";\nimport { IconButton } from \"@webiny/ui/Button\";\nimport {\n    PbEditorPageElementPlugin,\n    PbEditorElement,\n    PbEditorPageElementSettingsRenderComponentProps,\n    PbEditorResponsiveModePlugin\n} from \"../../../../types\";\nimport { useEventActionHandler } from \"../../../hooks/useEventActionHandler\";\nimport { UpdateElementActionEvent } from \"../../../recoil/actions\";\nimport {\n    activeElementAtom,\n    uiAtom,\n    elementWithChildrenByIdSelector\n} from \"../../../recoil/modules\";\nimport { applyFallbackDisplayMode } from \"../elementSettingsUtils\";\n// Components\nimport { ContentWrapper } from \"../components/StyledComponents\";\nimport Accordion from \"../components/Accordion\";\n// Icons\nimport { ReactComponent as AlignTopIcon } from \"./icons/align_vertical_top.svg\";\nimport { ReactComponent as AlignCenterIcon } from \"./icons/align_vertical_center.svg\";\nimport { ReactComponent as AlignBottomIcon } from \"./icons/align_vertical_bottom.svg\";\n\nconst classes = {\n    activeIcon: css({\n        \"&.mdc-icon-button\": {\n            color: \"var(--mdc-theme-primary)\"\n        }\n    }),\n    icon: css({\n        \"&.mdc-icon-button\": {\n            color: \"var(--mdc-theme-text-primary-on-background)\"\n        }\n    })\n};\n\ntype IconsType = {\n    [key: string]: React.ReactElement;\n};\n\nenum AlignTypesEnum {\n    start = \"flex-start\",\n    center = \"center\",\n    end = \"flex-end\"\n}\n\n// Icons map for dynamic render\nconst icons: IconsType = {\n    [AlignTypesEnum.start]: <AlignTopIcon />,\n    [AlignTypesEnum.center]: <AlignCenterIcon />,\n    [AlignTypesEnum.end]: <AlignBottomIcon />\n};\nconst alignments = Object.keys(icons);\n\nconst iconDescriptions = {\n    [AlignTypesEnum.start]: \"Align top\",\n    [AlignTypesEnum.center]: \"Align center\",\n    [AlignTypesEnum.end]: \"Align bottom\"\n};\n\nconst DATA_NAMESPACE = \"data.settings.verticalAlign\";\n\nconst VerticalAlignSettings: React.FunctionComponent<PbEditorPageElementSettingsRenderComponentProps> =\n    ({ defaultAccordionValue }) => {\n        const { displayMode } = useRecoilValue(uiAtom);\n        const propName = `${DATA_NAMESPACE}.${displayMode}`;\n        const handler = useEventActionHandler();\n        const activeElementId = useRecoilValue(activeElementAtom);\n        const element = useRecoilValue(elementWithChildrenByIdSelector(activeElementId));\n        const fallbackValue = useMemo(\n            () =>\n                applyFallbackDisplayMode(displayMode, mode =>\n                    get(element, `${DATA_NAMESPACE}.${mode}`)\n                ),\n            [displayMode]\n        );\n        const align = get(element, propName, fallbackValue || AlignTypesEnum.center);\n\n        const { config: activeEditorModeConfig } = useMemo(() => {\n            return plugins\n                .byType<PbEditorResponsiveModePlugin>(\"pb-editor-responsive-mode\")\n                .find(pl => pl.config.displayMode === displayMode);\n        }, [displayMode]);\n\n        const updateElement = (element: PbEditorElement) => {\n            handler.trigger(\n                new UpdateElementActionEvent({\n                    element,\n                    history: true\n                })\n            );\n        };\n\n        const onClick = (type: AlignTypesEnum) => {\n            const newElement = merge({}, element, set({}, propName, type));\n            updateElement(newElement);\n        };\n\n        const plugin = plugins\n            .byType<PbEditorPageElementPlugin>(\"pb-editor-page-element\")\n            .find(pl => pl.elementType === element.type);\n\n        if (!plugin) {\n            return null;\n        }\n\n        return (\n            <Accordion\n                title={\"Vertical align\"}\n                defaultValue={defaultAccordionValue}\n                icon={\n                    <Tooltip\n                        content={`Changes will apply for ${activeEditorModeConfig.displayMode}`}\n                    >\n                        {activeEditorModeConfig.icon}\n                    </Tooltip>\n                }\n            >\n                <ContentWrapper>\n                    {alignments.map(type => (\n                        <Tooltip key={type} content={iconDescriptions[type]} placement={\"top\"}>\n                            <IconButton\n                                className={classNames({\n                                    [classes.activeIcon]: align === type,\n                                    [classes.icon]: align !== type\n                                })}\n                                icon={icons[type]}\n                                onClick={() => onClick(type as AlignTypesEnum)}\n                            />\n                        </Tooltip>\n                    ))}\n                </ContentWrapper>\n            </Accordion>\n        );\n    };\n\nexport default React.memo(VerticalAlignSettings);\n"],"file":"VerticalAlignSettings.js"}