import _slicedToArray from "@babel/runtime/helpers/slicedToArray";
import React from "react";
import { pageAtom } from "../../../recoil/modules";
import { MenuItem } from "@webiny/ui/Menu";
import { useConfigureWebsiteUrlDialog } from "../../../../admin/hooks/useConfigureWebsiteUrl";
import { usePageBuilderSettings } from "../../../../admin/hooks/usePageBuilderSettings";
import { useSiteStatus } from "../../../../admin/hooks/useSiteStatus";
import { ListItemGraphic } from "@webiny/ui/List";
import { Icon } from "@webiny/ui/Icon";
import { ReactComponent as PreviewIcon } from "@svgr/webpack!../../../../admin/assets/visibility.svg";
import { useRecoilValue } from "recoil";
var openTarget = window.Cypress ? "_self" : "_blank";

var PreviewPageButton = function PreviewPageButton() {
  var page = useRecoilValue(pageAtom);

  var _usePageBuilderSettin = usePageBuilderSettings(),
      getPageUrl = _usePageBuilderSettin.getPageUrl,
      getWebsiteUrl = _usePageBuilderSettin.getWebsiteUrl;

  var _useSiteStatus = useSiteStatus(getWebsiteUrl()),
      _useSiteStatus2 = _slicedToArray(_useSiteStatus, 2),
      isSiteRunning = _useSiteStatus2[0],
      refreshSiteStatus = _useSiteStatus2[1];

  var _useConfigureWebsiteU = useConfigureWebsiteUrlDialog(getWebsiteUrl(), refreshSiteStatus),
      showConfigureWebsiteUrlDialog = _useConfigureWebsiteU.showConfigureWebsiteUrlDialog;

  return /*#__PURE__*/React.createElement(MenuItem, {
    onClick: function onClick() {
      if (isSiteRunning) {
        window.open(getPageUrl(page, true), openTarget, "noopener");
      } else {
        showConfigureWebsiteUrlDialog();
      }
    },
    "data-testid": "pb-editor-page-options-menu-preview"
  }, /*#__PURE__*/React.createElement(ListItemGraphic, null, /*#__PURE__*/React.createElement(Icon, {
    icon: /*#__PURE__*/React.createElement(PreviewIcon, null)
  })), "Preview");
};

export default PreviewPageButton;
//# sourceMappingURL=PreviewPageButton.js.map