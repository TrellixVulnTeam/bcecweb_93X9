{"version":3,"sources":["../../../../../src/editor/plugins/elements/block/index.tsx"],"names":["React","kebabCase","Block","CreateElementActionEvent","DeleteElementActionEvent","updateElementAction","addElementToParent","createDroppedElement","DisplayMode","AfterDropElementActionEvent","createInitialPerDeviceSettingValue","args","elementSettings","elementType","name","type","settings","create","options","defaultValue","elements","data","width","value","DESKTOP","margin","top","right","bottom","left","advanced","padding","all","horizontalAlignFlex","verticalAlign","render","props","onReceived","source","target","position","state","meta","element","block","result","history","actions","push","id"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport kebabCase from \"lodash/kebabCase\";\nimport Block from \"./Block\";\nimport {\n    CreateElementActionEvent,\n    DeleteElementActionEvent,\n    updateElementAction\n} from \"../../../recoil/actions\";\nimport { addElementToParent, createDroppedElement } from \"../../../helpers\";\nimport {\n    DisplayMode,\n    EventActionHandlerActionCallableResponse,\n    PbEditorPageElementPlugin,\n    PbEditorElement,\n    PbEditorElementPluginArgs\n} from \"../../../../types\";\nimport { AfterDropElementActionEvent } from \"../../../recoil/actions/afterDropElement\";\nimport { createInitialPerDeviceSettingValue } from \"../../elementSettings/elementSettingsUtils\";\n\nexport default (args: PbEditorElementPluginArgs = {}): PbEditorPageElementPlugin => {\n    const elementSettings = [\n        \"pb-editor-page-element-style-settings-background\",\n        \"pb-editor-page-element-style-settings-animation\",\n        \"pb-editor-page-element-style-settings-border\",\n        \"pb-editor-page-element-style-settings-shadow\",\n        \"pb-editor-page-element-style-settings-padding\",\n        \"pb-editor-page-element-style-settings-margin\",\n        \"pb-editor-page-element-style-settings-width\",\n        \"pb-editor-page-element-style-settings-height\",\n        \"pb-editor-page-element-style-settings-horizontal-align-flex\",\n        \"pb-editor-page-element-style-settings-vertical-align\",\n        \"pb-editor-page-element-settings-clone\",\n        \"pb-editor-page-element-settings-delete\"\n    ];\n\n    const elementType = kebabCase(args.elementType || \"block\");\n\n    return {\n        name: `pb-editor-page-element-${elementType}`,\n        type: \"pb-editor-page-element\",\n        elementType: elementType,\n        settings:\n            typeof args.settings === \"function\" ? args.settings(elementSettings) : elementSettings,\n        create(options = {}) {\n            const defaultValue = {\n                type: this.elementType,\n                elements: [],\n                data: {\n                    settings: {\n                        width: createInitialPerDeviceSettingValue(\n                            { value: \"100%\" },\n                            DisplayMode.DESKTOP\n                        ),\n                        margin: {\n                            ...createInitialPerDeviceSettingValue(\n                                {\n                                    top: \"0px\",\n                                    right: \"0px\",\n                                    bottom: \"0px\",\n                                    left: \"0px\",\n                                    advanced: true\n                                },\n                                DisplayMode.DESKTOP\n                            )\n                        },\n                        padding: createInitialPerDeviceSettingValue(\n                            { all: \"10px\" },\n                            DisplayMode.DESKTOP\n                        ),\n                        horizontalAlignFlex: createInitialPerDeviceSettingValue(\n                            \"center\",\n                            DisplayMode.DESKTOP\n                        ),\n                        verticalAlign: createInitialPerDeviceSettingValue(\n                            \"flex-start\",\n                            DisplayMode.DESKTOP\n                        )\n                    }\n                },\n                ...options\n            };\n\n            return typeof args.create === \"function\" ? args.create(defaultValue) : defaultValue;\n        },\n        render(props) {\n            return <Block {...props} />;\n        },\n        // This callback is executed when another element is dropped on the drop zones with type \"block\"\n        onReceived({ source, target, position = null, state, meta }) {\n            const element = createDroppedElement(source as any, target);\n\n            const block = addElementToParent(element, target, position);\n\n            const result = updateElementAction(state, meta, {\n                element: block,\n                history: true\n            }) as EventActionHandlerActionCallableResponse;\n\n            result.actions.push(\n                new AfterDropElementActionEvent({\n                    element\n                })\n            );\n\n            if (source.id) {\n                // Delete source element\n                result.actions.push(\n                    new DeleteElementActionEvent({\n                        element: source as PbEditorElement\n                    })\n                );\n\n                return result;\n            }\n\n            result.actions.push(\n                new CreateElementActionEvent({\n                    element,\n                    source: source as any\n                })\n            );\n            return result;\n        }\n    };\n};\n"],"file":"index.js"}