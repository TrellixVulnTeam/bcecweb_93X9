{"version":3,"sources":["../../../src/editor/components/Draggable.tsx"],"names":["React","useDrag","DragPreviewImage","emptyImage","Draggable","memo","props","children","beginDrag","endDrag","target","enabled","item","type","collect","monitor","isDragging","begin","end","drag","preview"],"mappings":";;AAAA,OAAOA,KAAP,MAAoC,OAApC;AACA,SACIC,OADJ,EAEIC,gBAFJ,QAMO,WANP;AAQA,IAAMC,UAAU,GAAG,4EAAnB;AAmBA,IAAMC,SAAS,gBAAGJ,KAAK,CAACK,IAAN,CAAW,UAACC,KAAD,EAA2B;AACpD,MAAQC,QAAR,GAAiED,KAAjE,CAAQC,QAAR;AAAA,MAAkBC,SAAlB,GAAiEF,KAAjE,CAAkBE,SAAlB;AAAA,MAA6BC,OAA7B,GAAiEH,KAAjE,CAA6BG,OAA7B;AAAA,MAAsCC,MAAtC,GAAiEJ,KAAjE,CAAsCI,MAAtC;AAAA,uBAAiEJ,KAAjE,CAA8CK,OAA9C;AAAA,MAA8CA,OAA9C,+BAAwD,IAAxD;;AAEA,iBAAwCV,OAAO,CAAC;AAC5CW,IAAAA,IAAI,EAAE;AAAEC,MAAAA,IAAI,EAAE,SAAR;AAAmBH,MAAAA,MAAM,EAANA;AAAnB,KADsC;AAE5CI,IAAAA,OAAO,EAAE,iBAAAC,OAAO;AAAA,aAAK;AACjBC,QAAAA,UAAU,EAAED,OAAO,CAACC,UAAR;AADK,OAAL;AAAA,KAF4B;AAK5CC,IAAAA,KAL4C,iBAKtCF,OALsC,EAK7B;AACX,UAAI,OAAOP,SAAP,KAAqB,UAAzB,EAAqC;AACjC,eAAOA,SAAS,CAACF,KAAD,EAAQS,OAAR,CAAhB;AACH;;AACD,+BAAYT,KAAZ;AACH,KAV2C;AAW5CY,IAAAA,GAX4C,eAWxCN,IAXwC,EAWlCG,OAXkC,EAWzB;AACf,UAAI,OAAON,OAAP,KAAmB,UAAvB,EAAmC;AAC/B,eAAOA,OAAO,CAACG,IAAD,EAAOG,OAAP,CAAd;AACH;AACJ;AAf2C,GAAD,CAA/C;AAAA;AAAA,MAASC,UAAT,gBAASA,UAAT;AAAA,MAAuBG,IAAvB;AAAA,MAA6BC,OAA7B;;AAkBA,MAAI,CAACT,OAAL,EAAc;AACV,WAAOJ,QAAQ,CAAC;AAAES,MAAAA,UAAU,EAAE,KAAd;AAAqBG,MAAAA,IAAI,EAAE;AAA3B,KAAD,CAAf;AACH;;AAED,sBACI,uDACI,oBAAC,gBAAD;AAAkB,IAAA,OAAO,EAAEC,OAA3B;AAAoC,IAAA,GAAG,EAAEjB;AAAzC,IADJ,EAEKI,QAAQ,CAAC;AAAES,IAAAA,UAAU,EAAVA,UAAF;AAAcG,IAAAA,IAAI,EAAJA;AAAd,GAAD,CAFb,CADJ;AAMH,CA/BiB,CAAlB;AAiCA,eAAef,SAAf","sourcesContent":["import React, { ReactElement } from \"react\";\nimport {\n    useDrag,\n    DragPreviewImage,\n    ConnectDragSource,\n    DragSourceMonitor,\n    DragObjectWithType\n} from \"react-dnd\";\n\nconst emptyImage = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n\nexport type DraggableChildrenFunction = (params: {\n    isDragging: boolean;\n    drag: ConnectDragSource;\n}) => ReactElement;\n\nexport type DraggableProps = {\n    children: DraggableChildrenFunction;\n    beginDrag(props: DraggableProps, monitor: DragSourceMonitor): any;\n    endDrag(item: any, monitor: DragSourceMonitor): void;\n    target: string[];\n    enabled: boolean;\n};\n\nexport type DraggableItem = DragObjectWithType & {\n    target: string[];\n};\n\nconst Draggable = React.memo((props: DraggableProps) => {\n    const { children, beginDrag, endDrag, target, enabled = true } = props;\n\n    const [{ isDragging }, drag, preview] = useDrag({\n        item: { type: \"element\", target } as DraggableItem,\n        collect: monitor => ({\n            isDragging: monitor.isDragging()\n        }),\n        begin(monitor) {\n            if (typeof beginDrag === \"function\") {\n                return beginDrag(props, monitor);\n            }\n            return { ...props };\n        },\n        end(item, monitor) {\n            if (typeof endDrag === \"function\") {\n                return endDrag(item, monitor);\n            }\n        }\n    });\n\n    if (!enabled) {\n        return children({ isDragging: false, drag: null });\n    }\n\n    return (\n        <>\n            <DragPreviewImage connect={preview} src={emptyImage} />\n            {children({ isDragging, drag })}\n        </>\n    );\n});\n\nexport default Draggable;\n"],"file":"Draggable.js"}