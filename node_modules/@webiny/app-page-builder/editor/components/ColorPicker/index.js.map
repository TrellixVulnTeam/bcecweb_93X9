{"version":3,"sources":["../../../../src/editor/components/ColorPicker/index.tsx"],"names":["React","useState","useCallback","classnames","styled","css","ChromePicker","Menu","usePageBuilder","ColorPickerStyle","display","flexWrap","justifyContent","CompactColorPicker","overflow","ColorList","ColorBox","cursor","width","height","margin","padding","borderRadius","boxSizing","transition","color","Color","border","alignItems","boxShadow","content","position","top","left","zIndex","opacity","transform","transparent","backgroundSize","backgroundImage","chromePickerStyles","iconPaletteStyle","marginTop","styles","selectedColor","swatch","background","ColorPicker","value","onChange","onChangeComplete","compact","handlerClassName","showPicker","setShowPicker","getColorValue","rgb","r","g","b","a","onColorChange","onColorChangeComplete","hidePicker","togglePicker","e","stopPropagation","theme","themeColor","colorPicker","Object","values","colors","map","index","backgroundColor","cloneElement","style","memo"],"mappings":"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","sourcesContent":["import React, { useState, useCallback } from \"react\";\nimport classnames from \"classnames\";\nimport styled from \"@emotion/styled\";\nimport { css } from \"emotion\";\nimport { isEqual } from \"lodash\";\nimport { ChromePicker } from \"react-color\";\nimport { Menu } from \"@webiny/ui/Menu\";\nimport { usePageBuilder } from \"../../../hooks/usePageBuilder\";\nimport { ReactComponent as IconPalette } from \"../../assets/icons/round-color_lens-24px.svg\";\n\nconst ColorPickerStyle = styled(\"div\")({\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    justifyContent: \"space-between\"\n});\n\nconst CompactColorPicker = styled(\"div\")({\n    \".mdc-menu-surface\": {\n        overflow: \"visible\"\n    }\n});\n\nconst ColorList = styled(\"div\")({\n    display: \"flex\"\n});\n\nconst ColorBox = styled(\"div\")({\n    cursor: \"pointer\",\n    width: 50,\n    height: 40,\n    margin: 10,\n    padding: 5,\n    borderRadius: 2,\n    boxSizing: \"border-box\",\n    transition: \"transform 0.2s\",\n    color: \"var(--mdc-theme-text-secondary-on-background)\"\n});\n\nconst Color = styled(\"div\")({\n    cursor: \"pointer\",\n    width: 40,\n    height: 30,\n    border: \"1px solid var(--mdc-theme-on-background)\",\n    transition: \"transform 0.2s, scale 0.2s\",\n    display: \"flex\",\n    alignItems: \"center\",\n    \"&::after\": {\n        boxShadow: \"0 0.25rem 0.125rem 0 rgba(0,0,0,0.05)\",\n        transition: \"opacity 0.5s cubic-bezier(0.165, 0.84, 0.44, 1)\",\n        content: '\"\"',\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        width: \"100%\",\n        height: \"100%\",\n        zIndex: -1,\n        opacity: 0\n    },\n    \"&:hover\": {\n        transform: \"scale(1.25)\",\n        \"&::after\": {\n            opacity: 1\n        }\n    }\n});\n\nconst transparent = css({\n    backgroundSize: \"10px 10px\",\n    backgroundImage:\n        \"linear-gradient( 45deg, #555 25%, transparent 25%, transparent),\" +\n        \"linear-gradient(-45deg, #555 25%, transparent 25%, transparent),\" +\n        \"linear-gradient( 45deg, transparent 75%, #555 75%),\" +\n        \"linear-gradient(-45deg, transparent 75%, #555 75%)\"\n});\n\nconst chromePickerStyles = css({\n    width: \"100%\",\n    \".chrome-picker\": {\n        boxShadow: \"none !important\",\n        width: \"100% !important\"\n    }\n});\n\nconst iconPaletteStyle = css({\n    height: 20,\n    width: \"100%\",\n    marginTop: 1,\n    color: \"var(--mdc-theme-secondary)\"\n});\n\nconst styles = {\n    selectedColor: css({\n        boxShadow: \"0px 0px 0px 2px var(--mdc-theme-secondary)\"\n    }),\n    swatch: css({\n        padding: \"5px\",\n        background: \"#fff\",\n        borderRadius: \"1px\",\n        boxShadow: \"0 0 0 1px rgba(0,0,0,.1)\",\n        display: \"inline-block\",\n        cursor: \"pointer\",\n        height: 30,\n        boxSizing: \"border-box\"\n    }),\n    color: css({\n        width: \"40px\",\n        height: \"100%\",\n        borderRadius: \"2px\"\n    })\n};\n\ntype ColorPickerProps = {\n    value: string;\n    onChange: Function;\n    onChangeComplete: Function;\n    compact?: boolean;\n    handlerClassName?: string;\n};\n\nconst ColorPicker = ({\n    value,\n    onChange,\n    onChangeComplete,\n    compact = false,\n    handlerClassName\n}: ColorPickerProps) => {\n    const [showPicker, setShowPicker] = useState(false);\n\n    const getColorValue = useCallback(rgb => {\n        return `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, ${rgb.a})`;\n    }, []);\n\n    const onColorChange = useCallback(\n        color => {\n            onChange(getColorValue(color.rgb));\n        },\n        [onChange]\n    );\n\n    const onColorChangeComplete = useCallback(\n        ({ rgb }) => {\n            onChangeComplete(getColorValue(rgb));\n        },\n        [onChangeComplete]\n    );\n\n    const hidePicker = useCallback(() => {\n        setShowPicker(false);\n    }, [setShowPicker]);\n\n    const togglePicker = useCallback(\n        e => {\n            e.stopPropagation();\n            setShowPicker(!showPicker);\n        },\n        [showPicker, setShowPicker]\n    );\n\n    const { theme } = usePageBuilder();\n\n    let themeColor = false;\n\n    const colorPicker = (\n        <ColorPickerStyle onClick={hidePicker}>\n            {Object.values(theme.colors).map((color, index) => {\n                if (color === value || value === \"transparent\") {\n                    themeColor = true;\n                }\n\n                return (\n                    <ColorBox key={index}>\n                        <Color\n                            className={color === value ? styles.selectedColor : null}\n                            style={{ backgroundColor: color }}\n                            onClick={() => {\n                                hidePicker();\n                                onChangeComplete(color);\n                            }}\n                        />\n                    </ColorBox>\n                );\n            })}\n\n            <ColorBox>\n                <Color\n                    className={classnames(transparent, {\n                        [styles.selectedColor]: value === \"transparent\"\n                    })}\n                    onClick={() => {\n                        hidePicker();\n                        onChangeComplete(\"transparent\");\n                    }}\n                />\n            </ColorBox>\n\n            <ColorBox>\n                <Color\n                    className={value && !themeColor ? styles.selectedColor : null}\n                    style={{ backgroundColor: themeColor ? \"#fff\" : value }}\n                    onClick={togglePicker}\n                >\n                    <IconPalette className={iconPaletteStyle} />\n                </Color>\n            </ColorBox>\n            {showPicker && (\n                <span onClick={e => e.stopPropagation()} className={chromePickerStyles}>\n                    <ChromePicker\n                        color={value || \"#fff\"}\n                        onChange={onColorChange}\n                        onChangeComplete={onColorChangeComplete}\n                    />\n                </span>\n            )}\n        </ColorPickerStyle>\n    );\n\n    if (compact) {\n        return (\n            <CompactColorPicker>\n                <Menu\n                    handle={\n                        <div className={classnames(styles.swatch, handlerClassName)}>\n                            <div className={styles.color} style={{ backgroundColor: value }} />\n                        </div>\n                    }\n                >\n                    <ColorList>\n                        {React.cloneElement(colorPicker, { style: { width: 240 } })}\n                    </ColorList>\n                </Menu>\n            </CompactColorPicker>\n        );\n    }\n\n    return colorPicker;\n};\n\nexport default React.memo(ColorPicker, isEqual);\n"],"file":"index.js"}