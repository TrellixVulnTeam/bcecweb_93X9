{"version":3,"sources":["../../../../src/editor/ui/views/GeneralSettingsView.ts"],"names":["slugify","InputElement","validation","TextareaElement","PageSettingsFormView","SelectElement","plugins","FileManagerElement","TagsMultiAutocompleteElement","toSlug","value","cb","replacement","lower","remove","GeneralSettingsView","setTitle","addField","name","label","description","validators","create","beforeChange","rows","options","byType","map","pl","layout","title","onChangePickAttributes","applyPlugins"],"mappings":";;;AAAA,OAAOA,OAAP,MAAoB,SAApB;AACA,SAASC,YAAT,QAA6B,iDAA7B;AACA,SAASC,UAAT,QAA2B,oBAA3B;AACA,SAASC,eAAT,QAAgC,oDAAhC;AACA,SAASC,oBAAT;AACA,SAASC,aAAT,QAA8B,kDAA9B;AACA,SAASC,OAAT,QAAwB,iBAAxB;AAEA,SAASC,kBAAT,QAAmC,uDAAnC;AACA,SAASC,4BAAT;;AAEA,IAAMC,MAAM,GAAG,SAATA,MAAS,CAACC,KAAD,EAAQC,EAAR,EAAe;AAC1BA,EAAAA,EAAE,CAACX,OAAO,CAACU,KAAD,EAAQ;AAAEE,IAAAA,WAAW,EAAE,GAAf;AAAoBC,IAAAA,KAAK,EAAE,IAA3B;AAAiCC,IAAAA,MAAM,EAAE;AAAzC,GAAR,CAAR,CAAF,CAD0B,CACsE;AACnG,CAFD;;AAIA,WAAaC,mBAAb;AAAA;;AAAA;;AACI,iCAAc;AAAA;;AAAA;;AACV,8BAAM,qBAAN;;AAEA,UAAKC,QAAL,CAAc,kBAAd;;AAEA,UAAKC,QAAL,CACI,IAAIhB,YAAJ,CAAiB,OAAjB,EAA0B;AACtBiB,MAAAA,IAAI,EAAE,OADgB;AAEtBC,MAAAA,KAAK,EAAE,OAFe;AAGtBC,MAAAA,WAAW,EAAE,aAHS;AAItBC,MAAAA,UAAU,EAAE;AAAA,eAAMnB,UAAU,CAACoB,MAAX,CAAkB,UAAlB,CAAN;AAAA;AAJU,KAA1B,CADJ;;AASA,UAAKL,QAAL,CACI,IAAIhB,YAAJ,CAAiB,MAAjB,EAAyB;AACrBiB,MAAAA,IAAI,EAAE,MADe;AAErBC,MAAAA,KAAK,EAAE,MAFc;AAGrBC,MAAAA,WAAW,qEAHU;AAIrBC,MAAAA,UAAU,EAAE;AAAA,eAAMnB,UAAU,CAACoB,MAAX,CAAkB,sBAAlB,CAAN;AAAA,OAJS;AAKrBC,MAAAA,YAAY,EAAEd;AALO,KAAzB,CADJ;;AAUA,UAAKQ,QAAL,CACI,IAAId,eAAJ,CAAoB,SAApB,EAA+B;AAC3Be,MAAAA,IAAI,EAAE,0BADqB;AAE3BC,MAAAA,KAAK,EAAE,SAFoB;AAG3BC,MAAAA,WAAW,EAAE,eAHc;AAI3BI,MAAAA,IAAI,EAAE;AAJqB,KAA/B,CADJ;;AASA,UAAKP,QAAL,CACI,IAAIZ,aAAJ,CAAkB,QAAlB,EAA4B;AACxBa,MAAAA,IAAI,EAAE,yBADkB;AAExBC,MAAAA,KAAK,EAAE,QAFiB;AAGxBC,MAAAA,WAAW,EAAE,6CAHW;AAIxBK,MAAAA,OAAO,EAAEnB,OAAO,CAACoB,MAAR,CAAmC,gBAAnC,EAAqDC,GAArD,CAAyD,UAAAC,EAAE,EAAI;AACpE,eAAO;AAAElB,UAAAA,KAAK,EAAEkB,EAAE,CAACC,MAAH,CAAUX,IAAnB;AAAyBC,UAAAA,KAAK,EAAES,EAAE,CAACC,MAAH,CAAUC;AAA1C,SAAP;AACH,OAFQ;AAJe,KAA5B,CADJ;;AAWA,UAAKb,QAAL,CACI,IAAIT,4BAAJ,CAAiC,MAAjC,EAAyC;AACrCU,MAAAA,IAAI,EAAE,uBAD+B;AAErCC,MAAAA,KAAK,EAAE,MAF8B;AAGrCC,MAAAA,WAAW,EAAE;AAHwB,KAAzC,CADJ;;AAQA,UAAKH,QAAL,CACI,IAAIV,kBAAJ,CAAuB,OAAvB,EAAgC;AAC5BW,MAAAA,IAAI,EAAE,wBADsB;AAE5BC,MAAAA,KAAK,EAAE,YAFqB;AAG5BY,MAAAA,sBAAsB,EAAE,CAAC,IAAD,EAAO,KAAP;AAHI,KAAhC,CADJ;;AAQA,UAAKC,YAAL,CAAkBjB,mBAAlB;;AA5DU;AA6Db;;AA9DL;AAAA,EAAyCX,oBAAzC","sourcesContent":["import slugify from \"slugify\";\nimport { InputElement } from \"@webiny/app-admin/ui/elements/form/InputElement\";\nimport { validation } from \"@webiny/validation\";\nimport { TextareaElement } from \"@webiny/app-admin/ui/elements/form/TextareaElement\";\nimport { PageSettingsFormView } from \"~/editor/ui/views/PageSettingsView/PageSettingsFormView\";\nimport { SelectElement } from \"@webiny/app-admin/ui/elements/form/SelectElement\";\nimport { plugins } from \"@webiny/plugins\";\nimport { PbPageLayoutPlugin } from \"~/types\";\nimport { FileManagerElement } from \"@webiny/app-admin/ui/elements/form/FileManagerElement\";\nimport { TagsMultiAutocompleteElement } from \"~/editor/ui/elements/TagsMultiAutocompleteElement\";\n\nconst toSlug = (value, cb) => {\n    cb(slugify(value, { replacement: \"-\", lower: true, remove: /[*#\\?<>_\\{\\}\\[\\]+~.()'\"!:;@]/g })); // eslint-disable-line\n};\n\nexport class GeneralSettingsView extends PageSettingsFormView {\n    constructor() {\n        super(\"GeneralSettingsView\");\n\n        this.setTitle(\"General Settings\");\n\n        this.addField(\n            new InputElement(\"title\", {\n                name: \"title\",\n                label: \"Title\",\n                description: \"Page title.\",\n                validators: () => validation.create(\"required\")\n            })\n        );\n\n        this.addField(\n            new InputElement(\"path\", {\n                name: \"path\",\n                label: \"Path\",\n                description: `For example: \"/about-us\". Must contain at least two characters.`,\n                validators: () => validation.create(\"required,minLength:2\"),\n                beforeChange: toSlug\n            })\n        );\n\n        this.addField(\n            new TextareaElement(\"snippet\", {\n                name: \"settings.general.snippet\",\n                label: \"Snippet\",\n                description: \"Page snippet.\",\n                rows: 4\n            })\n        );\n\n        this.addField(\n            new SelectElement(\"layout\", {\n                name: \"settings.general.layout\",\n                label: \"Layout\",\n                description: \"Render this page using the selected layout.\",\n                options: plugins.byType<PbPageLayoutPlugin>(\"pb-page-layout\").map(pl => {\n                    return { value: pl.layout.name, label: pl.layout.title };\n                })\n            })\n        );\n\n        this.addField(\n            new TagsMultiAutocompleteElement(\"tags\", {\n                name: \"settings.general.tags\",\n                label: \"Tags\",\n                description: \"Add tags to filter pages.\"\n            })\n        );\n\n        this.addField(\n            new FileManagerElement(\"image\", {\n                name: \"settings.general.image\",\n                label: \"Page Image\",\n                onChangePickAttributes: [\"id\", \"src\"]\n            })\n        );\n\n        this.applyPlugins(GeneralSettingsView);\n    }\n}\n"],"file":"GeneralSettingsView.js"}