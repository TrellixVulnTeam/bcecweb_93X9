{"version":3,"sources":["../../../../src/admin/hooks/useSavedElements/useSavedElements.ts"],"names":["useState","useQuery","get","LIST_PAGE_ELEMENTS","createElementPlugin","createBlockPlugin","useSavedElements","ready","setReady","skip","data","loading","elements","forEach","el","type"],"mappings":";AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,SAASC,GAAT,QAAoB,oBAApB;AACA,SAASC,kBAAT;AACA,OAAOC,mBAAP;AACA,OAAOC,iBAAP;AAEA,OAAO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAClC,kBAA0BN,QAAQ,CAAC,KAAD,CAAlC;AAAA;AAAA,MAAOO,KAAP;AAAA,MAAcC,QAAd;;AAEA,kBAA0BP,QAAQ,CAACE,kBAAD,EAAqB;AAAEM,IAAAA,IAAI,EAAEF;AAAR,GAArB,CAAlC;AAAA,MAAQG,IAAR,aAAQA,IAAR;AAAA,MAAcC,OAAd,aAAcA,OAAd;;AAEA,MAAIJ,KAAJ,EAAW;AACP,WAAO,IAAP;AACH;;AAED,MAAII,OAAJ,EAAa;AACT,WAAO,KAAP;AACH;;AAED,MAAMC,QAAQ,GAAGV,GAAG,CAACQ,IAAD,EAAO,mCAAP,CAAH,IAAkD,EAAnE;;AACA,MAAI,CAACH,KAAL,EAAY;AACRK,IAAAA,QAAQ,CAACC,OAAT,CAAiB,UAAAC,EAAE,EAAI;AACnB,UAAIA,EAAE,CAACC,IAAH,KAAY,SAAhB,EAA2B;AACvBX,QAAAA,mBAAmB,CAACU,EAAD,CAAnB;AACH,OAFD,MAEO;AACHT,QAAAA,iBAAiB,CAACS,EAAD,CAAjB;AACH;AACJ,KAND;AAOAN,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACH;;AAED,SAAOD,KAAP;AACH,CA1BM","sourcesContent":["import { useState } from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { get } from \"dot-prop-immutable\";\nimport { LIST_PAGE_ELEMENTS } from \"../../graphql/pages\";\nimport createElementPlugin from \"../../utils/createElementPlugin\";\nimport createBlockPlugin from \"../../utils/createBlockPlugin\";\n\nexport const useSavedElements = () => {\n    const [ready, setReady] = useState(false);\n\n    const { data, loading } = useQuery(LIST_PAGE_ELEMENTS, { skip: ready });\n\n    if (ready) {\n        return true;\n    }\n\n    if (loading) {\n        return false;\n    }\n\n    const elements = get(data, \"pageBuilder.listPageElements.data\") || [];\n    if (!ready) {\n        elements.forEach(el => {\n            if (el.type === \"element\") {\n                createElementPlugin(el);\n            } else {\n                createBlockPlugin(el);\n            }\n        });\n        setReady(true);\n    }\n\n    return ready;\n};\n"],"file":"useSavedElements.js"}