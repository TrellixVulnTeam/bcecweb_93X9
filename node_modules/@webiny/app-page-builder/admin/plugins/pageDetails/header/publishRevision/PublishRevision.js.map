{"version":3,"sources":["../../../../../../src/admin/plugins/pageDetails/header/publishRevision/PublishRevision.tsx"],"names":["React","useMemo","IconButton","Tooltip","useConfirmationDialog","i18n","useSecurity","usePublishRevisionHandler","usePermission","t","ns","PublishRevision","props","identity","canPublish","canUnpublish","page","publishRevision","unpublishRevision","title","message","showPublishConfirmation","showConfirmation","showUnpublishConfirmation","pbPagePermission","getPermission","status"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,OAAhB,QAA+B,OAA/B;AACA,SAASC,UAAT,QAA2B,mBAA3B;AACA,SAASC,OAAT,QAAwB,oBAAxB;AACA,SAASC,qBAAT,QAAsC,+CAAtC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,WAAT,QAA4B,sBAA5B;;;AAGA,SAASC,yBAAT;AACA,OAAOC,aAAP;AAEA,IAAMC,CAAC,GAAGJ,IAAI,CAACK,EAAL,CAAQ,+DAAR,CAAV;;AAEA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAAC,KAAK,EAAI;AAC7B,qBAAqBN,WAAW,EAAhC;AAAA,MAAQO,QAAR,gBAAQA,QAAR;;AACA,uBAAqCL,aAAa,EAAlD;AAAA,MAAQM,UAAR,kBAAQA,UAAR;AAAA,MAAoBC,YAApB,kBAAoBA,YAApB;;AACA,MAAQC,IAAR,GAAiBJ,KAAjB,CAAQI,IAAR;;AAEA,8BAA+CT,yBAAyB,CAAC;AAAES,IAAAA,IAAI,EAAJA;AAAF,GAAD,CAAxE;AAAA,MAAQC,eAAR,yBAAQA,eAAR;AAAA,MAAyBC,iBAAzB,yBAAyBA,iBAAzB;;AAEA,8BAAsDd,qBAAqB,CAAC;AACxEe,IAAAA,KAAK,EAAEV,CAAF,iFADmE;AAExEW,IAAAA,OAAO,eACH,+BACKX,CAAC,oJAAD,CAAiF;AAC9EU,MAAAA,KAAK,eAAE,oCAASH,IAAI,CAACG,KAAd;AADuE,KAAjF,CADL;AAHoE,GAAD,CAA3E;AAAA,MAA0BE,uBAA1B,yBAAQC,gBAAR;;AAWA,+BAAwDlB,qBAAqB,CAAC;AAC1Ee,IAAAA,KAAK,EAAEV,CAAF,qFADqE;AAE1EW,IAAAA,OAAO,eACH,+BACKX,CAAC,sJAAD,CACG;AACIU,MAAAA,KAAK,eAAE,oCAASH,IAAI,CAACG,KAAd;AADX,KADH,CADL;AAHsE,GAAD,CAA7E;AAAA,MAA0BI,yBAA1B,0BAAQD,gBAAR;;AAaA,MAAME,gBAAgB,GAAGvB,OAAO,CAAC;AAAA,WAAMY,QAAQ,CAACY,aAAT,CAAuB,SAAvB,CAAN;AAAA,GAAD,EAA0C,EAA1C,CAAhC;;AACA,MAAI,CAACD,gBAAL,EAAuB;AACnB,WAAO,IAAP;AACH;;AAED,MAAIR,IAAI,CAACU,MAAL,KAAgB,WAAhB,IAA+BX,YAAY,EAA/C,EAAmD;AAC/C,wBACI,oBAAC,OAAD;AAAS,MAAA,OAAO,EAAEN,CAAF,gFAAhB;AAAgC,MAAA,SAAS,EAAE;AAA3C,oBACI,oBAAC,UAAD;AACI,MAAA,IAAI,eAAE,oBAAC,aAAD,OADV;AAEI,MAAA,OAAO,EAAE;AAAA,eACLc,yBAAyB,wEAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAChBL,iBAAiB,CAACF,IAAD,CADD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAD,GADpB;AAAA;AAFb,MADJ,CADJ;AAYH;;AAED,MAAIF,UAAU,EAAd,EAAkB;AACd,wBACI,oBAAC,OAAD;AAAS,MAAA,OAAO,EAAEL,CAAF,8EAAhB;AAA8B,MAAA,SAAS,EAAE;AAAzC,oBACI,oBAAC,UAAD;AACI,MAAA,IAAI,eAAE,oBAAC,WAAD,OADV;AAEI,MAAA,OAAO,EAAE;AAAA,eACLY,uBAAuB,wEAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBACdJ,eAAe,CAACD,IAAD,CADD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAD,GADlB;AAAA;AAFb,MADJ,CADJ;AAYH;;AAED,SAAO,IAAP;AACH,CAnED;;AAqEA,eAAeL,eAAf","sourcesContent":["import React, { useMemo } from \"react\";\nimport { IconButton } from \"@webiny/ui/Button\";\nimport { Tooltip } from \"@webiny/ui/Tooltip\";\nimport { useConfirmationDialog } from \"@webiny/app-admin/hooks/useConfirmationDialog\";\nimport { i18n } from \"@webiny/app/i18n\";\nimport { useSecurity } from \"@webiny/app-security\";\nimport { ReactComponent as PublishIcon } from \"../../../../assets/round-publish-24px.svg\";\nimport { ReactComponent as UnpublishIcon } from \"../../../../assets/unpublish.svg\";\nimport { usePublishRevisionHandler } from \"../../pageRevisions/usePublishRevisionHandler\";\nimport usePermission from \"../../../../../hooks/usePermission\";\n\nconst t = i18n.ns(\"app-headless-cms/app-page-builder/page-details/header/publish\");\n\nconst PublishRevision = props => {\n    const { identity } = useSecurity();\n    const { canPublish, canUnpublish } = usePermission();\n    const { page } = props;\n\n    const { publishRevision, unpublishRevision } = usePublishRevisionHandler({ page });\n\n    const { showConfirmation: showPublishConfirmation } = useConfirmationDialog({\n        title: t`Publish page`,\n        message: (\n            <p>\n                {t`You are about to publish the {title} page. Are you sure you want to continue?`({\n                    title: <strong>{page.title}</strong>\n                })}\n            </p>\n        )\n    });\n\n    const { showConfirmation: showUnpublishConfirmation } = useConfirmationDialog({\n        title: t`Unpublish page`,\n        message: (\n            <p>\n                {t`You are about to unpublish the {title} page. Are you sure you want to continue?`(\n                    {\n                        title: <strong>{page.title}</strong>\n                    }\n                )}\n            </p>\n        )\n    });\n\n    const pbPagePermission = useMemo(() => identity.getPermission(\"pb.page\"), []);\n    if (!pbPagePermission) {\n        return null;\n    }\n\n    if (page.status === \"published\" && canUnpublish()) {\n        return (\n            <Tooltip content={t`Unpublish`} placement={\"top\"}>\n                <IconButton\n                    icon={<UnpublishIcon />}\n                    onClick={() =>\n                        showUnpublishConfirmation(async () => {\n                            await unpublishRevision(page);\n                        })\n                    }\n                />\n            </Tooltip>\n        );\n    }\n\n    if (canPublish()) {\n        return (\n            <Tooltip content={t`Publish`} placement={\"top\"}>\n                <IconButton\n                    icon={<PublishIcon />}\n                    onClick={() =>\n                        showPublishConfirmation(async () => {\n                            await publishRevision(page);\n                        })\n                    }\n                />\n            </Tooltip>\n        );\n    }\n\n    return null;\n};\n\nexport default PublishRevision;\n"],"file":"PublishRevision.js"}