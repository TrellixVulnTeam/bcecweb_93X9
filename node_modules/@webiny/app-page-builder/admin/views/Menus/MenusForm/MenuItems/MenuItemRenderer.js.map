{"version":3,"sources":["../../../../../../src/admin/views/Menus/MenusForm/MenuItems/MenuItemRenderer.tsx"],"names":["React","isDescendant","classnames","plugins","IconButton","Typography","Icon","rowHandle","fieldContainer","Row","RowContainer","NodeRendererDefault","props","scaffoldBlockPxWidth","toggleChildrenVisibility","connectDragPreview","connectDragSource","isDragging","canDrop","canDrag","node","title","draggedNode","path","treeIndex","editItem","deleteItem","className","style","didDrop","canSave","nodeTitle","menuItemPlugins","byType","plugin","find","pl","menuItem","type","handle","dropEffect","isDraggedDescendant","isLandingPadActive","buttonStyle","left","height","children","length","expanded","width","opacity","subtitle","Component","buttons","parentNode"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { isDescendant } from \"react-sortable-tree\";\nimport classnames from \"classnames\";\nimport { plugins } from \"@webiny/plugins\";\nimport { IconButton } from \"@webiny/ui/Button\";\nimport { Typography } from \"@webiny/ui/Typography\";\nimport { Icon } from \"@webiny/ui/Icon\";\nimport \"react-sortable-tree/style.css\";\nimport { rowHandle, fieldContainer, Row, RowContainer } from \"./Styled\";\n\nimport { ReactComponent as EditIcon } from \"./icons/round-edit-24px.svg\";\nimport { ReactComponent as DeleteIcon } from \"./icons/round-delete-24px.svg\";\nimport { ReactComponent as HandleIcon } from \"./icons/round-drag_indicator-24px.svg\";\nimport { PbMenuItemPlugin } from \"../../../../../types\";\n\nclass NodeRendererDefault extends React.Component<any> {\n    static defaultProps = {\n        canDrag: false,\n        toggleChildrenVisibility: null,\n        buttons: [],\n        className: \"\",\n        style: {},\n        parentNode: null,\n        draggedNode: null,\n        canDrop: false,\n        title: null,\n        subtitle: null,\n        canSave: false\n    };\n\n    render() {\n        const {\n            scaffoldBlockPxWidth,\n            toggleChildrenVisibility,\n            connectDragPreview,\n            connectDragSource,\n            isDragging,\n            canDrop,\n            canDrag,\n            node,\n            title,\n            draggedNode,\n            path,\n            treeIndex,\n            editItem,\n            deleteItem,\n            className,\n            style,\n            didDrop,\n            canSave\n        } = this.props;\n\n        const nodeTitle = title || node.title;\n\n        const menuItemPlugins = plugins.byType<PbMenuItemPlugin>(\"pb-menu-item\");\n        const plugin = menuItemPlugins.find(pl => pl.menuItem.type === node.type);\n        if (!plugin) {\n            return null;\n        }\n\n        const handle = connectDragSource(\n            <div className={rowHandle}>\n                <Icon icon={<HandleIcon />} />\n            </div>,\n            {\n                dropEffect: \"copy\"\n            }\n        );\n\n        const isDraggedDescendant = draggedNode && isDescendant(draggedNode, node);\n        const isLandingPadActive = !didDrop && isDragging;\n\n        const buttonStyle = { left: -0.5 * scaffoldBlockPxWidth };\n\n        return (\n            <div style={{ height: \"100%\" }} data-testid={`pb-menu-item-render-${nodeTitle}`}>\n                {toggleChildrenVisibility &&\n                    node.children &&\n                    (node.children.length > 0 || typeof node.children === \"function\") && (\n                        <div>\n                            <button\n                                type=\"button\"\n                                aria-label={node.expanded ? \"Collapse\" : \"Expand\"}\n                                className={classnames(\n                                    node.expanded ? \"rst__collapseButton\" : \"rst__expandButton\"\n                                )}\n                                style={buttonStyle}\n                                onClick={() =>\n                                    toggleChildrenVisibility({\n                                        node,\n                                        path,\n                                        treeIndex\n                                    })\n                                }\n                            />\n\n                            {node.expanded && !isDragging && (\n                                <div\n                                    style={{ width: scaffoldBlockPxWidth }}\n                                    className={classnames(\"rst__lineChildren\")}\n                                />\n                            )}\n                        </div>\n                    )}\n\n                <RowContainer className={\"rst__rowWrapper\"}>\n                    {/* Set the row preview to be used during drag and drop */}\n                    {connectDragPreview(\n                        <div>\n                            {canSave && handle}\n                            <Row\n                                className={classnames(\n                                    \"rst__row\",\n                                    isLandingPadActive && \"rst__rowLandingPad\",\n                                    isLandingPadActive && !canDrop && \"rst__rowCancelPad\",\n                                    className\n                                )}\n                                style={{\n                                    opacity: isDraggedDescendant ? 0.5 : 1,\n                                    ...style\n                                }}\n                            >\n                                <div\n                                    className={classnames(\n                                        fieldContainer,\n                                        !canDrag && \"rst__rowContentsDragDisabled\"\n                                    )}\n                                >\n                                    <div className={classnames(\"rst__rowLabel\")}>\n                                        <span\n                                            className={classnames(\n                                                \"rst__rowTitle\",\n                                                node.subtitle && \"rst__rowTitleWithSubtitle\"\n                                            )}\n                                        >\n                                            <Typography use={\"overline\"}>{nodeTitle}</Typography>\n                                        </span>\n                                    </div>\n\n                                    {canSave && (\n                                        <div className=\"rst__rowToolbar\">\n                                            <IconButton\n                                                data-testid={\"pb-edit-icon-button\"}\n                                                icon={<EditIcon />}\n                                                onClick={() => editItem(node)}\n                                            />\n                                            <IconButton\n                                                data-testid={\"pb-delete-icon-button\"}\n                                                icon={<DeleteIcon />}\n                                                onClick={() => deleteItem(node)}\n                                            />\n                                        </div>\n                                    )}\n                                </div>\n                            </Row>\n                        </div>\n                    )}\n                </RowContainer>\n            </div>\n        );\n    }\n}\n\nexport default NodeRendererDefault;\n"],"file":"MenuItemRenderer.js"}